'use strict';var n;function aa(){};function ba(a,b){return(a||0===a?a+"":"").padEnd(b," ")}function da(a,b){return(a||0===a?a+"":"").padStart(b,"0")}function t(a,b,c,d){return new Proxy({},{get:function(e,f){e=new a(b.buffer,c,d);f=e[f];return"function"===typeof f?f.bind(e):f},set:function(e,f,h){(new a(b.buffer,c,d))[f]=h;return!0}})}function ea(a,b){return"0x"+da((a?a.toString(16):"").toUpperCase(),b||1)}var fa;
if("undefined"!==typeof crypto&&crypto.getRandomValues){const a=new Int32Array(1);fa=function(){crypto.getRandomValues(a);return a[0]}}else if("undefined"!==typeof require){const a=require("crypto");fa=function(){return a.Wl(4).readInt32LE(0)}}else"undefined"!==typeof process&&import("node:crypto").then(a=>{fa=function(){return a.randomBytes(4).readInt32LE(0)}});var ha;
if("function"===typeof Math.clz32)ha=function(a){return 31-Math.clz32(a)};else{for(var ja=new Int8Array(256),ka=0,pa=-2;256>ka;ka++)ka&ka-1||pa++,ja[ka]=pa;ha=function(a){a>>>=0;var b=a>>>16;if(b){var c=b>>>8;return c?24+ja[c]:16+ja[b]}return(c=a>>>8)?8+ja[c]:ja[a]}}function qa(a){return 1>=a?1:1<<1+ha(a-1)}
function sa(a){var b=new Uint8Array(a),c,d;this.length=0;this.push=function(e){this.length!==a&&this.length++;b[d]=e;d=d+1&a-1};this.shift=function(){if(this.length){var e=b[c];c=c+1&a-1;this.length--;return e}return-1};this.clear=function(){this.length=d=c=0};this.clear()}function ta(){this.size=65536;this.data=new Float32Array(65536);this.length=this.end=this.start=0}
ta.prototype.push=function(a){this.length===this.size?this.start=this.start+1&this.size-1:this.length++;this.data[this.end]=a;this.end=this.end+1&this.size-1};ta.prototype.shift=function(){if(this.length){var a=this.data[this.start];this.start=this.start+1&this.size-1;this.length--;return a}};
function ua(a,b){var c=new Float32Array(b);b>a.length&&(b=a.length);var d=a.start+b,e=a.data.subarray(a.start,d);c.set(e);d>=a.size&&(d-=a.size,c.set(a.data.subarray(0,d),e.length));a.start=d;a.length-=b;return c}ta.prototype.clear=function(){this.length=this.end=this.start=0};function va(a,b){Array.isArray(a)||(a=[a]);xa(new Blob(a),b)}
function xa(a,b){var c=document.createElement("a");c.download=b;c.href=window.URL.createObjectURL(a);c.dataset.downloadurl=["application/octet-stream",c.download,c.href].join(":");document.createEvent?(a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(a)):c.click();window.URL.revokeObjectURL(c.href)}function ya(a){"number"===typeof a?this.view=new Uint8Array(a+7>>3):a instanceof ArrayBuffer&&(this.view=new Uint8Array(a))}
ya.prototype.set=function(a,b){const c=a>>3;a=1<<(a&7);this.view[c]=b?this.view[c]|a:this.view[c]&~a};ya.prototype.get=function(a){return this.view[a>>3]>>(a&7)&1};ya.prototype.ac=function(){return this.view.buffer};var za,Aa;
if("undefined"===typeof XMLHttpRequest||"undefined"!==typeof process&&process.Cl&&process.Cl.node){let a;za=async function(b,c){a||(a=await import("node:fs/promises"));if(c.ze){b=await a.open(b,"r");const d=Buffer.allocUnsafe(c.ze.length);try{await b.read({buffer:d,position:c.ze.start})}finally{await b.close()}c.done&&c.done(new Uint8Array(d))}else b=await a.readFile(b,{encoding:c.Oe?"utf-8":null}),b=c.Oe?JSON.parse(b):(new Uint8Array(b)).buffer,c.done(b)};Aa=async function(b){a||(a=await import("node:fs/promises"));
return(await a.stat(b)).size}}else za=async function(a,b,c){function d(){const k=c||0;setTimeout(()=>{za(a,b,k+1)},1E3*([1,1,2,3,5,8,13,21][k]||34))}var e=new XMLHttpRequest;e.open(b.method||"get",a,!0);e.responseType=b.Oe?"json":"arraybuffer";if(b.headers)for(var f=Object.keys(b.headers),h=0;h<f.length;h++){var g=f[h];e.setRequestHeader(g,b.headers[g])}b.ze&&(f=b.ze.start,e.setRequestHeader("Range","bytes="+f+"-"+(f+b.ze.length-1)),e.setRequestHeader("X-Accept-Encoding","identity"),e.onreadystatechange=
function(){200===e.status&&(console.error("Server sent full file in response to ranged request, aborting",{filename:a}),e.abort())});e.onload=function(){if(4===e.readyState)if(200!==e.status&&206!==e.status)console.error("Loading the image "+a+" failed (status %d)",e.status),500<=e.status&&600>e.status&&d();else if(e.response){if(b.ze){const k=e.getResponseHeader("Content-Encoding");k&&"identity"!==k&&console.error("Server sent Content-Encoding in response to ranged request",{filename:a,Nl:k})}b.done&&
b.done(e.response,e)}};e.onerror=function(k){console.error("Loading the image "+a+" failed",k);d()};b.progress&&(e.onprogress=function(k){b.progress(k)});e.send(null)},Aa=async function(a){return new Promise((b,c)=>{za(a,{done:(d,e)=>{d=e.getResponseHeader("Content-Range")||"";(e=d.match(/\/(\d+)\s*$/))?b(+e[1]):c(Error("`Range: bytes=...` header not supported (Got `"+d+"`)"))},headers:{Range:"bytes=0-0","X-Accept-Encoding":"identity"}})})};function Ba(a){this.buffer=a;this.byteLength=a.byteLength;this.onload=void 0}n=Ba.prototype;n.load=function(){this.onload&&this.onload({buffer:this.buffer})};n.get=function(a,b,c){c(new Uint8Array(this.buffer,a,b))};n.set=function(a,b,c){(new Uint8Array(this.buffer,a,b.byteLength)).set(b);c()};n.ac=function(a){a(this.buffer)};n.ja=function(){const a=[];a[0]=this.byteLength;a[1]=new Uint8Array(this.buffer);return a};n.J=function(a){this.byteLength=a[0];this.buffer=a[1].slice().buffer};
function Ca(a,b,c){this.filename=a;this.byteLength=b;this.g=new Map;this.h=new Set;this.M=c;this.l=!!c;this.onload=void 0}n=Ca.prototype;n.load=async function(){void 0===this.byteLength&&(this.byteLength=await Aa(this.filename));this.onload&&this.onload(Object.create(null))};n.Eg=function(a,b){var c=b/256;a/=256;for(var d=0;d<c;d++)if(!this.g.get(a+d))return;if(1===c)return this.g.get(a);b=new Uint8Array(b);for(d=0;d<c;d++)b.set(this.g.get(a+d),256*d);return b};
n.get=function(a,b,c){var d=this.Eg(a,b);if(d)c(d);else{var e=a,f=b;this.M&&(e=a-a%this.M,f=Math.ceil((a-e+b)/this.M)*this.M);za(this.filename,{done:function(h){h=new Uint8Array(h);this.Fg(e,f,h);e===a&&f===b?c(h):c(h.subarray(a-e,a-e+b))}.bind(this),ze:{start:e,length:f}})}};n.set=function(a,b,c){a/=256;for(var d=b.length/256,e=0;e<d;e++){var f=this.g.get(a+e);void 0===f?this.g.set(a+e,b.slice(256*e,256*(e+1))):f.set(b.subarray(256*e,256*(e+1)));this.h.add(a+e)}c()};
n.Fg=function(a,b,c){a/=256;b/=256;for(var d=0;d<b;d++){const e=this.g.get(a+d);e?c.set(e,256*d):this.l&&this.g.set(a+d,c.slice(256*d,256*(d+1)))}};n.ac=function(a){a()};n.ja=function(){const a=[],b=[];for(const [c,d]of this.g)this.h.has(c)&&b.push([c,d]);a[0]=b;return a};n.J=function(a){a=a[0];this.g.clear();this.h.clear();for(const [b,c]of a)this.g.set(b,c),this.h.add(b)};
function Ea(a,b,c,d){const e=a.match(/\.[^\.]+(\.zst)?$/);this.j=e?e[0]:"";this.i=a.substring(0,a.length-this.j.length);this.A=this.j.endsWith(".zst");this.i.endsWith("/")||(this.i+="-");this.g=new Map;this.h=new Set;this.byteLength=b;this.M=c;this.o=d;this.l=!!c;this.onload=void 0}n=Ea.prototype;n.load=function(){this.onload&&this.onload(Object.create(null))};
n.get=function(a,b,c){var d=this.sh(a,b);if(d)c(d);else if(this.M){const f=Math.floor(a/this.M),h=a-f*this.M,g=Math.ceil((h+b)/this.M),k=new Uint8Array(g*this.M);let l=0;for(let m=0;m<g;m++){var e=(f+m)*this.M;d=this.i+e+"-"+(e+this.M)+this.j;(e=this.sh(e,this.M))?(k.set(e,m*this.M),l++,l===g&&c(k.subarray(h,h+b))):za(d,{done:async function(p){p=new Uint8Array(p);this.A&&(p=await this.o(this.M,p),p=new Uint8Array(p));k.set(p,m*this.M);this.th((f+m)*this.M,this.M|0,p);l++;l===g&&c(k.subarray(h,h+b))}.bind(this)})}}else za(this.i+
a+"-"+(a+b)+this.j,{done:function(f){f=new Uint8Array(f);this.th(a,b,f);c(f)}.bind(this)})};n.sh=Ca.prototype.Eg;n.set=Ca.prototype.set;n.th=Ca.prototype.Fg;n.ja=Ca.prototype.ja;n.J=Ca.prototype.J;function Fa(a){this.file=a;this.byteLength=a.size;1073741824<a.size&&console.warn("SyncFileBuffer: Allocating buffer of "+(a.size>>20)+" MB ...");this.buffer=new ArrayBuffer(a.size);this.onload=void 0}n=Fa.prototype;n.load=function(){Ga(this,0)};
function Ga(a,b){var c=new FileReader;c.onload=function(d){d=new Uint8Array(d.target.result);(new Uint8Array(this.buffer,b)).set(d);Ga(this,b+4194304)}.bind(a);b<a.byteLength?c.readAsArrayBuffer(a.file.slice(b,Math.min(b+4194304,a.byteLength))):(a.file=void 0,a.onload&&a.onload({buffer:a.buffer}))}n.get=Ba.prototype.get;n.set=Ba.prototype.set;n.ac=Ba.prototype.ac;n.ja=Ba.prototype.ja;n.J=Ba.prototype.J;
function Ha(a){this.file=a;this.byteLength=a.size;this.g=new Map;this.h=new Set;this.onload=void 0}n=Ha.prototype;n.load=function(){this.onload&&this.onload(Object.create(null))};n.get=function(a,b,c){var d=this.Qi(a,b);d?c(d):(d=new FileReader,d.onload=function(e){e=new Uint8Array(e.target.result);this.Ri(a,b,e);c(e)}.bind(this),d.readAsArrayBuffer(this.file.slice(a,a+b)))};n.Qi=Ca.prototype.Eg;n.set=Ca.prototype.set;n.Ri=Ca.prototype.Fg;n.ja=Ca.prototype.ja;n.J=Ca.prototype.J;n.ac=function(a){a()};
n.Oh=function(a){for(var b=[],c=Array.from(this.g.keys()).sort(function(g,k){return g-k}),d=0,e=0;e<c.length;e++){var f=c[e],h=this.g.get(f);f*=256;f!==d&&(b.push(this.file.slice(d,f)),d=f);b.push(h);d+=h.length}d!==this.file.size&&b.push(this.file.slice(d));return new File(b,a)};
function Ma(a,b){if(a.buffer instanceof ArrayBuffer)return new Ba(a.buffer);if("undefined"!==typeof File&&a.buffer instanceof File)return b=a.async,void 0===b&&(b=268435456<=a.buffer.size),b?new Ha(a.buffer):new Fa(a.buffer);if(a.url)return a.ea?new Ea(a.url,a.size,a.M,b):new Ca(a.url,a.size,a.M)};function Na(a){this.s=a;this.o=new Uint8Array(8);this.A=new Uint8Array(8);this.g=new Uint16Array(8);this.j=new Uint16Array(8);this.h=new Uint16Array(8);this.l=new Uint16Array(8);this.Lc=new Uint8Array(8);this.B=new Uint8Array(8);this.Bg=[];this.i=0;a=a.C;u(a,0,this,this.Ad.bind(this,0));u(a,2,this,this.Ad.bind(this,1));u(a,4,this,this.Ad.bind(this,2));u(a,6,this,this.Ad.bind(this,3));u(a,1,this,this.Cd.bind(this,0));u(a,3,this,this.Cd.bind(this,1));u(a,5,this,this.Cd.bind(this,2));u(a,7,this,this.Cd.bind(this,
3));x(a,0,this,this.zd.bind(this,0));x(a,2,this,this.zd.bind(this,1));x(a,4,this,this.zd.bind(this,2));x(a,6,this,this.zd.bind(this,3));x(a,1,this,this.Bd.bind(this,0));x(a,3,this,this.Bd.bind(this,1));x(a,5,this,this.Bd.bind(this,2));x(a,7,this,this.Bd.bind(this,3));u(a,192,this,this.Ad.bind(this,4));u(a,196,this,this.Ad.bind(this,5));u(a,200,this,this.Ad.bind(this,6));u(a,204,this,this.Ad.bind(this,7));u(a,194,this,this.Cd.bind(this,4));u(a,198,this,this.Cd.bind(this,5));u(a,202,this,this.Cd.bind(this,
6));u(a,206,this,this.Cd.bind(this,7));x(a,192,this,this.zd.bind(this,4));x(a,196,this,this.zd.bind(this,5));x(a,200,this,this.zd.bind(this,6));x(a,204,this,this.zd.bind(this,7));x(a,194,this,this.Bd.bind(this,4));x(a,198,this,this.Bd.bind(this,5));x(a,202,this,this.Bd.bind(this,6));x(a,206,this,this.Bd.bind(this,7));u(a,135,this,this.Ed.bind(this,0));u(a,131,this,this.Ed.bind(this,1));u(a,129,this,this.Ed.bind(this,2));u(a,130,this,this.Ed.bind(this,3));u(a,143,this,this.Ed.bind(this,4));u(a,139,
this,this.Ed.bind(this,5));u(a,137,this,this.Ed.bind(this,6));u(a,138,this,this.Ed.bind(this,7));x(a,135,this,this.Dd.bind(this,0));x(a,131,this,this.Dd.bind(this,1));x(a,129,this,this.Dd.bind(this,2));x(a,130,this,this.Dd.bind(this,3));x(a,143,this,this.Dd.bind(this,4));x(a,139,this,this.Dd.bind(this,5));x(a,137,this,this.Dd.bind(this,6));x(a,138,this,this.Dd.bind(this,7));u(a,1159,this,this.xe.bind(this,0));u(a,1155,this,this.xe.bind(this,1));u(a,1153,this,this.xe.bind(this,2));u(a,1154,this,this.xe.bind(this,
3));u(a,1163,this,this.xe.bind(this,5));u(a,1161,this,this.xe.bind(this,6));u(a,1162,this,this.xe.bind(this,7));x(a,1159,this,this.we.bind(this,0));x(a,1155,this,this.we.bind(this,1));x(a,1153,this,this.we.bind(this,2));x(a,1154,this,this.we.bind(this,3));x(a,1163,this,this.we.bind(this,5));x(a,1161,this,this.we.bind(this,6));x(a,1162,this,this.we.bind(this,7));u(a,10,this,this.wi.bind(this,0));u(a,212,this,this.wi.bind(this,4));u(a,15,this,this.vi.bind(this,0));u(a,222,this,this.vi.bind(this,4));
x(a,15,this,this.ui.bind(this,0));x(a,222,this,this.ui.bind(this,4));u(a,11,this,this.ti.bind(this,0));u(a,214,this,this.ti.bind(this,4));u(a,12,this,this.si);u(a,216,this,this.si)}n=Na.prototype;n.ja=function(){return[this.o,this.A,this.g,this.j,this.h,this.l,this.Lc,this.B,this.i]};n.J=function(a){this.o=a[0];this.A=a[1];this.g=a[2];this.j=a[3];this.h=a[4];this.l=a[5];this.Lc=a[6];this.B=a[7];this.i=a[8]};n.Cd=function(a,b){this.h[a]=Oa(this,this.h[a],b,!1);this.l[a]=Oa(this,this.l[a],b,!0)};
n.Bd=function(a){return Pa(this,this.h[a])};n.Ad=function(a,b){this.g[a]=Oa(this,this.g[a],b,!1);this.j[a]=Oa(this,this.j[a],b,!0)};n.zd=function(a){return Pa(this,this.g[a])};n.xe=function(a,b){this.A[a]=b};n.we=function(a){return this.A[a]};n.Ed=function(a,b){this.o[a]=b};n.Dd=function(a){return this.o[a]};n.wi=function(a,b){Qa(this,(b&3)+a,b&4?1:0)};n.vi=function(a,b){for(var c=0;4>c;c++)Qa(this,a+c,b&1<<c)};
n.ui=function(a){var b=0|this.Lc[a+0];b|=this.Lc[a+1]<<1;b|=this.Lc[a+2]<<2;return b|=this.Lc[a+3]<<3};n.ti=function(a,b){this.B[(b&3)+a]=b};n.si=function(){this.i=0};function Qa(a,b,c){if(a.Lc[b]!==c&&(a.Lc[b]=c,!c))for(c=0;c<a.Bg.length;c++)a.Bg[c].eg.call(a.Bg[c].ih,b)}function Ra(a,b,c,d){var e=a.h[2]+1,f=Sa(a,2);if(c+e>b.byteLength)d(!0);else{var h=a.s;a.g[2]+=e;b.get(c,e,function(g){Ta(h,g,f);d(!1)})}}
n.nf=function(a,b,c,d,e){var f=this.h[d]+1&65535,h=5<=d?2:1,g=f*h,k=Sa(this,d),l=!1,m=!1,p=this.B[d]&16;c<g?(f=Math.floor(c/h),g=f*h,l=!0):c>g&&(m=!0);b+g>a.byteLength?e(!0):(this.g[d]+=f,this.h[d]-=f,!l&&p&&(this.g[d]=this.j[d],this.h[d]=this.l[d]),a.set(b,this.s.kb.subarray(k,k+g),()=>{m&&p?this.nf(a,b+g,c-g,d,e):e(!1)}))};function Sa(a,b){var c=a.g[b];5<=b&&(c<<=1);c=c&65535|a.o[b]<<16;return c|=a.A[b]<<24}function Oa(a,b,c,d){d||(a.i^=1);return a.i?b&-256|c:b&-65281|c<<8}
function Pa(a,b){a.i^=1;return a.i?b&255:b>>8&255};function Ua(a){this.ports=[];this.s=a;for(var b=0;65536>b;b++)this.ports[b]=Ya(this);var c=a.G[0];for(b=0;b<<17<c;b++)a.g[b]=a.j[b]=void 0,a.da[b]=a.i[b]=void 0;Za(this,c,4294967296-c,function(){return 255},function(){},function(){return-1},function(){})}function Ya(a){return{Ae:a.Dj,gb:a.Bj,Gf:a.Cj,Dg:a.Lg,Rf:a.Lg,Ca:a.Lg,qd:void 0}}n=Ua.prototype;n.Dj=function(){return 255};n.Bj=function(){return 65535};n.Cj=function(){return-1};n.Lg=function(){};
function x(a,b,c,d,e,f){d&&(a.ports[b].Ae=d);e&&(a.ports[b].gb=e);f&&(a.ports[b].Gf=f);a.ports[b].qd=c}function u(a,b,c,d,e,f){d&&(a.ports[b].Dg=d);e&&(a.ports[b].Rf=e);f&&(a.ports[b].Ca=f);a.ports[b].qd=c}
n.Be=function(a,b,c,d,e,f){function h(){return c.call(this)|d.call(this)<<8}function g(){return e.call(this)|f.call(this)<<8}function k(){return c.call(this)|d.call(this)<<8|e.call(this)<<16|f.call(this)<<24}e&&f?(x(this,a,b,c,h,k),x(this,a+1,b,d),x(this,a+2,b,e,g),x(this,a+3,b,f)):(x(this,a,b,c,h),x(this,a+1,b,d))};
n.jd=function(a,b,c,d,e,f){function h(l){c.call(this,l&255);d.call(this,l>>8&255)}function g(l){e.call(this,l&255);f.call(this,l>>8&255)}function k(l){c.call(this,l&255);d.call(this,l>>8&255);e.call(this,l>>16&255);f.call(this,l>>>24)}e&&f?(u(this,a,b,c,h,k),u(this,a+1,b,d),u(this,a+2,b,e,g),u(this,a+3,b,f)):(u(this,a,b,c,h),u(this,a+1,b,d))};n.Qj=function(a){var b=this.s.g[a>>>17];return b(a)|b(a+1)<<8|b(a+2)<<16|b(a+3)<<24};
n.Rj=function(a,b){var c=this.s.j[a>>>17];c(a,b&255);c(a+1,b>>8&255);c(a+2,b>>16&255);c(a+3,b>>>24)};function Za(a,b,c,d,e,f,h){f||(f=a.Qj.bind(a));h||(h=a.Rj.bind(a));for(b>>>=17;0<c;b++)a.s.g[b]=d,a.s.j[b]=e,a.s.da[b]=f,a.s.i[b]=h,c-=131072}function $a(a,b){a=a.ports[b];return a.Gf.call(a.qd,b)};function ab(){this.zf={};this.g=void 0}ab.prototype.register=function(a,b,c){var d=this.zf[a];void 0===d&&(d=this.zf[a]=[]);d.push({eg:b,ih:c})};ab.prototype.unregister=function(a,b){var c=this.zf[a];void 0!==c&&(this.zf[a]=c.filter(function(d){return d.eg!==b}))};ab.prototype.send=function(a,b){if(this.g&&(a=this.g.zf[a],void 0!==a))for(var c=0;c<a.length;c++){var d=a[c];d.eg.call(d.ih,b)}};function bb(){var a=new ab,b=new ab;a.g=b;b.g=a;return[a,b]};var cb=new Uint8Array(256),eb=[],fb=[],gb=[],hb=new Uint8Array(256),ib=[];
function jb(a,b){this.s=a;this.v=b;this.Ta=new sa(64);this.sa=new sa(64);this.i=this.o=this.Xb=this.K=0;this.W=new Uint8Array(256);kb(this);this.Se=!1;this.Mf=0;this.$b=this.Zb=this.le=this.Pc=!1;this.nc=[new ta,new ta];this.Fb=a.u.Fb;this.Gb=this.Oc=this.j=this.qc=this.l=this.D=0;this.rc=1;this.ke=5;this.pc=!1;this.g=new ArrayBuffer(65536);this.ba=new Int8Array(this.g);this.B=new Uint8Array(this.g);this.aa=new Int16Array(this.g);this.da=new Uint16Array(this.g);this.na=new Ba(this.g);this.sc=this.A=
!1;this.wb=22050;b.send("dac-tell-sampling-rate",this.wb);this.h=1;this.T=170;this.N=0;this.de=new Uint8Array(256);this.F=new sa(64);this.X=this.U=this.Pa=0;this.Gj=!1;this.ra=5;this.oe=new Uint8Array(16);a.C.Be(544,this,this.gi,this.ii,this.Yj,this.$j);a.C.Be(904,this,this.gi,this.ii);a.C.Be(548,this,this.bk,this.dk);x(a.C,550,this,this.fk);x(a.C,551,this,this.hk);x(a.C,552,this,this.jk);x(a.C,553,this,this.lk);x(a.C,554,this,this.nk);x(a.C,555,this,this.qk);x(a.C,556,this,this.sk);x(a.C,557,this,
this.uk);a.C.Be(558,this,this.wk,this.yk);a.C.jd(544,this,this.hi,this.ji,this.Zj,this.ak);a.C.jd(904,this,this.hi,this.ji);a.C.jd(548,this,this.ck,this.ek);u(a.C,550,this,this.gk);u(a.C,551,this,this.ik);a.C.jd(552,this,this.kk,this.mk);u(a.C,554,this,this.pk);u(a.C,555,this,this.rk);u(a.C,556,this,this.tk);u(a.C,557,this,this.vk);u(a.C,558,this,this.xk);u(a.C,559,this,this.zk);a.C.Be(816,this,this.bl,this.dl);a.C.jd(816,this,this.cl,this.el);this.Fb.Bg.push({eg:this.la,ih:this});b.register("dac-request-data",
function(){!this.qc||this.sc?lb(this):mb(this)},this);b.register("speaker-has-initialized",function(){kb(this)},this);b.send("speaker-confirm-initialized");nb(this)}function nb(a){a.Ta.clear();a.sa.clear();a.Xb=0;a.o=0;a.Se=!1;a.Mf=0;a.Pc=!1;a.le=!1;a.Zb=!1;a.$b=!1;a.nc[0].clear();a.nc[1].clear();a.D=0;a.l=0;a.qc=0;a.j=0;a.Oc=0;a.Gb=0;a.pc=!1;a.B.fill(0);a.A=!1;a.sc=!1;a.T=170;a.N=0;a.wb=22050;a.h=1;ob(a,1);a.oe.fill(0);a.de.fill(0);a.de[5]=1;a.de[9]=248}n=jb.prototype;
n.ja=function(){var a=[];a[2]=this.K;a[3]=this.Xb;a[4]=this.o;a[5]=this.i;a[6]=this.W;a[7]=this.Se;a[8]=this.Mf;a[9]=this.Pc;a[10]=this.le;a[11]=this.Zb;a[12]=this.$b;a[15]=this.D;a[16]=this.l;a[17]=this.qc;a[18]=this.j;a[19]=this.Oc;a[20]=this.Gb;a[21]=this.rc;a[22]=this.ke;a[23]=this.pc;a[24]=this.B;a[25]=this.A;a[26]=this.sc;a[27]=this.wb;a[28]=this.h;a[29]=this.T;a[30]=this.N;a[31]=this.de;a[33]=this.ab;a[34]=this.ra;a[35]=this.oe;return a};
n.J=function(a){this.K=a[2];this.Xb=a[3];this.o=a[4];this.i=a[5];this.W=a[6];pb(this);this.Se=a[7];this.Mf=a[8];this.Pc=a[9];this.le=a[10];this.Zb=a[11];this.$b=a[12];this.D=a[15];this.l=a[16];this.qc=a[17];this.j=a[18];this.Oc=a[19];this.Gb=a[20];this.rc=a[21];this.ke=a[22];this.pc=a[23];this.B=a[24];this.A=a[25];this.sc=a[26];this.wb=a[27];this.h=a[28];this.T=a[29];this.N=a[30];this.de=a[31];this.ab=a[33];this.ra=a[34];this.oe=a[35];this.g=this.B.buffer;this.ba=new Int8Array(this.g);this.aa=new Int16Array(this.g);
this.da=new Uint16Array(this.g);this.na=new Ba(this.g);this.sc?this.v.send("dac-disable"):this.v.send("dac-enable")};n.gi=function(){return 255};n.ii=function(){return 255};n.Yj=function(){return 255};n.$j=function(){return 255};n.bk=function(){return this.i};n.dk=function(){var a=this.i,b=fb[a];return b?b.call(this):this.W[a]};n.fk=function(){return 255};n.hk=function(){return 255};n.jk=function(){return 255};n.lk=function(){return 255};n.nk=function(){this.sa.length&&(this.K=this.sa.shift());return this.K};
n.qk=function(){return 255};n.sk=function(){return 127};n.uk=function(){return 255};n.wk=function(){this.oe[1]&&ob(this,1);return(this.sa.length&&!this.Pc)<<7|127};n.yk=function(){ob(this,2);return 0};n.hi=function(){this.U=0};n.ji=function(a){var b=ib[this.U];b||(b=this.Z);b.call(this,a,0,this.U)};n.Zj=function(){this.X=0};n.ak=function(a){var b=ib[this.X];b||(b=this.Z);b.call(this,a,1,this.X)};n.ck=function(a){this.i=a};n.ek=function(a){qb(this,this.i,a)};
n.gk=function(a){this.Pc?this.Pc=!1:a&&nb(this);this.sa.clear();this.sa.push(170)};n.ik=function(){};n.kk=function(){};n.mk=function(){};n.pk=function(){};n.rk=function(){};n.tk=function(a){0===this.Xb?(this.Xb=a,this.Ta.clear(),this.o=cb[a]):this.Ta.push(a);this.Ta.length>=this.o&&(a=eb[this.Xb],a||(a=this.Eh),a.call(this),this.o=this.Xb=0,this.Ta.clear())};n.vk=function(){};n.xk=function(){};n.zk=function(){};n.bl=function(){this.F.length&&(this.Pa=this.F.shift());return this.Pa};n.cl=function(){};
n.dl=function(){return 0|128*!this.F.length};n.el=function(a){255===a&&(this.F.clear(),this.F.push(254))};n.Eh=function(){};function F(a,b,c){c||(c=jb.prototype.Eh);for(var d=0;d<a.length;d++)cb[a[d]]=b,eb[a[d]]=c}function rb(a){for(var b=[],c=0;16>c;c++)b.push(a+c);return b}F([14],2,function(){this.de[this.Ta.shift()]=this.Ta.shift()});F([15],1,function(){this.sa.clear();this.sa.push(this.de[this.Ta.shift()])});
F([16],1,function(){var a=this.Ta.shift();a=sb(a/127.5+-1);this.nc[0].push(a);this.nc[1].push(a);this.v.send("dac-enable")});F([20,21],2,function(){this.Oc=1;this.Gb=this.rc;this.Pc=this.Zb=this.$b=this.pc=!1;tb(this);ub(this)});F([22],2);F([23],2);F([28],0,function(){this.Oc=1;this.Gb=this.rc;this.pc=!0;this.Pc=this.Zb=this.$b=!1;ub(this)});F([31],0);F([32],0,function(){this.sa.clear();this.sa.push(127)});F([36],2);F([44],0);F([48],0);F([49],0);F([52],0);F([53],0);F([54],0);F([55],0);F([56],0);
F([64],1,function(){vb(this,1E6/(256-this.Ta.shift())/(this.le?2:1))});F([65,66],2,function(){vb(this,this.Ta.shift()<<8|this.Ta.shift())});F([72],2,function(){tb(this)});F([116],2);F([117],2);F([118],2);F([119],2);F([125],0);F([127],0);F([128],2);F([144],0,function(){this.Oc=1;this.Gb=this.rc;this.pc=!0;this.$b=!1;this.Pc=!0;this.Zb=!1;ub(this)});F([145],0);F([152],0);F([153],0);F([160],0);F([168],0);
F(rb(176),3,function(){if(!(this.Xb&8)){var a=this.Ta.shift();this.Oc=2;this.Gb=this.ke;this.pc=!!(this.Xb&4);this.$b=!!(a&16);this.le=!!(a&32);this.Zb=!0;tb(this);ub(this)}});F(rb(192),3,function(){if(!(this.Xb&8)){var a=this.Ta.shift();this.Oc=1;this.Gb=this.rc;this.pc=!!(this.Xb&4);this.$b=!!(a&16);this.le=!!(a&32);this.Zb=!1;tb(this);ub(this)}});F([208],0,function(){this.sc=!0;this.v.send("dac-disable")});F([209],0,function(){this.Se=!0});F([211],0,function(){this.Se=!1});
F([212],0,function(){this.sc=!1;this.v.send("dac-enable")});F([213],0,function(){this.sc=!0;this.v.send("dac-disable")});F([214],0,function(){this.sc=!1;this.v.send("dac-enable")});F([216],0,function(){this.sa.clear();this.sa.push(255*this.Se)});F([217,218],0,function(){this.pc=!1});F([224],1,function(){this.sa.clear();this.sa.push(~this.Ta.shift())});F([225],0,function(){this.sa.clear();this.sa.push(4);this.sa.push(5)});F([226],1);
F([227],0,function(){this.sa.clear();for(var a=0;44>a;a++)this.sa.push("COPYRIGHT (C) CREATIVE TECHNOLOGY LTD, 1992.".charCodeAt(a));this.sa.push(0)});F([228],1,function(){this.Mf=this.Ta.shift()});F([232],0,function(){this.sa.clear();this.sa.push(this.Mf)});F([242,243],0,function(){this.Sa()});var wb=new Uint8Array(256);wb[14]=255;wb[15]=7;wb[55]=56;F([249],1,function(){var a=this.Ta.shift();this.sa.clear();this.sa.push(wb[a])});function qb(a,b,c){(b=gb[b])&&b.call(a,c)}jb.prototype.Da=function(){return this.W[this.i]};
jb.prototype.Ua=function(a){this.W[this.i]=a};function kb(a){a.W[4]=204;a.W[34]=204;a.W[38]=204;a.W[40]=0;a.W[46]=0;a.W[10]=0;a.W[48]=192;a.W[49]=192;a.W[50]=192;a.W[51]=192;a.W[52]=192;a.W[53]=192;a.W[54]=0;a.W[55]=0;a.W[56]=0;a.W[57]=0;a.W[59]=0;a.W[60]=31;a.W[61]=21;a.W[62]=11;a.W[63]=0;a.W[64]=0;a.W[65]=0;a.W[66]=0;a.W[67]=0;a.W[68]=128;a.W[69]=128;a.W[70]=128;a.W[71]=128;pb(a)}function pb(a){for(var b=1;b<a.W.length;b++)hb[b]||qb(a,b,a.W[b])}function xb(a,b){b||(b=jb.prototype.Da);fb[a]=b}
function yb(a,b){b||(b=jb.prototype.Ua);gb[a]=b}function zb(a,b,c){hb[a]=1;fb[a]=function(){return this.W[b]&240|this.W[c]>>>4};gb[a]=function(d){this.W[a]=d;var e=d<<4&240|this.W[c]&15;qb(this,b,d&240|this.W[b]&15);qb(this,c,e)}}function Ab(a,b,c){fb[a]=jb.prototype.Da;gb[a]=function(d){this.W[a]=d;this.v.send("mixer-volume",[b,c,(d>>>2)-62])}}xb(0,function(){kb(this);return 0});yb(0);zb(4,50,51);zb(34,48,49);zb(38,52,53);zb(40,54,55);zb(46,56,57);Ab(48,0,0);Ab(49,0,1);Ab(50,2,0);Ab(51,2,1);xb(59);
yb(59,function(a){this.W[59]=a;this.v.send("mixer-volume",[1,2,6*(a>>>6)-18])});xb(65);yb(65,function(a){this.W[65]=a;this.v.send("mixer-gain-left",6*(a>>>6))});xb(66);yb(66,function(a){this.W[66]=a;this.v.send("mixer-gain-right",6*(a>>>6))});xb(68);yb(68,function(a){this.W[68]=a;a>>>=3;this.v.send("mixer-treble-left",a-(16>a?14:16))});xb(69);yb(69,function(a){this.W[69]=a;a>>>=3;this.v.send("mixer-treble-right",a-(16>a?14:16))});xb(70);
yb(70,function(a){this.W[70]=a;a>>>=3;this.v.send("mixer-bass-right",a-(16>a?14:16))});xb(71);yb(71,function(a){this.W[71]=a;a>>>=3;this.v.send("mixer-bass-right",a-(16>a?14:16))});xb(128,function(){switch(this.ra){case 2:return 1;case 5:return 2;case 7:return 4;case 10:return 8;default:return 0}});yb(128,function(a){a&1&&(this.ra=2);a&2&&(this.ra=5);a&4&&(this.ra=7);a&8&&(this.ra=10)});
xb(129,function(){var a=0;switch(this.rc){case 0:a|=1;break;case 1:a|=2;break;case 3:a|=8}switch(this.ke){case 5:a|=32;break;case 6:a|=64;break;case 7:a|=128}return a});yb(129,function(a){a&1&&(this.rc=0);a&2&&(this.rc=1);a&8&&(this.rc=3);a&32&&(this.ke=5);a&64&&(this.ke=6);a&128&&(this.ke=7)});xb(130,function(){for(var a=32,b=0;16>b;b++)a|=b*this.oe[b];return a});jb.prototype.Z=function(){};function Bb(a,b){b||(b=jb.prototype.Z);for(var c=0;c<a.length;c++)ib[a[c]]=b}
function Cb(a,b){for(var c=[];a<=b;a++)c.push(a);return c}const Db=new Uint8Array(32);Db[0]=0;Db[1]=1;Db[2]=2;Db[3]=3;Db[4]=4;Db[5]=5;Db[8]=6;Db[9]=7;Db[10]=8;Db[11]=9;Db[12]=10;Db[13]=11;Db[16]=12;Db[17]=13;Db[18]=14;Db[19]=15;Db[20]=16;Db[21]=17;Bb([1],function(a,b){this.Gj[b]=a&1});Bb([2]);Bb([3]);Bb([4],function(){});Bb([5],function(){});Bb([8],function(){});Bb(Cb(32,53),function(){});Bb(Cb(64,85),function(){});Bb(Cb(96,117),function(){});Bb(Cb(128,149),function(){});Bb(Cb(160,168),function(){});
Bb(Cb(176,184),function(){});Bb([189],function(){});Bb(Cb(192,200),function(){});Bb(Cb(224,245),function(){});function vb(a,b){a.wb=b;a.v.send("dac-tell-sampling-rate",b)}function tb(a){a.D=1+(a.Ta.shift()<<0)+(a.Ta.shift()<<8)}function ub(a){a.h=1;a.Zb&&(a.h*=2);a.l=a.D*a.h;a.j=1024*a.h;a.j=Math.min(Math.max(a.l>>2&-4,32),a.j);a.A=!0;a.Fb.Lc[a.Gb]||a.la(a.Gb)}jb.prototype.la=function(a){a===this.Gb&&this.A&&(this.A=!1,this.qc=this.l,this.sc=!1,this.v.send("dac-enable"))};
function mb(a){var b=Math.min(a.qc,a.j),c=Math.floor(b/a.h);a.Fb.nf(a.na,0,b,a.Gb,d=>{if(!d){d=a.Zb?32767.5:127.5;var e=a.$b?0:-1,f=a.le?1:2,h;a.Zb?h=a.$b?a.aa:a.da:h=a.$b?a.ba:a.B;for(var g=0,k=0;k<c;k++)for(var l=sb(h[k]/d+e),m=0;m<f;m++)a.nc[g].push(l),g^=1;lb(a);a.qc-=b;a.qc||(a.Sa(a.Oc),a.pc&&(a.qc=a.l))}})}function lb(a){if(a.nc[0].length){var b=ua(a.nc[0],a.nc[0].length),c=ua(a.nc[1],a.nc[1].length);a.v.send("dac-send-data",[b,c],[b.buffer,c.buffer])}}
jb.prototype.Sa=function(a){this.oe[a]=1;this.s.Wa(this.ra)};function ob(a,b){a.oe[b]=0;Eb(a.s,a.ra)}function sb(a){return-1*(-1>a)+1*(1<a)+(-1<=a&&1>=a)*a};function Fb(a){this.message=a}Fb.prototype=Error();const Gb={Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,Float32Array,Float64Array};
function Hb(a,b){if("object"!==typeof a||null===a)return a;if(Array.isArray(a))return a.map(e=>Hb(e,b));a.constructor===Object&&console.log(a);if(a.BYTES_PER_ELEMENT){var c=new Uint8Array(a.buffer,a.byteOffset,a.length*a.BYTES_PER_ELEMENT);return{__state_type__:a.constructor.name.replace("bound ",""),buffer_id:b.push(c)-1}}a=a.ja();c=[];for(var d=0;d<a.length;d++)c[d]=Hb(a[d],b);return c}
function Ib(a,b){if("object"!==typeof a||null===a)return a;if(Array.isArray(a)){for(let c=0;c<a.length;c++)a[c]=Ib(a[c],b);return a}return new Gb[a.__state_type__](b[a.buffer_id])}
function Jb(a,b){function c(r,v){const B=r.length;if(16>B)throw new Fb("Invalid length: "+B);r=new Int32Array(r.buffer,r.byteOffset,4);if(-2039052682!==r[0])throw new Fb("Invalid header: "+ea(r[0]>>>0));if(6!==r[1])throw new Fb("Version mismatch: dump="+r[1]+" we=6");if(v&&r[2]!==B)throw new Fb("Length doesn't match header: real="+B+" header="+r[2]);return r[3]}function d(r){r=(new TextDecoder).decode(r);return JSON.parse(r)}b=new Uint8Array(b);if(4247762216===(new Uint32Array(b.buffer,0,1))[0]){var e=
a.Mi(b.length);(new Uint8Array(a.Ma.buffer,a.Oi(e),b.length)).set(b);var f=a.df(e,16),h=new Uint8Array(a.Ma.buffer,f,16),g=c(h,!1);a.ef(f,16);f=a.df(e,g);h=new Uint8Array(a.Ma.buffer,f,g);h=d(h);a.ef(f,g);f=h.state;var k=h.buffer_infos;h=[];g=16+g;for(var l of k){k=(g+3&-4)-g;if(1048576<l.length){var m=a.df(e,k);a.ef(m,k);m=new Uint8Array(l.length);h.push(m.buffer);for(var p=0;p<l.length;){const r=Math.min(l.length-p,1048576),v=a.df(e,r);m.set(new Uint8Array(a.Ma.buffer,v,r),p);a.ef(v,r);p+=r}}else m=
a.df(e,k+l.length),p=m+k,h.push(a.Ma.buffer.slice(p,p+l.length)),a.ef(m,k+l.length);g+=k+l.length}f=Ib(f,h);a.J(f);a.Ni(e)}else{l=c(b,!0);if(0>l||l+12>=b.length)throw new Fb("Invalid info block length: "+l);f=d(b.subarray(16,16+l));e=f.state;f=f.buffer_infos;let r=16+l;r=r+3&-4;l=f.map(v=>{const B=r+v.offset;return b.buffer.slice(B,B+v.length)});e=Ib(e,l);a.J(e)}};function Kb(a,b,c,d,e){let f="";var h=[],g=b?"compiled":c?"jit exit":d?"unguarded register":e?"wasm size":"executed";for(let m=0;256>m;m++)for(let p=0;8>p;p++)for(const r of[!1,!0]){var k=a.Na.exports.get_opstats_buffer(b,c,d,e,m,!1,r,p);h.push({og:m,count:k,Th:r,Jh:p});k=a.Na.exports.get_opstats_buffer(b,c,d,e,m,!0,r,p);h.push({og:3840|m,count:k,Th:r,Jh:p})}a=0;b=new Set([38,46,54,62,100,101,102,103,240,242,243]);for(const {count:m,og:p}of h)b.has(p)||(a+=m);if(0===a)return"";c=new Uint32Array(256);
b=new Uint32Array(256);for(const {og:m,count:p}of h)3840===(m&65280)?b[m&255]+=p:c[m&255]+=p;f=f+"------------------\nTotal: "+(a+"\n");const l=1E7<a?1E3:1;d=Math.max.apply(Math,h.map(({count:m})=>Math.round(m/l)));d=String(d).length;f+=`Instruction counts ${g} (in ${l}):\n`;for(e=0;256>e;e++)f+=e.toString(16).padStart(2,"0")+":"+ba(Math.round(c[e]/l),d),f=15===e%16?f+"\n":f+" ";f=f+"\n"+`Instruction counts ${g} (0f, in ${l}):\n`;for(g=0;256>g;g++)f+=(g&255).toString(16).padStart(2,"0")+":"+ba(Math.round(b[g]/
l),d),f=15===g%16?f+"\n":f+" ";f+="\n";h=h.filter(({count:m})=>m).sort(({count:m},{count:p})=>p-m);for(const {og:m,Th:p,Jh:r,count:v}of h.slice(0,200))f+=m.toString(16)+"_"+r+(p?"_m":"_r")+":"+(v/a*100).toFixed(2)+" ";return f+"\n"};function Lb(a){this.s=a;this.ge=0;this.ha=new Uint8Array(128);this.K=this.h=Date.now();this.o=this.j=0;this.B=!1;this.D=.9765625;this.l=38;this.g=2;this.Sg=this.i=0;this.F=!1;this.A=0;u(a.C,112,this,function(b){this.ge=b&127;this.Sg=b>>7});u(a.C,113,this,this.ij);x(a.C,113,this,this.hj)}n=Lb.prototype;
n.ja=function(){var a=[];a[0]=this.ge;a[1]=this.ha;a[2]=this.h;a[3]=this.K;a[4]=this.j;a[5]=this.o;a[6]=this.B;a[7]=this.D;a[8]=this.l;a[9]=this.g;a[10]=this.i;a[11]=this.Sg;a[12]=this.F;a[13]=this.A;return a};n.J=function(a){this.ge=a[0];this.ha=a[1];this.h=a[2];this.K=a[3];this.j=a[4];this.o=a[5];this.B=a[6];this.D=a[7];this.l=a[8];this.g=a[9];this.i=a[10];this.Sg=a[11];this.F=a[12]||!1;this.A=a[13]||0};
n.Jc=function(a){a=Date.now();this.h+=a-this.K;this.K=a;this.B&&this.j<a?(this.s.Wa(8),this.i|=192,this.j+=this.D*Math.ceil((a-this.j)/this.D)):this.o&&this.o<a?(this.s.Wa(8),this.i|=160,this.o=0):this.F&&this.A<a&&(this.s.Wa(8),this.i|=144,this.A=a+1E3);let b=100;this.B&&this.j&&(b=Math.min(b,Math.max(0,this.j-a)));this.o&&(b=Math.min(b,Math.max(0,this.o-a)));this.F&&(b=Math.min(b,Math.max(0,this.A-a)));return b};
function Mb(a,b){if(a.g&4)a=b;else{a=b;for(var c=b=0,d;a;)d=a%10,c|=d<<4*b,b++,a=(a-d)/10;a=c}return a}function Nb(a,b){var c;a.g&4?c=b:c=(b&15)+10*(b>>4&15);return c}
n.hj=function(){switch(this.ge){case 0:return Mb(this,(new Date(this.h)).getUTCSeconds());case 2:return Mb(this,(new Date(this.h)).getUTCMinutes());case 4:return Mb(this,(new Date(this.h)).getUTCHours());case 6:return Mb(this,(new Date(this.h)).getUTCDay()+1);case 7:return Mb(this,(new Date(this.h)).getUTCDate());case 8:return Mb(this,(new Date(this.h)).getUTCMonth()+1);case 9:return Mb(this,(new Date(this.h)).getUTCFullYear()%100);case 10:return 999<=Ob()%1E3?this.l|128:this.l;case 11:return this.g;
case 12:Eb(this.s,8);var a=this.i;this.i&=-241;return a;case 13:return 0;case 50:case 55:return Mb(this,(new Date(this.h)).getUTCFullYear()/100|0);default:return this.ha[this.ge]}};
n.ij=function(a){switch(this.ge){case 10:this.l=a&127;this.D=1E3/(32768>>(this.l&15)-1);break;case 11:this.g=a;this.g&128&&(this.g&=239);this.g&64&&(this.j=Date.now());if(this.g&32){a=new Date;const b=Nb(this,this.ha[1]),c=Nb(this,this.ha[3]),d=Nb(this,this.ha[5]);this.o=+new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),d,c,b))}this.g&16&&(this.A=Date.now());break;case 1:case 3:case 5:this.ha[this.ge]=a}this.F=16===(this.g&16)&&0<(this.l&15);this.B=64===(this.g&64)&&0<(this.l&15)};function Pb(a,b){this.s=a;this.v=b;this.i=new Float64Array(3);this.j=new Uint16Array(3);this.g=new Uint8Array(4);this.h=new Uint8Array(4);this.ie=new Uint8Array(4);this.A=new Uint8Array(4);this.l=new Uint8Array(4);this.o=new Uint16Array(3);this.Yb=new Uint16Array(3);x(a.C,97,this,function(){var c=Ob(),d=66.66666666666667*c&1;c=Qb(this,2,c);return d<<4|c<<5});u(a.C,97,this,function(c){c&1?this.v.send("pcspeaker-enable"):this.v.send("pcspeaker-disable")});x(a.C,64,this,function(){return Rb(this,0)});
x(a.C,65,this,function(){return Rb(this,1)});x(a.C,66,this,function(){return Rb(this,2)});u(a.C,64,this,function(c){Sb(this,0,c)});u(a.C,65,this,function(c){Sb(this,1,c)});u(a.C,66,this,function(c){Sb(this,2,c);this.v.send("pcspeaker-update",[this.ie[2],this.Yb[2]])});u(a.C,67,this,this.B)}Pb.prototype.ja=function(){var a=[];a[0]=this.g;a[1]=this.h;a[2]=this.ie;a[3]=this.A;a[4]=this.l;a[5]=this.o;a[6]=this.Yb;a[7]=this.i;a[8]=this.j;return a};
Pb.prototype.J=function(a){this.g=a[0];this.h=a[1];this.ie=a[2];this.A=a[3];this.l=a[4];this.o=a[5];this.Yb=a[6];this.i=a[7];this.j=a[8]};Pb.prototype.Jc=function(a,b){var c=100;b||(this.h[0]&&Qb(this,0,a)?(this.j[0]=Tb(this,0,a),this.i[0]=a,Eb(this.s,0),this.s.Wa(0),0===this.ie[0]&&(this.h[0]=0)):Eb(this.s,0),this.h[0]&&(c=(this.j[0]-Math.floor(1193.1816666*(a-this.i[0])))/1193.1816666));return c};
function Tb(a,b,c){if(!a.h[b])return 0;c=a.j[b]-Math.floor(1193.1816666*(c-a.i[b]));a=a.Yb[b];c>=a?c%=a:0>c&&(c=c%a+a);return c}function Qb(a,b,c){c-=a.i[b];return 0>c?!0:a.j[b]<Math.floor(1193.1816666*c)}function Rb(a,b){var c=a.l[b];if(c)return a.l[b]--,2===c?a.o[b]&255:a.o[b]>>8;c=a.g[b];3===a.ie[b]&&(a.g[b]^=1);a=Tb(a,b,Ob());return c?a&255:a>>8}
function Sb(a,b,c){a.Yb[b]=a.g[b]?a.Yb[b]&-256|c:a.Yb[b]&255|c<<8;3===a.A[b]&&a.g[b]||(a.Yb[b]||(a.Yb[b]=65535),a.j[b]=a.Yb[b],a.h[b]=!0,a.i[b]=Ob());3===a.A[b]&&(a.g[b]^=1)}Pb.prototype.B=function(a){var b=a>>1&7,c=a>>6&3;a=a>>4&3;3!==c&&(0===a?(this.l[c]=2,b=Tb(this,c,Ob()),this.o[c]=b?b-1:0):(6<=b&&(b&=-5),this.g[c]=1===a?1:2===a?0:1,0===c&&Eb(this.s,0),this.ie[c]=b,this.A[c]=a,2===c&&this.v.send("pcspeaker-update",[this.ie[2],this.Yb[2]])))};function Ub(a){if("undefined"!==typeof window)if(window.AudioContext||window.webkitAudioContext){var b=window.AudioWorklet?Vb:Wb;this.v=a;this.ca=window.AudioContext?new AudioContext:new webkitAudioContext;this.lg=new Xb(a,this.ca);this.h=new Yb(a,this.ca,this.lg);this.g=new b(a,this.ca,this.lg);this.h.start();a.register("emulator-stopped",function(){this.ca.suspend()},this);a.register("emulator-started",function(){this.ca.resume()},this);a.register("speaker-confirm-initialized",function(){a.send("speaker-has-initialized")},
this);a.send("speaker-has-initialized")}else console.warn("Web browser doesn't support Web Audio API")}Ub.prototype.ya=function(){this.ca&&this.ca.close();this.ca=null;this.g&&this.g.Dc&&this.g.Dc.port.close();this.g=null};
function Xb(a,b){function c(d){return function(e){d.gain.setValueAtTime(e,this.ca.currentTime)}}this.ca=b;this.sources=new Map;this.Nh=this.Mh=this.F=this.D=this.A=1;this.i=this.ca.createBiquadFilter();this.j=this.ca.createBiquadFilter();this.i.type="highshelf";this.j.type="highshelf";this.i.frequency.setValueAtTime(2E3,this.ca.currentTime);this.j.frequency.setValueAtTime(2E3,this.ca.currentTime);this.g=this.ca.createBiquadFilter();this.h=this.ca.createBiquadFilter();this.g.type="lowshelf";this.h.type=
"lowshelf";this.g.frequency.setValueAtTime(200,this.ca.currentTime);this.h.frequency.setValueAtTime(200,this.ca.currentTime);this.l=this.ca.createGain();this.o=this.ca.createGain();this.B=this.ca.createChannelMerger(2);this.K=this.i;this.N=this.j;this.i.connect(this.g);this.g.connect(this.l);this.l.connect(this.B,0,0);this.j.connect(this.h);this.h.connect(this.o);this.o.connect(this.B,0,1);this.B.connect(this.ca.destination);a.register("mixer-connect",function(d){var e=d[1];d=this.sources.get(d[0]);
void 0===d||d.connect(e)},this);a.register("mixer-disconnect",function(d){var e=d[1];d=this.sources.get(d[0]);void 0===d||d.disconnect(e)},this);a.register("mixer-volume",function(d){var e=d[0],f=d[1];d=Math.pow(10,d[2]/20);e=0===e?this:this.sources.get(e);void 0===e||e.vg(d,f)},this);a.register("mixer-gain-left",function(d){this.Mh=Math.pow(10,d/20);this.update()},this);a.register("mixer-gain-right",function(d){this.Nh=Math.pow(10,d/20);this.update()},this);a.register("mixer-treble-left",c(this.i),
this);a.register("mixer-treble-right",c(this.j),this);a.register("mixer-bass-left",c(this.g),this);a.register("mixer-bass-right",c(this.h),this)}function Zb(a,b,c){b=new $b(a.ca,b,a.K,a.N);a.sources.has(c);a.sources.set(c,b);return b}Xb.prototype.vg=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.D=a;break;case 1:this.F=a;break;case 2:this.A=a;break;default:return}this.update()};
Xb.prototype.update=function(){var a=this.A*this.F*this.Nh;this.l.gain.setValueAtTime(this.A*this.D*this.Mh,this.ca.currentTime);this.o.gain.setValueAtTime(a,this.ca.currentTime)};function $b(a,b,c,d){this.ca=a;this.o=this.l=!0;this.D=this.B=this.j=this.g=1;this.A=a.createChannelSplitter(2);this.h=a.createGain();this.i=a.createGain();b.connect(this.A);this.A.connect(this.h,0);this.h.connect(c);this.A.connect(this.i,1);this.i.connect(d)}
$b.prototype.update=function(){var a=this.o*this.g*this.j*this.D;this.h.gain.setValueAtTime(this.l*this.g*this.j*this.B,this.ca.currentTime);this.i.gain.setValueAtTime(a,this.ca.currentTime)};$b.prototype.connect=function(a){var b=!a||2===a;if(b||0===a)this.l=!0;if(b||1===a)this.o=!0;this.update()};$b.prototype.disconnect=function(a){var b=!a||2===a;if(b||0===a)this.l=!1;if(b||1===a)this.o=!1;this.update()};
$b.prototype.vg=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.B=a;break;case 1:this.D=a;break;case 2:this.j=a;break;default:return}this.update()};
function Yb(a,b,c){this.We=b.createOscillator();this.We.type="square";this.We.frequency.setValueAtTime(440,b.currentTime);this.g=Zb(c,this.We,1);this.g.disconnect();a.register("pcspeaker-enable",function(){var d=c.sources.get(1);void 0===d||d.connect(void 0)},this);a.register("pcspeaker-disable",function(){var d=c.sources.get(1);void 0===d||d.disconnect(void 0)},this);a.register("pcspeaker-update",function(d){var e=d[1],f=0;3===d[0]&&(f=Math.min(1193181.6665999999/e,this.We.frequency.maxValue),f=
Math.max(f,0));this.We.frequency.setValueAtTime(f,b.currentTime)},this)}Yb.prototype.start=function(){this.We.start()};
function Vb(a,b,c){this.v=a;this.ca=b;this.enabled=!1;this.wb=48E3;b=function(){function e(g){if(0===g)return 1;g*=Math.PI;return Math.sin(g)/g}function f(){var g=Reflect.construct(AudioWorkletProcessor,[],f);g.D=3;g.l=Array(1024);g.A=0;g.K=0;g.o=0;g.F=g.l.length;g.B=0;g.N=h;g.g=h;g.T=1;g.j=0;g.i=0;g.h=0;g.port.onmessage=k=>{switch(k.data.type){case "queue":g.da(k.data.value);break;case "sampling-rate":g.T=k.data.value/sampleRate}};return g}var h=[new Float32Array(256),new Float32Array(256)];Reflect.setPrototypeOf(f.prototype,
AudioWorkletProcessor.prototype);Reflect.setPrototypeOf(f,AudioWorkletProcessor);f.prototype.process=f.prototype.process=function(g,k){for(g=0;g<k[0][0].length;g++){for(var l=0,m=0,p=this.h+this.D,r=this.h-this.D+1;r<=p;r++){var v=this.j+r;l+=this.U(v,0)*this.X(this.i-r);m+=this.U(v,1)*this.X(this.i-r)}if(isNaN(l)||isNaN(m))l=m=0;k[0][0][g]=l;k[0][1][g]=m;this.i+=this.T;this.h=Math.floor(this.i)}k=this.h;k+=this.D+2;this.i-=this.h;this.j+=this.h;this.h=0;this.aa(k);return!0};f.prototype.X=function(g){return e(g)*
e(g/this.D)};f.prototype.U=function(g,k){return 0>g?(g+=this.N[0].length,this.N[k][g]):this.g[k][g]};f.prototype.aa=function(g){var k=this.g[0].length;k-this.j<g&&(this.ba(),this.j-=k)};f.prototype.ba=function(){this.N=this.g;this.g=this.Z();var g=this.g[0].length;if(256>g){for(var k=this.A,l=0;256>g&&l<this.o;)g+=this.l[k][0].length,k=k+1&this.F-1,l++;g=Math.max(g,256);g=[new Float32Array(g),new Float32Array(g)];g[0].set(this.g[0]);g[1].set(this.g[1]);k=this.g[0].length;for(var m=0;m<l;m++){var p=
this.Z();g[0].set(p[0],k);g[1].set(p[1],k);k+=p[0].length}this.g=g}this.rb()};f.prototype.rb=function(){1024>this.B/this.T&&this.port.postMessage({type:"pump"})};f.prototype.da=function(g){this.o<this.F&&(this.l[this.K]=g,this.K=this.K+1&this.F-1,this.o++,this.B+=g[0].length,this.rb())};f.prototype.Z=function(){if(!this.o)return h;var g=this.l[this.A];this.l[this.A]=null;this.A=this.A+1&this.F-1;this.o--;this.B-=g[0].length;return g};registerProcessor("dac-processor",f)}.toString();var d=URL.createObjectURL(new Blob([b.substring(b.indexOf("{")+
1,b.lastIndexOf("}"))],{type:"application/javascript"}));this.Dc=null;this.g=this.ca.createGain();this.ca.audioWorklet.addModule(d).then(()=>{URL.revokeObjectURL(d);this.Dc=new AudioWorkletNode(this.ca,"dac-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],parameterData:{},processorOptions:{}});this.Dc.port.postMessage({type:"sampling-rate",value:this.wb});this.Dc.port.onmessage=e=>{switch(e.data.type){case "pump":this.rb()}};this.Dc.connect(this.g)});this.h=Zb(c,this.g,2);this.h.g=
3;a.register("dac-send-data",function(e){this.Zg(e)},this);a.register("dac-enable",function(){this.enabled=!0},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(e){this.wb=e;this.Dc&&this.Dc.port.postMessage({type:"sampling-rate",value:e})},this)}Vb.prototype.Zg=function(a){this.Dc&&this.Dc.port.postMessage({type:"queue",value:a},[a[0].buffer,a[1].buffer])};Vb.prototype.rb=function(){this.enabled&&this.v.send("dac-request-data")};
function Wb(a,b,c){this.v=a;this.ca=b;this.enabled=!1;this.wb=22050;this.g=0;this.Ff=1;this.ng=this.ca.createBiquadFilter();this.ng.type="lowpass";this.i=this.ng;this.h=Zb(c,this.i,2);this.h.g=3;a.register("dac-send-data",function(d){this.Zg(d)},this);a.register("dac-enable",function(){this.enabled=!0;this.rb()},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(d){this.wb=d;this.Ff=Math.ceil(8E3/d);this.ng.frequency.setValueAtTime(d/2,this.ca.currentTime)},
this)}
Wb.prototype.Zg=function(a){var b=a[0].length,c=b/this.wb;if(1<this.Ff){var d=this.ca.createBuffer(2,b*this.Ff,this.wb*this.Ff);for(var e=d.getChannelData(0),f=d.getChannelData(1),h=0,g=0;g<b;g++)for(var k=0;k<this.Ff;k++,h++)e[h]=a[0][g],f[h]=a[1][g]}else d=this.ca.createBuffer(2,b,this.wb),d.copyToChannel?(d.copyToChannel(a[0],0),d.copyToChannel(a[1],1)):(d.getChannelData(0).set(a[0]),d.getChannelData(1).set(a[1]));a=this.ca.createBufferSource();a.buffer=d;a.connect(this.ng);a.addEventListener("ended",this.rb.bind(this));
d=this.ca.currentTime;if(this.g<d)for(this.g=d,d=.2-c,b=0;b<=d;)b+=c,this.g+=c,setTimeout(()=>this.rb(),1E3*b);a.start(this.g);this.g+=c;setTimeout(()=>this.rb(),0)};Wb.prototype.rb=function(){this.enabled&&(.2<this.g-this.ca.currentTime||this.v.send("dac-request-data"))};function ac(a,b){this.v=b;this.g=void 0;this.id=0;this.h=[];this.url=a;this.j=Date.now()-1E4;this.i=!1;this.v.register("net"+this.id+"-send",function(c){this.send(c)},this)}n=ac.prototype;n.Jj=function(a){this.v&&this.v.send("net"+this.id+"-receive",new Uint8Array(a.data))};n.Hj=function(){this.i||(this.connect(),setTimeout(this.connect.bind(this),1E4))};n.Kj=function(){for(var a=0;a<this.h.length;a++)this.send(this.h[a]);this.h=[]};n.Ij=function(){};n.ya=function(){this.i=!0;this.g&&this.g.close()};
n.connect=function(){if("undefined"!==typeof WebSocket){if(this.g){var a=this.g.readyState;if(0===a||1===a)return}if(!(this.j+1E4>Date.now())){this.j=Date.now();try{this.g=new WebSocket(this.url)}catch(b){console.error(b);return}this.g.binaryType="arraybuffer";this.g.onopen=this.Kj.bind(this);this.g.onmessage=this.Jj.bind(this);this.g.onclose=this.Hj.bind(this);this.g.onerror=this.Ij.bind(this)}}};
n.send=function(a){this.g&&1===this.g.readyState?this.g.send(a):(this.h.push(a),128<this.h.length&&(this.h=this.h.slice(-64)),this.connect())};const bc=(new Date("1970-01-01T00:00:00Z")).getTime()-(new Date("1900-01-01T00:00:00Z")).getTime(),cc=Math.pow(2,32),dc=[118,56,54];function ec(a){return[0,1,2,3,4,5].map(b=>a[b].toString(16)).map(b=>1===b.length?"0"+b:b).join(":")}function fc(a){return a[0]<<24|a[1]<<16|a[2]<<8|a[3]}function gc(a,b){const c=Math.min(a.length,b.length);if(c){const f=a.buffer;var d=f.length,e=a.g+c;e>d?(e%=d,d-=a.g,b.set(f.subarray(a.g)),b.set(f.subarray(0,e),d)):b.set(f.subarray(a.g,e))}return c}
class hc{constructor(){var a=Math.min(2048,16);this.length=this.head=this.g=0;this.buffer=new Uint8Array(a)}write(a){const b=a.length;var c=this.length+b;let d=this.buffer.length;if(d<c){for(;d<c;)d*=2;c=new Uint8Array(d);gc(this,c);this.g=0;this.head=this.length;this.buffer=c}c=this.buffer;const e=this.head+b;if(e>d){const f=d-this.head;c.set(a.subarray(0,f),this.head);c.set(a.subarray(f))}else c.set(a,this.head);this.head=e%d;this.length+=b}remove(a){a>this.length&&(a=this.length);a&&(this.g=(this.g+
a)%this.buffer.length,this.length-=a);return a}}function ic(){const a=new Uint8Array(1518),b=a.buffer,c=a.byteOffset;return{Te:a,Ej:new DataView(b),Gh:new DataView(b,c+14,1500),Ng:new DataView(b,c+34,1480),Ag:new DataView(b,c+42,1472),Hi:new TextEncoder}}function jc(a,b,c,d){d.Te.set(b,c.byteOffset+a);return b.length}function kc(a,b,c,d){const e=c.byteOffset+(a&-2);d=d.Te;for(c=c.byteOffset;c<e;c+=2)b+=d[c]<<8|d[c+1];for(a&1&&(b+=d[e]<<8);b>>>16;)b=(b&65535)+(b>>>16);return~b&65535}
function lc(a,b){a.Te.fill(0);var c=a.Te,d=c.subarray,e=a.Ej;jc(0,b.Ha.ia,e,a);jc(6,b.Ha.src,e,a);e.setUint16(12,b.Ha.uc);e=14;if(b.Va){var f=a.Gh;f.setUint16(0,b.Va.xf);f.setUint16(2,b.Va.Yg);f.setUint8(4,b.Va.hh.length);f.setUint8(5,b.Va.xg.length);f.setUint16(6,b.Va.Ug);jc(8,b.Va.hh,f,a);jc(14,b.Va.xg,f,a);jc(18,b.Va.Ii,f,a);jc(24,b.Va.Nf,f,a);e+=28}else if(b.Y){f=a.Gh;var h=20;if(b.Tc){var g=a.Ng;g.setUint8(0,b.Tc.type);g.setUint8(1,b.Tc.code);g.setUint16(2,0);var k=4+jc(4,b.Tc.data,g,a);g.setUint16(2,
kc(k,0,g,a));h+=k}else if(b.$a){g=a.Ng;var l=8;if(b.za){k=l;var m=a.Ag;m.setUint8(0,b.za.Xe);m.setUint8(1,b.za.xf);m.setUint8(2,b.za.Rh);m.setUint8(3,b.za.Sh);m.setUint32(4,b.za.qh);m.setUint16(8,b.za.Ci);m.setUint16(10,b.za.flags);m.setUint32(12,b.za.yh);m.setUint32(16,b.za.Li);m.setUint32(20,b.za.Fi);m.setUint32(24,b.za.Ph);jc(28,b.za.Ig,m,a);m.setUint32(236,1669485411);l=240;for(var p of b.za.options)l+=jc(l,p,m,a);k+=l}else if(b.ib){p=l;l=a.Ag;l.setUint16(0,b.ib.id);l.setUint16(2,b.ib.flags);
l.setUint16(4,b.ib.Fd.length);l.setUint16(6,b.ib.gf.length);let B=12;for(var r=0;r<b.ib.Fd.length;++r){var v=b.ib.Fd[r];for(m of v.name){const C=a.Hi.encodeInto(m,a.Te.subarray(l.byteOffset+(B+1))).written;l.setUint8(B,C);B+=1+C}l.setUint16(B,v.type);B+=2;l.setUint16(B,v.fe);B+=2}for(r=0;r<b.ib.gf.length;++r){m=b.ib.gf[r];for(k of m.name)v=a.Hi.encodeInto(k,a.Te.subarray(l.byteOffset+(B+1))).written,l.setUint8(B,v),B+=1+v;l.setUint16(B,m.type);B+=2;l.setUint16(B,m.fe);B+=2;l.setUint32(B,m.zg);B+=
4;l.setUint16(B,m.data.length);B+=2;B+=jc(B,m.data,l,a)}k=p+B}else b.pa?(k=l,m=a.Ag,m.setUint8(0,b.pa.flags),m.setUint8(1,b.pa.Gi),m.setUint8(2,b.pa.fi),m.setUint8(3,b.pa.precision),m.setUint32(4,b.pa.nl),m.setUint32(8,b.pa.ol),m.setUint32(12,b.pa.kl),m.setUint32(16,b.pa.ml),m.setUint32(20,b.pa.ll),m.setUint32(24,b.pa.Zh),m.setUint32(28,b.pa.Yh),m.setUint32(32,b.pa.Ai),m.setUint32(36,b.pa.zi),m.setUint32(40,b.pa.kh),m.setUint32(44,b.pa.jh),k+=48):k=l+jc(0,b.$a.data,a.Ag,a);l=k;g.setUint16(0,b.$a.ua);
g.setUint16(2,b.$a.qa);g.setUint16(4,l);g.setUint16(6,0);g.setUint16(6,kc(l,(b.Y.src[0]<<8|b.Y.src[1])+(b.Y.src[2]<<8|b.Y.src[3])+(b.Y.ia[0]<<8|b.Y.ia[1])+(b.Y.ia[2]<<8|b.Y.ia[3])+17+l,g,a));h+=l}else b.S&&(g=a.Ng,k=0,m=b.S,m.Ve&&(k|=1),m.Id&&(k|=2),m.Ce&&(k|=4),m.xi&&(k|=8),m.Ea&&(k|=16),m.wl&&(k|=32),m.zj&&(k|=64),m.lj&&(k|=128),g.setUint16(0,m.ua),g.setUint16(2,m.qa),g.setUint32(4,m.hb),g.setUint32(8,m.Wb),g.setUint8(12,80),g.setUint8(13,k),g.setUint16(14,m.xb),g.setUint16(16,0),g.setUint16(18,
m.xl||0),k=20,b.Ze&&(k+=jc(20,b.Ze,g,a)),g.setUint16(16,kc(k,(b.Y.src[0]<<8|b.Y.src[1])+(b.Y.src[2]<<8|b.Y.src[3])+(b.Y.ia[0]<<8|b.Y.ia[1])+(b.Y.ia[2]<<8|b.Y.ia[3])+6+k,g,a)),h+=k);f.setUint8(0,69);f.setUint8(1,b.Y.vl||0);f.setUint16(2,h);f.setUint16(4,b.Y.id||0);f.setUint8(6,64);f.setUint8(8,b.Y.zg||32);f.setUint8(9,b.Y.fd);f.setUint16(10,0);jc(12,b.Y.src,f,a);jc(16,b.Y.ia,f,a);f.setUint16(10,kc(20,0,f,a));e+=h}return d.call(c,0,e)}
function mc(a,b){fetch(`https://${b.bg||"cloudflare-dns.com"}/dns-query`,{method:"POST",headers:[["content-type","application/dns-message"]],body:a.$a.data}).then(async c=>{c={Ha:{uc:2048,src:b.sb,ia:a.Ha.src},Y:{fd:17,src:b.lb,ia:a.Y.src},$a:{ua:53,qa:a.$a.ua,data:new Uint8Array(await c.arrayBuffer())}};b.Ga(lc(b.Ka,c))})}
function nc(a,b){let c={};c.Ha={uc:2048,src:b.sb,ia:a.Ha.src};c.Y={fd:17,src:b.lb,ia:b.He};c.$a={ua:67,qa:68};c.za={xf:1,Rh:6,Sh:0,qh:a.za.qh,Ci:0,flags:0,yh:0,Li:fc(b.He),Fi:fc(b.lb),Ph:fc(b.lb),Ig:a.za.Ig};let d=[],e=a.za.options.find(function(f){return 53===f[0]});e&&3===e[2]&&(a.za.Xe=3);1===a.za.Xe&&(c.za.Xe=2,d.push(new Uint8Array([53,1,2])));3===a.za.Xe&&(c.za.Xe=2,d.push(new Uint8Array([53,1,5])),d.push(new Uint8Array([51,4,8,0,0,0])));a=[b.lb[0],b.lb[1],b.lb[2],b.lb[3]];d.push(new Uint8Array([1,
4,255,255,255,0]));b.qe&&(d.push(new Uint8Array([3,4].concat(a))),d.push(new Uint8Array([6,4].concat(a))));d.push(new Uint8Array([54,4].concat(a)));d.push(new Uint8Array([60,3].concat(dc)));d.push(new Uint8Array([255,0]));c.za.options=d;b.Ga(lc(b.Ka,c))}
function oc(a,b){let c={};var d=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(12),e={uc:d,ia:a.subarray(0,6),Jl:ec(a.subarray(0,6)),src:a.subarray(6,12),Yl:ec(a.subarray(6,12))};c.Ha=e;a=a.subarray(14,a.length);if(2048===d){var f=new DataView(a.buffer,a.byteOffset,a.byteLength);e=a[0]>>4&15;var h=a[0]&15,g=f.getUint8(1),k=f.getUint16(2);let l=f.getUint8(8);d=f.getUint8(9);f=f.getUint16(10);c.Y={version:e,Pl:h,vl:g,Zc:k,zg:l,fd:d,Ql:f,src:a.subarray(12,16),ia:a.subarray(16,20)};e=a.subarray(4*
h,k);if(1===d)a=new DataView(e.buffer,e.byteOffset,e.byteLength),a={type:a.getUint8(0),code:a.getUint8(1),xh:a.getUint16(2),data:e.subarray(4)},c.Tc=a;else if(6===d)d=new DataView(e.buffer,e.byteOffset,e.byteLength),a={ua:d.getUint16(0),qa:d.getUint16(2),hb:d.getUint32(4),Wb:d.getUint32(8),yj:d.getUint8(12)>>4,xb:d.getUint16(14),xh:d.getUint16(16),xl:d.getUint16(18)},d=d.getUint8(13),a.Ve=!!(d&1),a.Id=!!(d&2),a.Ce=!!(d&4),a.xi=!!(d&8),a.Ea=!!(d&16),a.wl=!!(d&32),a.zj=!!(d&64),a.lj=!!(d&128),c.S=a,
c.Ze=e.subarray(4*a.yj);else if(17===d){a=new DataView(e.buffer,e.byteOffset,e.byteLength);a={ua:a.getUint16(0),qa:a.getUint16(2),Zc:a.getUint16(4),xh:a.getUint16(6),data:e.subarray(8),pj:(new TextDecoder).decode(e.subarray(8))};if(67===a.qa||67===a.ua){e=e.subarray(8);d=new DataView(e.buffer,e.byteOffset,e.byteLength);d={Xe:d.getUint8(0),xf:d.getUint8(1),Rh:d.getUint8(2),Sh:d.getUint8(3),qh:d.getUint32(4),Ci:d.getUint16(8),flags:d.getUint16(10),yh:d.getUint32(12),Li:d.getUint32(16),Fi:d.getUint32(20),
Ph:d.getUint32(24),Ig:e.subarray(28,44),Vh:d.getUint32(236),options:[]};e=e.subarray(240);for(h=0;h<e.length;++h)g=h,0!==e[h]&&(++h,k=e[h],h+=k,d.options.push(e.subarray(g,g+k+2)));c.za=d;c.Kl=d.options}else 53===a.qa||53===a.ua?rc(e.subarray(8),c):123===a.qa&&(d=e.subarray(8),d=new DataView(d.buffer,d.byteOffset,d.byteLength),c.pa={flags:d.getUint8(0),Gi:d.getUint8(1),fi:d.getUint8(2),precision:d.getUint8(3),nl:d.getUint32(4),ol:d.getUint32(8),kl:d.getUint32(12),ml:d.getUint32(16),ll:d.getUint32(20),
Zh:d.getUint32(24),Yh:d.getUint32(28),Ai:d.getUint32(32),zi:d.getUint32(36),kh:d.getUint32(40),jh:d.getUint32(44)});c.$a=a}}else 2054===d&&(d=new DataView(a.buffer,a.byteOffset,a.byteLength),a={xf:d.getUint16(0),Yg:d.getUint16(2),Ug:d.getUint16(6),hh:a.subarray(8,14),xg:a.subarray(14,18),Ii:a.subarray(18,24),Nf:a.subarray(24,28)},c.Va=a);if(c.Y)if(c.S){if(a=`${c.Y.src.join(".")}:${c.S.ua}:${c.Y.ia.join(".")}:${c.S.qa}`,!c.S.Id||!b.Xh(c,a))if(b.Ic[a])b.Ic[a].process(c);else{a=c.S.Wb;if(c.S.Ve||c.S.Id)a+=
1;d={};d.Ha={uc:2048,src:b.sb,ia:c.Ha.src};d.Y={fd:6,src:c.Y.ia,ia:c.Y.src};d.S={ua:c.S.qa,qa:c.S.ua,hb:a,Wb:c.S.hb+(c.S.Id?1:0),xb:c.S.xb,Ce:!0,Ea:c.S.Id};b.Ga(lc(b.Ka,d))}}else if(c.$a)if(c.ib)if("static"===b.ag){a={};a.Ha={uc:2048,src:b.sb,ia:c.Ha.src};a.Y={fd:17,src:b.lb,ia:c.Y.src};a.$a={ua:53,qa:c.$a.ua};d=[];for(e=0;e<c.ib.Fd.length;++e)switch(h=c.ib.Fd[e],h.type){case 1:d.push({name:h.name,type:h.type,fe:h.fe,zg:600,data:[192,168,87,1]})}a.ib={id:c.ib.id,flags:33152,Fd:c.ib.Fd,gf:d};b.Ga(lc(b.Ka,
a))}else mc(c,b);else c.za?nc(c,b):c.pa?(a=Date.now()+bc,d=a%1E3/1E3*cc,e={},e.Ha={uc:2048,src:b.sb,ia:c.Ha.src},e.Y={fd:17,src:c.Y.ia,ia:c.Y.src},e.$a={ua:123,qa:c.$a.ua},e.pa=Object.assign({},c.pa),e.pa.flags=36,e.pa.fi=10,e.pa.Zh=c.pa.kh,e.pa.Yh=c.pa.jh,e.pa.Ai=a/1E3,e.pa.zi=d,e.pa.kh=a/1E3,e.pa.jh=d,e.pa.Gi=2,b.Ga(lc(b.Ka,e))):8===c.$a.qa&&(a={},a.Ha={uc:2048,src:b.sb,ia:c.Ha.src},a.Y={fd:17,src:c.Y.ia,ia:c.Y.src},a.$a={ua:c.$a.qa,qa:c.$a.ua,data:(new TextEncoder).encode(c.$a.pj)},b.Ga(lc(b.Ka,
a)));else c.Tc&&8===c.Tc.type&&(a={},a.Ha={uc:2048,src:b.sb,ia:c.Ha.src},a.Y={fd:1,src:c.Y.ia,ia:c.Y.src},a.Tc={type:0,code:c.Tc.code,data:c.Tc.data},b.Ga(lc(b.Ka,a)));else c.Va&&1===c.Va.Ug&&2048===c.Va.Yg&&(a=fc(c.Va.Nf)&4294967040,d=fc(b.lb)&4294967040,!b.qe&&a!==d||a===d&&99<c.Va.Nf[3]||(a={},a.Ha={uc:2054,src:b.sb,ia:c.Ha.src},a.Va={xf:1,Yg:2048,Ug:2,hh:b.sb,xg:c.Va.Nf,Ii:c.Ha.src,Nf:c.Va.xg},b.Ga(lc(b.Ka,a))))}
function rc(a,b){function c(){let l=[],m;do m=d.getUint8(g),l.push((new TextDecoder).decode(a.subarray(g+1,g+1+m))),g+=m+1;while(0<m);return l}let d=new DataView(a.buffer,a.byteOffset,a.byteLength),e={id:d.getUint16(0),flags:d.getUint16(2),Fd:[],gf:[]};var f=d.getUint16(4);let h=d.getUint16(6);d.getUint16(8);d.getUint16(10);let g=12;for(var k=0;k<f;k++)e.Fd.push({name:c(),type:d.getInt16(g),fe:d.getInt16(g+2)}),g+=4;for(f=0;f<h;f++){k={name:c(),type:d.getInt16(g),fe:d.getUint16(g+2),zg:d.getUint32(g+
4)};g+=8;let l=d.getUint16(g);g+=2;k.data=a.subarray(g,g+l);g+=l;e.gf.push(k)}b.ib=e}function sc(){this.state="closed";this.ga=null;this.De=new hc;this.F=new Uint8Array(1460);this.i=this.hg=!1;this.l=void 0;this.j={}}function tc(a,b){a.j.data=b}function uc(a,b,...c){a.j[b]&&a.j[b].apply(a,c)}function vc(a){let b={};b.Ha={uc:2048,src:a.A,ia:a.o};b.Y={fd:6,src:a.D,ia:a.B};b.S={ua:a.ua,qa:a.qa,xb:a.xb,Wb:a.Ea,hb:a.hb,Ea:!0};return b}
function wc(a,b,c){b={ua:b.S.qa,qa:b.S.ua,xb:b.S.xb,Wb:a.Ea,hb:a.hb};if(c)for(const d in c)b[d]=c[d];a=vc(a);a.S=b;return a}n=sc.prototype;n.connect=function(){this.hb=1338;this.Ea=1;this.xb=64240;this.state="syn-sent";let a=vc(this);a.Y.id=2345;a.S={ua:this.ua,qa:this.qa,hb:1337,Wb:0,xb:0,Id:!0};this.ga.Ga(lc(this.ga.Ka,a))};
n.accept=function(a){this.hb=1338;this.Ea=a.S.hb+1;this.A=this.ga.sb;this.D=a.Y.ia;this.ua=a.S.qa;this.o=a.Ha.src;this.qa=a.S.ua;this.B=a.Y.src;this.xb=a.S.xb;let b=vc(this);b.S={ua:this.ua,qa:this.qa,hb:1337,Wb:this.Ea,xb:a.S.xb,Id:!0,Ea:!0};this.state="established";this.ga.Ga(lc(this.ga.Ka,b))};
n.process=function(a){if("closed"===this.state)a=wc(this,a,{Ce:!0}),this.ga.Ga(lc(this.ga.Ka,a));else if(a.S.Ce)"syn-probe"===this.state?uc(this,"probe",!1):this.Cf(),xc(this);else if(a.S.Id)"syn-sent"===this.state&&a.S.Ea?(this.Ea=a.S.hb+1,this.g=a.S.Wb,this.ga.Ga(lc(this.ga.Ka,vc(this))),this.state="established",uc(this,"connect")):"syn-probe"===this.state&&a.S.Ea&&(uc(this,"probe",!0),a=wc(this,a,{Ce:!0}),this.ga.Ga(lc(this.ga.Ka,a)),xc(this));else{if(a.S.Ea)if("syn-received"===this.state)this.state=
"established";else if("fin-wait-1"===this.state)a.S.Ve||(this.state="fin-wait-2");else if("closing"===this.state||"last-ack"===this.state){xc(this);return}if(void 0===this.g)this.g=a.S.Wb;else{var b=a.S.Wb-this.g;if(0<b){if(this.g=a.S.Wb,this.De.remove(b),this.hb+=b,this.pending=!1,this.i&&!this.De.length){this.i=!1;this.state=this.l;a=vc(this);a.S.Ve=!0;this.ga.Ga(lc(this.ga.Ka,a));return}}else if(0>b){a=wc(this,a,{Ce:!0});this.ga.Ga(lc(this.ga.Ka,a));this.Cf();xc(this);return}}a.S.Ve?(++this.Ea,
b=wc(this,a,{}),"established"===this.state?(b.S.Ea=!0,this.state="close-wait",this.Wh()):"fin-wait-1"===this.state?(a.S.Ea?xc(this):this.state="closing",b.S.Ea=!0):"fin-wait-2"===this.state?(xc(this),b.S.Ea=!0):(xc(this),this.Cf(),b.S.Ce=!0),this.ga.Ga(lc(this.ga.Ka,b))):this.Ea!==a.S.hb?(a=wc(this,a,{Ea:!0}),this.ga.Ga(lc(this.ga.Ka,a))):a.S.Ea&&0<a.Ze.length&&(this.Ea+=a.Ze.length,this.ga.Ga(lc(this.ga.Ka,vc(this))),uc(this,"data",a.Ze));this.rb()}};
n.write=function(a){this.hg||this.De.write(a);this.rb()};n.close=function(){if(!this.hg){this.hg=!0;if("established"===this.state||"syn-received"===this.state)var a="fin-wait-1";else if("close-wait"===this.state)a="last-ack";else{xc(this);return}this.De.length||this.pending?(this.i=!0,this.l=a):(this.state=a,a=vc(this),a.S.Ve=!0,this.ga.Ga(lc(this.ga.Ka,a)))}this.rb()};n.Wh=function(){uc(this,"shutdown")};n.Cf=function(){uc(this,"close")};
function xc(a){a.ga.Ic[a.h]&&(a.state="closed",delete a.ga.Ic[a.h])}n.rb=function(){if(this.De.length&&!this.pending){const a=this.F,b=gc(this.De,a),c=vc(this);c.S.xi=!0;c.Ze=a.subarray(0,b);this.ga.Ga(lc(this.ga.Ka,c));this.pending=!0}};function yc(a,b){b=b||{};this.v=a;this.id=b.id||0;this.sb=new Uint8Array((b.sb||"52:54:0:1:2:3").split(":").map(function(c){return parseInt(c,16)}));this.lb=new Uint8Array((b.lb||"192.168.86.1").split(".").map(function(c){return parseInt(c,10)}));this.He=new Uint8Array((b.He||"192.168.86.100").split(".").map(function(c){return parseInt(c,10)}));this.qe=void 0===b.qe||!!b.qe;this.Cg=new Uint8Array(6);this.ag=b.ag||"static";this.bg=b.bg;this.Ic={};this.Ka=ic();this.uh=(...c)=>fetch(...c);this.Mc=b.Mc;
this.v.register("net"+this.id+"-mac",function(c){this.Cg=new Uint8Array(c.split(":").map(function(d){return parseInt(d,16)}))},this);this.v.register("net"+this.id+"-send",function(c){this.send(c)},this)}n=yc.prototype;n.ya=function(){};n.Xh=function(a,b){if(80===a.S.qa){let c=new sc;c.state="syn-received";c.ga=this;tc(c,zc);c.h=b;c.accept(a);this.Ic[b]=c;return!0}return!1};
n.connect=function(a){var b=this.He.join(".");const c=this.lb.join("."),d=16383*Math.random()|0;let e,f,h=0;do e=49152+(d+h)%16383,f=`${b}:${a}:${c}:${e}`;while(16383>++h&&this.Ic[f]);if(this.Ic[f])throw Error("pool of dynamic TCP port numbers exhausted, connection aborted");b=new sc;b.h=f;b.A=this.sb;b.D=this.lb;b.ua=e;b.o=this.Cg;b.qa=a;b.B=this.He;b.ga=this;this.Ic[f]=b;b.connect();return b};
async function zc(a){this.read=this.read||"";if((this.read+=(new TextDecoder).decode(a))&&-1!==this.read.indexOf("\r\n\r\n")){a=this.read.indexOf("\r\n\r\n");var b=this.read.substring(0,a).split(/\r\n/);a=this.read.substring(a+4);this.read="";let c=b[0].split(" "),d;d=/^https?:/.test(c[1])?new URL(c[1]):new URL("http://host"+c[1]);"undefined"!==typeof window&&"http:"===d.protocol&&"https:"===window.location.protocol&&(d.protocol="https:");let e=new Headers;for(let g=1;g<b.length;++g){const k=Ac(b[g]);
if(!k){console.warn('The request contains an invalid header: "%s"',b[g]);Bc(this,400,"Bad Request",`Invalid header in request: ${b[g]}`);return}"host"===k.key.toLowerCase()?d.host=k.value:e.append(k.key,k.value)}if(!this.ga.Mc&&/^\d+\.external$/.test(d.hostname))if(b=parseInt(d.hostname.split(".")[0],10),!isNaN(b)&&0<b&&65536>b)d.protocol="http:",d.hostname="localhost",d.port=b.toString(10);else{console.warn('Unknown port for localhost: "%s"',d.href);Bc(this,400,"Bad Request",`Unknown port for localhost: ${d.href}`);
return}this.name=d.href;b={method:c[0],headers:e};-1!==["put","post"].indexOf(b.method.toLowerCase())&&(b.body=a);const f=this.ga.Mc?this.ga.Mc+encodeURIComponent(d.href):d.href;new TextEncoder;let h=!1;this.ga.uh(f,b).then(g=>{let k=new Headers(g.headers);k.delete("content-encoding");k.delete("keep-alive");k.delete("content-length");k.delete("transfer-encoding");k.set("x-was-fetch-redirected",`${!!g.redirected}`);k.set("x-fetch-resp-url",g.url);k.set("connection","close");this.write(Cc(g.status,
g.statusText,k));h=!0;if(g.body&&g.body.getReader){const l=g.body.getReader(),m=({value:p,done:r})=>{p&&this.write(p);if(r)this.close();else return l.read().then(m)};l.read().then(m)}else g.arrayBuffer().then(l=>{this.write(new Uint8Array(l));this.close()})}).catch(g=>{console.warn("Fetch Failed: "+f+"\n"+g);h||Bc(this,502,"Fetch Error",`Fetch ${f} failed:\n\n${g.stack||g.message}`);this.close()})}}
n.uh=async function(a,b){this.Mc&&(a=this.Mc+encodeURIComponent(a));try{const c=await fetch(a,b),d=await c.arrayBuffer();return[c,d]}catch(c){return console.warn("Fetch Failed: "+a+"\n"+c),[{status:502,statusText:"Fetch Error",headers:new Headers({"Content-Type":"text/plain"})},(new TextEncoder).encode(`Fetch ${a} failed:\n\n${c.stack}`).buffer]}};
function Cc(a,b,c){a=[`HTTP/1.1 ${a} ${b}`];for(const [d,e]of c.entries())a.push(`${d}: ${e}`);return(new TextEncoder).encode(a.join("\r\n")+"\r\n\r\n")}function Bc(a,b,c,d){const e=new Headers({"content-type":"text/plain","content-length":d.length.toString(10),connection:"close"});b=[Cc(b,c,e),(new TextEncoder).encode(d)];if(!a.hg)for(const f of b)a.De.write(f);a.rb();a.close()}
function Ac(a){var b=a.match(/^([^:]*):(.*)$/);if(b&&(a=b[1],b=b[2].trim(),0!==a.length&&0!==b.length&&/^[\w-]+$/.test(a)&&/^[\x20-\x7E]+$/.test(b)))return{key:a,value:b}}n.send=function(a){oc(a,this)};n.Ga=function(a){this.v.send("net"+this.id+"-receive",new Uint8Array(a))};function Dc(a,b,c){Ec(this,a);this.j=1;this.g={0:{jf:0}};this.i=[];c=c||{};this.v=b;this.id=c.id||0;this.sb=new Uint8Array((c.sb||"52:54:0:1:2:3").split(":").map(function(d){return parseInt(d,16)}));this.lb=new Uint8Array((c.lb||"192.168.86.1").split(".").map(function(d){return parseInt(d,10)}));this.He=new Uint8Array((c.He||"192.168.86.100").split(".").map(function(d){return parseInt(d,10)}));this.qe=void 0===c.qe||!!c.qe;this.Cg=new Uint8Array(6);this.ag=c.ag||"doh";this.bg=c.bg;this.Ic={};this.Ka=
ic();this.v.register("net"+this.id+"-mac",function(d){this.Cg=new Uint8Array(d.split(":").map(function(e){return parseInt(e,16)}))},this);this.v.register("net"+this.id+"-send",function(d){this.send(d)},this)}
function Ec(a,b){a.h=new WebSocket(b.replace("wisp://","ws://").replace("wisps://","wss://"));a.h.binaryType="arraybuffer";a.h.onmessage=c=>{c=new Uint8Array(c.data);const d=new DataView(c.buffer),e=d.getUint32(1,!0);switch(c[0]){case 2:if(a.g[e])a.g[e].Kg(c.slice(5));else throw Error("Got a DATA packet but stream not registered. ID: "+e);break;case 3:a.g[e]&&(a.g[e].jf=d.getUint32(5,!0));if(a.g[e].zh){for(const f of a.i)Fc(a,f.data,f.type,e);a.g[e].zh=!1}break;case 4:a.g[e]&&a.g[e].Jg(d.getUint8(5)),
delete a.g[e]}};a.h.onclose=()=>{setTimeout(()=>{Ec(a,b)},1E4)}}function Fc(a,b,c,d){a.g[d]&&(0<a.g[d].jf?("DATA"===c&&a.g[d].jf--,a.h.send(b)):(a.g[d].zh=!0,a.i.push({data:b,type:c})))}
function Gc(a,b){let c,d;switch(b.type){case "CONNECT":const e=(new TextEncoder).encode(b.hostname);c=new Uint8Array(8+e.length);d=new DataView(c.buffer);d.setUint8(0,1);d.setUint32(1,b.hc,!0);d.setUint8(5,1);d.setUint16(6,b.port,!0);c.set(e,8);a.g[b.hc]={Kg:b.Kg,Jg:b.Jg,jf:a.g[0].jf};break;case "DATA":c=new Uint8Array(5+b.data.length);d=new DataView(c.buffer);d.setUint8(0,2);d.setUint32(1,b.hc,!0);c.set(b.data,5);break;case "CLOSE":c=new Uint8Array(6),d=new DataView(c.buffer),d.setUint8(0,4),d.setUint32(1,
b.hc,!0),d.setUint8(5,b.reason)}Fc(a,c,b.type,b.hc)}Dc.prototype.ya=function(){this.h&&(this.h.onmessage=null,this.h.onclose=null,this.h.close(),this.h=null)};
Dc.prototype.Xh=function(a,b){let c=new sc;c.state="syn-received";c.ga=this;c.h=b;c.hc=this.j++;this.Ic[b]=c;tc(c,d=>{0!==d.length&&Gc(this,{type:"DATA",hc:c.hc,data:d})});c.Cf=()=>{Gc(this,{type:"CLOSE",hc:c.hc,reason:2})};c.Wh=c.Cf;Gc(this,{type:"CONNECT",hc:c.hc,hostname:a.Y.ia.join("."),port:a.S.qa,Kg:d=>{c.write(d)},Jg:()=>{c.close()}});c.accept(a);return!0};Dc.prototype.send=function(a){oc(a,this)};Dc.prototype.Ga=function(a){this.v.send("net"+this.id+"-receive",new Uint8Array(a))};const Hc="undefined"!==typeof window&&0<=window.navigator.platform.toString().toLowerCase().search("win");
function Ic(a){function b(q){!q.altKey&&k[56]&&h(56,!1);return e(q,!1)}function c(q){!q.altKey&&k[56]&&h(56,!1);return e(q,!0)}function d(){for(var q=Object.keys(k),w,D=0;D<q.length;D++)w=+q[D],k[w]&&h(w,!1);k={}}function e(q,w){if(r.v&&(q.shiftKey&&q.ctrlKey&&(73===q.keyCode||74===q.keyCode||75===q.keyCode)||!r.dg?0:q.target?q.target.classList.contains("phone_keyboard")||"INPUT"!==q.target.nodeName&&"TEXTAREA"!==q.target.nodeName:1)){q.preventDefault&&q.preventDefault();if(Hc&&(l&&(clearTimeout(p),
q.getModifierState&&q.getModifierState("AltGraph")&&m===w&&"ControlLeft"===l.code&&"AltRight"===q.code||f(l,m),l=null),"ControlLeft"===q.code))return l=q,m=w,p=setTimeout(()=>{f(l,m);l=null},10),!1;f(q,w);return!1}}function f(q,w){a:{if(void 0!==q.code){var D=y[q.code];if(void 0!==D)break a}D=v[q.keyCode]}D?h(D,w,q.repeat):console.log("Missing char in map: keyCode="+(q.keyCode||-1).toString(16)+" code="+q.code)}function h(q,w,D){if(w)k[q]&&!D&&h(q,!1);else if(!k[q])return;(k[q]=w)||(q|=128);255<q?
(g(q>>8),g(q&255)):g(q)}function g(q){r.v.send("keyboard-code",q)}var k={},l=null,m=!1,p=0,r=this;this.dg=!0;const v=new Uint16Array([0,0,0,0,0,0,0,0,14,15,0,0,0,28,0,0,42,29,56,0,58,0,0,0,0,0,0,1,0,0,0,0,57,57417,57425,57423,57415,57419,57416,57421,80,0,0,0,0,82,83,0,11,2,3,4,5,6,7,8,9,10,0,39,0,13,0,0,0,30,48,46,32,18,33,34,35,23,36,37,38,50,49,24,25,16,19,31,20,22,47,17,45,21,44,57435,57436,57437,0,0,82,79,80,81,75,76,77,71,72,73,0,0,0,0,0,0,59,60,61,62,63,64,65,66,67,68,87,88,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,39,13,51,12,52,53,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,27,40,0,57435,57400,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),B={8:8,10:13,32:32,39:222,44:188,45:189,46:190,47:191,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,59:186,61:187,91:219,92:220,93:221,96:192,97:65,98:66,99:67,100:68,101:69,102:70,103:71,104:72,105:73,106:74,107:75,108:76,109:77,110:78,111:79,112:80,
113:81,114:82,115:83,116:84,117:85,118:86,119:87,120:88,121:89,122:90},C={33:49,34:222,35:51,36:52,37:53,38:55,40:57,41:48,42:56,43:187,58:186,60:188,62:190,63:191,64:50,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,94:54,95:189,123:219,124:220,125:221,126:192};var y={Escape:1,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Digit0:11,Minus:12,Equal:13,Backspace:14,
Tab:15,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Enter:28,ControlLeft:29,KeyA:30,KeyS:31,KeyD:32,KeyF:33,KeyG:34,KeyH:35,KeyJ:36,KeyK:37,KeyL:38,Semicolon:39,Quote:40,Backquote:41,ShiftLeft:42,Backslash:43,KeyZ:44,KeyX:45,KeyC:46,KeyV:47,KeyB:48,KeyN:49,KeyM:50,Comma:51,Period:52,Slash:53,IntlRo:53,ShiftRight:54,NumpadMultiply:55,AltLeft:56,Space:57,CapsLock:58,F1:59,F2:60,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,F10:68,NumLock:69,
ScrollLock:70,Numpad7:71,Numpad8:72,Numpad9:73,NumpadSubtract:74,Numpad4:75,Numpad5:76,Numpad6:77,NumpadAdd:78,Numpad1:79,Numpad2:80,Numpad3:81,Numpad0:82,NumpadDecimal:83,IntlBackslash:86,F11:87,F12:88,NumpadEnter:57372,ControlRight:57373,NumpadDivide:57397,AltRight:57400,Home:57415,ArrowUp:57416,PageUp:57417,ArrowLeft:57419,ArrowRight:57421,End:57423,ArrowDown:57424,PageDown:57425,Insert:57426,Delete:57427,OSLeft:57435,OSRight:57436,ContextMenu:57437};this.v=a;this.ya=function(){"undefined"!==typeof window&&
(window.removeEventListener("keyup",b,!1),window.removeEventListener("keydown",c,!1),window.removeEventListener("blur",d,!1))};this.bc=function(){"undefined"!==typeof window&&(this.ya(),window.addEventListener("keyup",b,!1),window.addEventListener("keydown",c,!1),window.addEventListener("blur",d,!1))};this.bc();this.g=function(q){q={keyCode:q};e(q,!0);e(q,!1)};this.ul=function(q){var w=q.charCodeAt(0);w in B?this.g(B[w]):w in C?(g(42),this.g(C[w]),g(170)):console.log("ascii -> keyCode not found: ",
w,q)}};function Jc(a,b){function c(y){if(!C.enabled||!C.dg)return!1;var q=b||document.body,w;if(!(w=document.pointerLockElement))a:{for(y=y.target;y.parentNode;){if(y===q){w=!0;break a}y=y.parentNode}w=!1}return w}function d(y){c(y)&&(y=y.changedTouches)&&y.length&&(y=y[y.length-1],v=y.clientX,B=y.clientY)}function e(){if(m||r||p)C.v.send("mouse-click",[!1,!1,!1]),m=r=p=!1}function f(y){if(C.v&&c(y)&&C.ud){var q=0,w=0,D=y.changedTouches;D?D.length&&(D=D[D.length-1],q=D.clientX-v,w=D.clientY-B,v=D.clientX,
B=D.clientY,y.preventDefault()):"number"===typeof y.movementX?(q=y.movementX,w=y.movementY):"number"===typeof y.webkitMovementX?(q=y.webkitMovementX,w=y.webkitMovementY):"number"===typeof y.mozMovementX?(q=y.mozMovementX,w=y.mozMovementY):(q=y.clientX-v,w=y.clientY-B,v=y.clientX,B=y.clientY);C.v.send("mouse-delta",[1*q,-(1*w)]);b&&C.v.send("mouse-absolute",[y.pageX-b.offsetLeft,y.pageY-b.offsetTop,b.offsetWidth,b.offsetHeight])}}function h(y){c(y)&&k(y,!0)}function g(y){c(y)&&k(y,!1)}function k(y,
q){C.v&&(1===y.which?m=q:2===y.which?r=q:3===y.which&&(p=q),C.v.send("mouse-click",[m,r,p]),y.preventDefault())}function l(y){if(c(y)){var q=y.wheelDelta||-y.detail;0>q?q=-1:0<q&&(q=1);C.v.send("mouse-wheel",[q,0]);y.preventDefault()}}var m=!1,p=!1,r=!1,v=0,B=0,C=this;this.enabled=!1;this.dg=!0;this.v=a;this.v.register("mouse-enable",function(y){this.enabled=y},this);this.ud=!1;this.v.register("emulator-stopped",function(){this.ud=!1},this);this.v.register("emulator-started",function(){this.ud=!0},
this);this.ya=function(){"undefined"!==typeof window&&(window.removeEventListener("touchstart",d,!1),window.removeEventListener("touchend",e,!1),window.removeEventListener("touchmove",f,!1),window.removeEventListener("mousemove",f,!1),window.removeEventListener("mousedown",h,!1),window.removeEventListener("mouseup",g,!1),window.removeEventListener("wheel",l,{passive:!1}))};this.bc=function(){"undefined"!==typeof window&&(this.ya(),window.addEventListener("touchstart",d,!1),window.addEventListener("touchend",
e,!1),window.addEventListener("touchmove",f,!1),window.addEventListener("mousemove",f,!1),window.addEventListener("mousedown",h,!1),window.addEventListener("mouseup",g,!1),window.addEventListener("wheel",l,{passive:!1}))};this.bc()};function Kc(a,b){function c(E){E=E.toString(16);return"#"+"0".repeat(6-E.length)+E}function d(E){var A=256*M,H=8*I,J=P?P.canvas:null;J&&J.width===A&&J.height===H||(J?(J.width=A,J.height=H):(J=new OffscreenCanvas(A,H),P=J.getContext("2d")),z=P.createImageData(A,H));const S=z.data;let Q=0,V;H=Ia?function(Z){V=V||Z;S[Q+3]=Z;S[Q+7]=Z;Q+=8}:function(Z){V=V||Z;S[Q+3]=Z;Q+=4};J=32-I;const la=A*(I-1)*4;A=4*(M-A*I);const ia=1020*M;for(let Z=0,Ja=0;2048>Z;++Z,Ja+=J,Q+=A){const Ka=Z%256;Z&&!Ka&&(Q+=la);V=!1;
for(let Va=0;Va<I;++Va,++Ja,Q+=ia){const Wa=E[Ja];for(let Da=128;0<Da;Da>>=1)H(Wa&Da?255:0);ma&&H(Xa&&192<=Ka&&223>=Ka&&Wa&1?255:0)}L[Z]=V?1:0}P.putImageData(z,0,0)}function e(E,A,H,J){if(A&&H){E.style.width="";E.style.height="";J&&(E.style.transform="");var S=E.getBoundingClientRect();J?E.style.transform=(1===A?"":" scaleX("+A+")")+(1===H?"":" scaleY("+H+")"):(0===A%1&&0===H%1?(h.style.imageRendering="crisp-edges",h.style.imageRendering="pixelated",h.style["-ms-interpolation-mode"]="nearest-neighbor"):
(h.style.imageRendering="",h.style["-ms-interpolation-mode"]=""),J=window.devicePixelRatio||1,0!==J%1&&(A/=J,H/=J));1!==A&&(E.style.width=S.width*A+"px");1!==H&&(E.style.height=S.height*H+"px")}}const f=a.Xf;this.dh=b;console.assert(f,"options.container must be provided");this.o=1;this.A=2;var h=f.getElementsByTagName("canvas")[0],g=h.getContext("2d",{alpha:!1}),k=f.getElementsByTagName("div")[0],l=document.createElement("div"),m,p,r=void 0!==a.scale?a.scale:1,v=void 0!==a.scale?a.scale:1,B=1,C,y,
q,w,D,T,ca,P,z,L=new Int8Array(2048),I,M,ma,Ia,Xa,db=0,na=0,oa,wa=0,ra,La,pc,cd=[],qc=0,dd=!1;this.bc=function(){const E=new Uint16Array([32,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788,9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660]),A=new Uint16Array([8962,199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402,225,237,243,250,241,209,170,186,191,8976,172,189,188,
161,171,187,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745,8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]);for(var H=0,J;256>H;H++)J=126<H?A[H-127]:32>H?E[H]:H,cd.push(String.fromCharCode(J));l.classList.add("cursor");
l.style.position="absolute";l.style.backgroundColor="#ccc";l.style.width="7px";l.style.display="inline-block";this.g(!1);this.i(80,25);2===y&&this.h(720,400);this.gh(r,v);this.Jc()};this.Pj=function(){const E=new Image;if(1===y||2===y)E.src=h.toDataURL("image/png");else{const A=[9,16],H=document.createElement("canvas");H.width=w*A[0];H.height=D*A[1];const J=H.getContext("2d");J.imageSmoothingEnabled=!1;J.font=window.getComputedStyle(k).font;J.textBaseline="top";for(let S=0;S<D;S++)for(let Q=0;Q<w;Q++){const V=
4*(S*w+Q),la=q[V],ia=q[V+3];J.fillStyle=c(q[V+2]);J.fillRect(Q*A[0],S*A[1],A[0],A[1]);J.fillStyle=c(ia);J.fillText(cd[la],Q*A[0],S*A[1])}"none"!==l.style.display&&m<D&&p<w&&(J.fillStyle=l.style.backgroundColor,J.fillRect(p*A[0],m*A[1]+parseInt(l.style.marginTop,10),parseInt(l.style.width,10),parseInt(l.style.height,10)));E.src=H.toDataURL("image/png")}return E};this.j=function(E,A,H,J,S,Q){A=4*(E*w+A);q[A]=H;q[A+1]=J;q[A+2]=S;q[A+3]=Q;C[E]=1};this.Jc=function(){qc=requestAnimationFrame(()=>this.aa())};
this.aa=function(){dd||(0===y?this.ba():1===y?this.X():this.Z());this.Jc()};this.ba=function(){for(var E=0;E<D;E++)C[E]&&(this.U(E),C[E]=0)};this.X=function(){this.dh()};this.Z=function(){if(T){var E=performance.now();if(266<E-wa){oa=!oa;pc&&(C[m]=1);var A=4*w;for(let la=0,ia=0;la<D;++la)if(C[la])ia+=A;else for(var H=0;H<w;++H,ia+=4)if(q[ia+1]&1){C[la]=1;ia+=A-4*H;break}wa=E}E=P.canvas;A=ca.canvas;H=4*w;const S=w*M,Q=I;let V=0;for(let la=0,ia=0,Z=0;la<D;++la,ia+=I){if(!C[la]){Z+=H;continue}++V;ca.clearRect(0,
Q,S,I);let Ja,Ka,Va,Wa;for(let Da=0;Da<S;Da+=M,Z+=4){const Fe=q[Z];var J=q[Z+1];const Ge=q[Z+2],He=q[Z+3],Ie=J&2?na:db;J=(!(J&1)||oa)&&L[(Ie<<8)+Fe];Va!==Ge&&(void 0!==Va&&(T.fillStyle=c(Va),T.fillRect(Wa,ia,Da-Wa,I)),Va=Ge,Wa=Da);Ja!==He&&(void 0!==Ja&&(ca.fillStyle=c(Ja),ca.fillRect(Ka,0,Da-Ka,I)),Ja=He,Ka=Da);J&&ca.drawImage(E,Fe*M,Ie*I,M,I,Da,Q,M,I)}ca.fillStyle=c(Ja);ca.fillRect(Ka,0,S-Ka,I);ca.globalCompositeOperation="destination-in";ca.drawImage(A,0,Q,S,I,0,0,S,I);ca.globalCompositeOperation=
"source-over";T.fillStyle=c(Va);T.fillRect(Wa,ia,S-Wa,I);T.drawImage(A,0,0,S,I,0,ia,S,I)}V&&(oa&&pc&&C[m]&&(T.fillStyle=c(q[4*(m*w+p)+3]),T.fillRect(p*M,m*I+ra,M,La-ra+1)),C.fill(0));V&&g.drawImage(T.canvas,0,0)}};this.ya=function(){qc&&(cancelAnimationFrame(qc),qc=0)};this.pause=function(){dd=!0;l.classList.remove("blinking-cursor")};this.continue=function(){dd=!1;l.classList.add("blinking-cursor")};this.g=function(E){y=E?1:a.zl?2:0;0===y?(k.style.display="block",h.style.display="none"):(k.style.display=
"none",h.style.display="block",2===y&&C&&C.fill(1))};this.B=function(E,A,H,J,S,Q){const V=H?16:A?9:8;if(I!==E||M!==V||ma!==A||Ia!==H||Xa!==J||Q)Q=M!==V||I!==E,I=E,M=V,ma=A,Ia=H,Xa=J,2===y&&(d(S),C.fill(1),Q&&this.T())};this.D=function(E,A){if(db!==E||na!==A)db=E,na=A,C.fill(1)};this.N=function(){g.fillStyle="#000";g.fillRect(0,0,h.width,h.height)};this.T=function(){if(P){var E=M*w,A=I*D,H=2*I;T&&T.canvas.width===E&&T.canvas.height===A&&ca.canvas.height===H||(T?(T.canvas.width=E,T.canvas.height=A,
ca.canvas.width=E,ca.canvas.height=H):(T=(new OffscreenCanvas(E,A)).getContext("2d",{alpha:!1}),ca=(new OffscreenCanvas(E,H)).getContext("2d")),this.h(E,A),C.fill(1))}};this.i=function(E,A){if(E!==w||A!==D)if(C=new Int8Array(A),q=new Int32Array(E*A*4),w=E,D=A,0===y){for(;k.childNodes.length>A;)k.removeChild(k.firstChild);for(;k.childNodes.length<A;)k.appendChild(document.createElement("div"));for(E=0;E<A;E++)this.U(E);e(k,r,v,!0)}else 2===y&&this.T()};this.h=function(E,A){h.style.display="block";
h.width=E;h.height=A;g.imageSmoothingEnabled=!1;B=640>=E&&2*E<window.innerWidth*window.devicePixelRatio&&2*A<window.innerHeight*window.devicePixelRatio?2:1;e(h,r*B,v*B,!1)};this.gh=function(E,A){r=E;v=A;e(k,r,v,!0);e(h,r*B,v*B,!1)};this.K=function(E,A,H){if(E!==ra||A!==La||H!==pc)0===y?H?(l.style.display="inline",l.style.height=A-E+"px",l.style.marginTop=E+"px"):l.style.display="none":2===y&&m<D&&(C[m]=1),ra=E,La=A,pc=H};this.F=function(E,A){if(E!==m||A!==p)E<D&&(C[E]=1),m<D&&(C[m]=1),m=E,p=A};this.U=
function(E){var A=4*E*w,H;var J=k.childNodes[E];var S=document.createElement("div");for(var Q=0;Q<w;){var V=document.createElement("span");var la=q[A+1]&1;var ia=q[A+2];var Z=q[A+3];la&&V.classList.add("blink");V.style.backgroundColor=c(ia);V.style.color=c(Z);for(H="";Q<w&&(q[A+1]&1)===la&&q[A+2]===ia&&q[A+3]===Z;)if(H+=cd[q[A]],Q++,A+=4,E===m)if(Q===p)break;else if(Q===p+1){l.style.backgroundColor=V.style.color;S.appendChild(l);break}V.textContent=H;S.appendChild(V)}J.parentNode.replaceChild(S,J)};
this.l=function(E){for(const A of E)g.putImageData(A.zc,A.eh-A.Vf,A.fh-A.Wf,A.Vf,A.Wf,A.Hg,A.Gg)};this.bc()};function Lc(){var a,b=0,c=0;this.j=function(d,e,f){a[d*b+e]=f};this.ya=function(){};this.pause=function(){};this.continue=function(){};this.g=function(){};this.B=function(){};this.D=function(){};this.N=function(){};this.i=function(d,e){if(d!==b||e!==c)a=new Uint8Array(d*e),b=d,c=e};this.h=function(){};this.gh=function(){};this.K=function(){};this.F=function(){};this.l=function(){};this.i(80,25)};function Mc(a,b){function c(g){h.v&&h.enabled&&(h.h(g.which),g.preventDefault())}function d(g){var k=g.which;8===k?(h.h(127),g.preventDefault()):9===k&&(h.h(9),g.preventDefault())}function e(g){if(h.enabled){for(var k=g.clipboardData.getData("text/plain"),l=0;l<k.length;l++)h.h(k.charCodeAt(l));g.preventDefault()}}function f(g){g.target!==a&&a.blur()}var h=this;this.enabled=!0;this.v=b;this.text="";this.j=!1;this.i=0;this.v.register("serial0-output-byte",function(g){this.tl(String.fromCharCode(g))},
this);this.ya=function(){a.removeEventListener("keypress",c,!1);a.removeEventListener("keydown",d,!1);a.removeEventListener("paste",e,!1);window.removeEventListener("mousedown",f,!1)};this.bc=function(){this.ya();a.style.display="block";a.addEventListener("keypress",c,!1);a.addEventListener("keydown",d,!1);a.addEventListener("paste",e,!1);window.addEventListener("mousedown",f,!1)};this.bc();this.tl=function(g){"\b"===g?(this.text=this.text.slice(0,-1),this.update()):"\r"!==g&&(this.text+=g,"\n"===
g&&(this.j=!0),this.update())};this.update=function(){var g=Date.now(),k=g-this.i;16>k?void 0===this.g&&(this.g=setTimeout(()=>{this.g=void 0;this.i=Date.now();this.l()},16-k)):(void 0!==this.g&&(clearTimeout(this.g),this.g=void 0),this.i=g,this.l())};this.l=function(){a.value=this.text;this.j&&(this.j=!1,a.scrollTop=1E9)};this.h=function(g){h.v&&h.v.send("serial0-input",g)}}
function Nc(a,b){this.element=a;if(window.Terminal){var c=this.g=new window.Terminal({logLevel:"off",convertEol:"true"});c.write("This is the serial console. Whatever you type or paste here will be sent to COM1");var d=c.onData(function(e){for(let f=0;f<e.length;f++)b.send("serial0-input",e.charCodeAt(f))});b.register("serial0-output-byte",function(e){c.write(Uint8Array.of(e))},this);this.ya=function(){d.dispose();c.dispose()}}}Nc.prototype.show=function(){this.g&&this.g.open(this.element)};function Oc(a,b){b=b.id||0;this.v=a;this.h=`net${b}-send`;this.o=`net${b}-receive`;this.g=new BroadcastChannel(`v86-inbrowser-${b}`);this.j=!0;this.l=c=>{this.g.postMessage(c)};this.v.register(this.h,this.l,this);this.i=c=>{this.v.send(this.o,c.data)};this.g.addEventListener("message",this.i)}Oc.prototype.ya=function(){this.j&&(this.v.unregister(this.h,this.l),this.g.removeEventListener("message",this.i),this.g.close(),this.j=!1)};function Pc(){this.h=new Map}Pc.prototype.read=async function(a,b,c){return(a=this.h.get(a))?a.subarray(b,b+c):null};Pc.prototype.cache=async function(a,b){this.h.set(a,b)};Pc.prototype.g=function(a){this.h.delete(a)};function Qc(a,b){b.endsWith("/")||(b+="/");this.h=a;this.Uf=b}function Rc(a,b){return new Promise(c=>{za(a.Uf+b,{done:async d=>{d=new Uint8Array(d);await a.cache(b,d);c(d)}})})}
Qc.prototype.read=async function(a,b,c){const d=await this.h.read(a,b,c);return d?d:(await Rc(this,a)).subarray(b,b+c)};Qc.prototype.cache=async function(a,b){return await this.h.cache(a,b)};Qc.prototype.g=function(a){this.h.g(a)};const Sc=new TextDecoder,Tc=new TextEncoder;
function G(a,b,c,d){for(var e,f=0,h=0;h<a.length;h++)switch(e=b[h],a[h]){case "w":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;f+=4;break;case "d":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;c[d++]=0;c[d++]=0;c[d++]=0;c[d++]=0;f+=8;break;case "h":c[d++]=e&255;c[d++]=e>>8;f+=2;break;case "b":c[d++]=e;f+=1;break;case "s":var g=d,k=0;c[d++]=0;c[d++]=0;f+=2;e=Tc.encode(e);f+=e.byteLength;k+=e.byteLength;c.set(e,d);d+=e.byteLength;c[g+0]=k&255;c[g+1]=k>>8&255;break;
case "Q":G(["b","w","d"],[e.type,e.version,e.path],c,d),d+=13,f+=13}return f}
function K(a,b,c){let d=c.offset;for(var e=[],f=0;f<a.length;f++)switch(a[f]){case "w":var h=b[d++];h+=b[d++]<<8;h+=b[d++]<<16;h+=b[d++]<<24>>>0;e.push(h);break;case "d":h=b[d++];h+=b[d++]<<8;h+=b[d++]<<16;h+=b[d++]<<24>>>0;d+=4;e.push(h);break;case "h":h=b[d++];e.push(h+(b[d++]<<8));break;case "b":e.push(b[d++]);break;case "s":h=b[d++];h+=b[d++]<<8;var g=b.slice(d,d+h);d+=h;e.push(Sc.decode(g));break;case "Q":c.offset=d,h=K(["b","w","d"],b,c),d=c.offset,e.push({type:h[0],version:h[1],path:h[2]})}c.offset=
d;return e};const Uc=new TextEncoder;function Vc(a){this.g=[];this.B=[];this.j=a;this.A={Og:0};this.h={};this.l=274877906944;this.o=0;this.i=[];Wc(this,"",-1)}Vc.prototype.ja=function(){let a=[];a[0]=this.g;a[1]=this.A.Og;a[2]=[];for(const [b,c]of Object.entries(this.h))0===(this.g[b].mode&16384)&&a[2].push([b,c]);a[3]=this.l;a[4]=this.o;return a=a.concat(this.i)};
Vc.prototype.J=function(a){this.g=a[0].map(b=>{const c=new Xc(0);c.J(b);return c});this.A.Og=a[1];this.h={};for(let [b,c]of a[2])c.buffer.byteLength!==c.byteLength&&(c=c.slice()),this.h[b]=c;this.l=a[3];this.o=a[4];this.i=a.slice(5)};function Yc(a,b,c){var d=a.g[b];0===d.status||2===d.status?c():5===d.status?Yc(N(a,d),d.g,c):a.B.push({id:b,El:c})}
function Zc(a,b,c){var d=$c(a);const e=b[0];d.size=b[1];d.ad=b[2];d.Qe=d.ad;d.ee=d.ad;d.mode=b[3];d.uid=b[4];d.bb=b[5];var f=d.mode&61440;if(16384===f)for(ad(a,d,c,e),c=a.g.length-1,b=b[6],d=0;d<b.length;d++)Zc(a,b[d],c);else 32768===f?(d.status=2,d.Ee=b[6],ad(a,d,c,e)):40960===f&&(d.Lf=b[6],ad(a,d,c,e))}function bd(a,b,c,d){const e=a.g[c],f=a.g[b];ed(a,b);f.va.has(d);f.va.set(d,c);e.pb++;ed(a,c)&&(e.va.has(".."),e.va.has(".")||e.pb++,e.va.set(".",c),e.va.set("..",b),f.pb++)}
function fd(a,b,c){const d=gd(a,b,c),e=a.g[d],f=a.g[b];ed(a,b);f.va.delete(c)&&(e.pb--,ed(a,d)&&(e.va.get(".."),e.va.delete(".."),f.pb--))}function ad(a,b,c,d){-1!==c?(a.g.push(b),b.Qc=a.g.length-1,bd(a,c,b.Qc,d)):0===a.g.length&&(a.g.push(b),b.va.set(".",0),b.va.set("..",0),b.pb=2)}
function Xc(a){this.va=new Map;this.kg=this.jg=this.ad=this.ee=this.Qe=this.Qc=this.bb=this.uid=this.size=this.status=0;this.Lf="";this.mode=493;this.Ra={type:0,version:0,path:a};this.pb=0;this.Ee="";this.h=[];this.g=this.i=-1}
Xc.prototype.ja=function(){const a=[];a[0]=this.mode;a[1]=16384===(this.mode&61440)?[...this.va]:32768===(this.mode&61440)?this.Ee:40960===(this.mode&61440)?this.Lf:49152===(this.mode&61440)?[this.kg,this.jg]:null;a[2]=this.h;a[3]=this.status;a[4]=this.size;a[5]=this.uid;a[6]=this.bb;a[7]=this.Qc;a[8]=this.Qe;a[9]=this.ee;a[10]=this.ad;a[11]=this.Ra.version;a[12]=this.Ra.path;a[13]=this.pb;return a};
Xc.prototype.J=function(a){this.mode=a[0];if(16384===(this.mode&61440)){this.va=new Map;for(const [b,c]of a[1])this.va.set(b,c)}else 32768===(this.mode&61440)?this.Ee=a[1]:40960===(this.mode&61440)?this.Lf=a[1]:49152===(this.mode&61440)&&([this.kg,this.jg]=a[1]);this.h=[];for(const b of a[2]){const c=new hd;c.J(b);this.h.push(c)}this.status=a[3];this.size=a[4];this.uid=a[5];this.bb=a[6];this.Qc=a[7];this.Qe=a[8];this.ee=a[9];this.ad=a[10];this.Ra.type=(this.mode&61440)>>8;this.Ra.version=a[11];this.Ra.path=
a[12];this.pb=a[13]};function id(a,b){Object.assign(b,a,{Qc:b.Qc,va:b.va,pb:b.pb})}function $c(a){const b=Math.round(Date.now()/1E3);a=new Xc(++a.A.Og);a.ee=a.Qe=a.ad=b;return a}function Wc(a,b,c){var d=a.g[c];if(0<=c&&5===d.status)return c=d.g,b=Wc(N(a,d),b,c),jd(a,d.i,b);d=$c(a);d.mode=16895;0<=c&&(d.uid=a.g[c].uid,d.bb=a.g[c].bb,d.mode=a.g[c].mode&511|16384);d.Ra.type=64;ad(a,d,c,b);return a.g.length-1}
function kd(a,b,c){var d=a.g[c];if(5===d.status)return c=d.g,b=kd(N(a,d),b,c),jd(a,d.i,b);d=$c(a);d.uid=a.g[c].uid;d.bb=a.g[c].bb;d.Ra.type=128;d.mode=a.g[c].mode&438|32768;ad(a,d,c,b);return a.g.length-1}function ld(a,b,c,d,e){var f=a.g[c];if(5===f.status)return c=f.g,b=ld(N(a,f),b,c,d,e),jd(a,f.i,b);f=$c(a);f.jg=d;f.kg=e;f.uid=a.g[c].uid;f.bb=a.g[c].bb;f.Ra.type=192;f.mode=a.g[c].mode&438;ad(a,f,c,b);return a.g.length-1}
function md(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,b=md(N(a,e),b,c,d),jd(a,e.i,b);e=$c(a);e.uid=a.g[c].uid;e.bb=a.g[c].bb;e.Ra.type=160;e.Lf=d;e.mode=40960;ad(a,e,c,b);return a.g.length-1}async function nd(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,d=await nd(N(a,e),b,c,d),jd(a,e.i,d);e=kd(a,b,c);b=a.g[e];c=new Uint8Array(d.length);c.set(d);await od(a,e,c);b.size=d.length;return e}
function pd(a,b,c){var d=a.g[b];if(5===d.status)return pd(N(a,d),d.g,c);16384===(d.mode&61440)&&qd(a,b);return!0}async function rd(a,b){var c=a.g[b];if(5===c.status)return await rd(N(a,c),c.g);2===c.status&&a.j.g(c.Ee);4===c.status&&(c.status=-1,await sd(a,b))}
async function td(a,b,c,d,e){if(b===d&&c===e)return 0;var f=gd(a,b,c);if(-1===f)return-2;var h=b;ed(a,h);for(var g="";0!==h;)g="/"+ud(a,h)+g,h=vd(a,h);if(-1!==gd(a,d,e)&&(h=wd(a,d,e),0>h))return h;g=a.g[f];var k=a.g[b];h=a.g[d];if(5===k.status||5===h.status)if(5===k.status&&k.i===h.i){if(a=await td(N(a,k),k.g,c,h.g,e),0>a)return a}else{if(0===xd(a,f).Qc||!ed(a,f)&&1<xd(a,f).pb)return-1;k=gd(a,b,c);var l=a.g[k],m=new Xc(-1);ed(a,k);Object.assign(m,l);const p=a.g.length;a.g.push(m);m.Qc=p;5===l.status&&
a.i[l.i].g.set(l.g,p);if(5!==l.status||0===l.g)fd(a,b,c),bd(a,b,p,c);if(ed(a,k)&&5!==l.status)for(const [r,v]of m.va)"."!==r&&".."!==r&&ed(a,v)&&a.g[v].va.set("..",p);a.h[p]=a.h[k];delete a.h[k];l.va=new Map;l.pb=0;k=p;l=xd(a,f);m=await yd(a,k,0,l.size);5===h.status?(d=N(a,h),e=ed(a,k)?Wc(d,e,h.g):kd(d,e,h.g),d=xd(d,e),id(l,d),zd(a,f,h.i,e)):(g.status=-1,a.i[g.i].g.delete(g.g),id(l,g),bd(a,d,f,e));await Ad(a,f,l.size);m&&m.length&&await Bd(a,f,0,m.length,m);if(ed(a,f))for(const r of Cd(a,k))if(e=
await td(a,k,r,f,r),0>e)return e;await sd(a,k);a=wd(a,b,c);if(0>a)return a}else fd(a,b,c),bd(a,d,f,e),g.Ra.version++;return 0}async function Bd(a,b,c,d,e){var f=a.g[b];if(5===f.status)b=f.g,await Bd(N(a,f),b,c,d,e);else{var h=await a.ac(b);!h||h.length<c+d?(await Ad(a,b,Math.floor(3*(c+d)/2)),f.size=c+d,h=await a.ac(b)):f.size<c+d&&(f.size=c+d);e&&h.set(e.subarray(0,d),c);await od(a,b,h)}}
async function yd(a,b,c,d){const e=a.g[b];return 5===e.status?(b=e.g,await yd(N(a,e),b,c,d)):await Dd(a,b,c,d)}function gd(a,b,c){b=a.g[b];if(5===b.status){const d=b.g;c=gd(N(a,b),d,c);return-1===c?-1:Ed(a,b.i,c)}a=b.va.get(c);return void 0===a?-1:a}function Fd(a){let b=a.g.length;for(const {h:c,g:d}of a.i)b+=Fd(c),b-=d.size;return b}function Gd(a){let b=1048576;for(const {h:c}of a.i)b+=Gd(c);return b}function Hd(a){let b=a.o;for(const {h:c}of a.i)b+=Hd(c);return b}
function Id(a){let b=a.l;for(const {h:c}of a.i)b+=Id(c);return a.l}function ud(a,b){const c=a.g[vd(a,b)];if(5===c.status)return ud(N(a,c),a.g[b].g);if(!c)return"";for(const [d,e]of c.va)if(e===b)return d;return""}function Jd(a,b,c,d){if(ed(a,c))return-1;const e=a.g[b],f=a.g[c];if(5===e.status)return 5!==f.status||f.i!==e.i?-1:Jd(N(a,e),e.g,f.g,d);if(5===f.status)return-1;bd(a,b,c,d);return 0}
function wd(a,b,c){if("."===c||".."===c)return-1;var d=gd(a,b,c);const e=a.g[d];var f=a.g[b];if(5===f.status)return b=f.g,wd(N(a,f),b,c);if(f=ed(a,d)){a:if(d=a.g[d],5===d.status)var h=ed(N(a,d),d.g);else{for(h of d.va.keys())if("."!==h&&".."!==h){h=!1;break a}h=!0}f=!h}if(f)return-39;fd(a,b,c);0===e.pb&&(e.status=4);return 0}async function sd(a,b){const c=a.g[b];5===c.status?await sd(N(a,c),c.g):(c.size=0,delete a.h[b])}
Vc.prototype.ac=async function(a){const b=this.g[a];return this.h[a]?this.h[a]:2===b.status?await this.j.read(b.Ee,0,b.size):null};async function Dd(a,b,c,d){const e=a.g[b];return a.h[b]?a.h[b].subarray(c,c+d):2===e.status?await a.j.read(e.Ee,c,d):null}async function od(a,b,c){a.h[b]=c;2===a.g[b].status&&(a.g[b].status=0,a.j.g(a.g[b].Ee))}function xd(a,b){b=a.g[b];return 5===b.status?xd(N(a,b),b.g):b}
async function Ad(a,b,c){var d=xd(a,b),e=await Dd(a,b,0,d.size);if(c!==d.size){var f=new Uint8Array(c);d.size=c;e&&f.set(e.subarray(0,Math.min(e.length,d.size)),0);await od(a,b,f)}}
function Kd(a,b){b=b.replace("//","/");b=b.split("/");0<b.length&&0===b[b.length-1].length&&b.pop();0<b.length&&0===b[0].length&&b.shift();const c=b.length;var d=-1,e=0;let f=null;for(var h=0;h<c;h++)if(d=e,e=gd(a,d,b[h]),!f&&5===a.g[d].status&&(f="/"+b.slice(h).join("/")),-1===e)return h<c-1?{id:-1,Vg:-1,name:b[h],Kh:f}:{id:-1,Vg:d,name:b[h],Kh:f};return{id:e,Vg:d,name:b[h],Kh:f}}
function qd(a,b){var c=a.g[b];if(5===c.status)qd(N(a,c),c.g);else{var d=0;for(const e of c.va.keys())d+=24+Uc.encode(e).length;b=a.h[b]=new Uint8Array(d);c.size=d;d=0;for(const [e,f]of c.va)c=xd(a,f),d+=G(["Q","d","b","s"],[c.Ra,d+13+8+1+2+Uc.encode(e).length,c.mode>>12,e],b,d)}}function Ld(a,b,c){a=a.h[b];if(c>=a.length)return a.length;for(b=0;;){const d=K(["Q","d"],a,{offset:b})[1];if(d>c)break;b=d}return b}function ed(a,b){b=a.g[b];return 5===b.status?ed(N(a,b),b.g):16384===(b.mode&61440)}
function Cd(a,b){ed(a,b);b=a.g[b];if(5===b.status)return Cd(N(a,b),b.g);a=[];for(const c of b.va.keys())"."!==c&&".."!==c&&a.push(c);return a}function vd(a,b){ed(a,b);b=a.g[b];if(5!==b.status||0===b.g)return b.va.get("..");const c=vd(N(a,b),b.g);return Ed(a,b.i,c)}function zd(a,b,c,d){const e=a.g[b];5===e.status&&a.i[e.i].g.delete(e.g);e.status=5;e.i=c;e.g=d;a.i[c].g.set(d,b)}function jd(a,b,c){const d=$c(a),e=a.g.length;a.g.push(d);d.Qc=e;zd(a,e,b,c);return e}
function Ed(a,b,c){const d=a.i[b].g.get(c);return void 0===d?jd(a,b,c):d}function N(a,b){return a.i[b.i].h}function hd(){this.type=2;this.start=0;this.length=Infinity;this.h=-1;this.g=""}hd.prototype.ja=function(){const a=[];a[0]=this.type;a[1]=this.start;a[2]=Infinity===this.length?0:this.length;a[3]=this.h;a[4]=this.g;return a};hd.prototype.J=function(a){this.type=a[0];this.start=a[1];this.length=0===a[2]?Infinity:a[2];this.h=a[3];this.g=a[4]};
function Md(a){const b=new hd;b.J(a.ja());return b}function Nd(a,b){return b.h===a.h&&b.g===a.g&&b.type===a.type}function Od(a,b){return Nd(a,b)&&b.start+b.length===a.start}function Pd(a,b,c,d,e){const f=new hd;f.type=a;f.start=b;f.length=c;f.h=d;f.g=e;return f}
function Qd(a,b,c){b=a.g[b];if(5===b.status){var d=b.g;return Qd(N(a,b),d,c)}for(d of b.h)if(!(c.h===d.h&&c.g===d.g||2===c.type||2===d.type||1!==c.type&&1!==d.type||c.start+c.length<=d.start||d.start+d.length<=c.start))return Md(d);return null}
function Rd(a,b,c,d){const e=a.g[b];if(5===e.status)return b=e.g,Rd(N(a,e),b,c,d);c=Md(c);if(2!==c.type&&Qd(a,b,c))return 1;for(a=0;a<e.h.length;a++){d=e.h[a];if(d.start+d.length<=c.start)continue;if(c.start+c.length<=d.start)break;if(d.h!==c.h||d.g!==c.g)continue;b=c.start+c.length;const f=c.start-d.start,h=d.start+d.length-b;if(0<f&&0<h&&d.type===c.type)return 0;0<f&&(d.length=f);if(0>=f&&0<h)d.start=b,d.length=h;else if(0<h){for(;a<e.h.length&&e.h[a].start<b;)a++;e.h.splice(a,0,Pd(d.type,b,h,d.h,
d.g))}else 0>=f&&(e.h.splice(a,1),a--)}if(2!==c.type){a=c;d=!1;for(b=0;b<e.h.length&&!(Od(a,e.h[b])&&(e.h[b].length+=c.length,a=e.h[b],d=!0),c.start<=e.h[b].start);b++);d||(e.h.splice(b,0,a),b++);for(;b<e.h.length;b++)if(Nd(e.h[b],a)){Od(e.h[b],a)&&(a.length+=e.h[b].length,e.h.splice(b,1));break}}return 0}function Sd(a,b){b=Kd(a,b);if(-1!==b.id)return a=xd(a,b.id),Array.from(a.va.keys()).filter(c=>"."!==c&&".."!==c)}
Vc.prototype.Hf=function(a){a=Kd(this,a);if(-1===a.id)return Promise.resolve(null);const b=xd(this,a.id);return yd(this,a.id,0,b.size)};function Td(a){this.Zf=!1;this.B=function(){};var b=bb();this.v=b[0];this.me=b[1];var c,d;const e=new WebAssembly.Table({element:"anyfunc",initial:1924});b={cpu_exception_hook:()=>this.B(),run_hardware_timers:function(h,g){var k=c;const l=k.u.qg.Jc(g,!1),m=k.u.Gd.Jc(g,!1);let p=100,r=100;h&&(p=k.u.xa.Jc(g),r=k.u.Ne.Jc(g));return Math.min(l,m,p,r)},cpu_event_halt:()=>{this.me.send("cpu-event-halt")},abort:function(){},microtick:Ob,get_rand_int:function(){return fa()},apic_acknowledge_irq:function(){var h=
c.u.Ne;var g=Ud(h.i);-1===g||Ud(h.cb)>=g||(g&240)<=(h.A&240)?h=-1:(Vd(h.i,g),Wd(h.cb,g),Xd(h),h=g);return h},stop_idling:function(){return c.Vi()},io_port_read8:function(h){var g=c.C.ports[h];return g.Ae.call(g.qd,h)},io_port_read16:function(h){var g=c.C.ports[h];return g.gb.call(g.qd,h)},io_port_read32:function(h){return $a(c.C,h)},io_port_write8:function(h,g){h=c.C.ports[h];h.Dg.call(h.qd,g)},io_port_write16:function(h,g){h=c.C.ports[h];h.Rf.call(h.qd,g)},io_port_write32:function(h,g){h=c.C.ports[h];
h.Ca.call(h.qd,g)},mmap_read8:function(h){return c.g[h>>>17](h)},mmap_read16:function(h){var g=c.g[h>>>17];return g(h)|g(h+1|0)<<8},mmap_read32:function(h){return c.da[h>>>17](h)},mmap_write8:function(h,g){c.j[h>>>17](h,g)},mmap_write16:function(h,g){var k=c.j[h>>>17];k(h,g&255);k(h+1|0,g>>8)},mmap_write32:function(h,g){c.i[h>>>17](h,g)},mmap_write64:function(h,g,k){var l=c.i[h>>>17];l(h,g);l(h+4,k)},mmap_write128:function(h,g,k,l,m){var p=c.i[h>>>17];p(h,g);p(h+4,k);p(h+8,l);p(h+12,m)},log_from_wasm:function(h,
g){[...(new Uint8Array(d.buffer,h>>>0,g>>>0))]},console_log_from_wasm:function(h,g){h=String.fromCharCode(...(new Uint8Array(d.buffer,h>>>0,g>>>0)));console.error(h)},dbg_trace_from_wasm:function(){},codegen_finalize:(h,g,k,l,m)=>{Yd(c,h,g,k,l,m)},jit_clear_func:h=>{c.Na.ph.set(h+1024,null)},jit_clear_all_funcs:()=>{const h=c.Na.ph;for(let g=0;900>g;g++)h.set(1024+g,null)},__indirect_function_table:e};let f=a.Zl;f||(f=h=>new Promise(g=>{let k="v86.wasm",l="v86-fallback.wasm";a.Ki?(k=a.Ki,l=k.replace("v86.wasm",
"v86-fallback.wasm")):"undefined"===typeof window&&"string"===typeof __dirname?(k=__dirname+"/"+k,l=__dirname+"/"+l):(k="build/"+k,l="build/"+l);za(k,{done:async m=>{try{const {instance:p}=await WebAssembly.instantiate(m,h);this.A=m;g(p.exports)}catch(p){za(l,{done:async r=>{const {instance:v}=await WebAssembly.instantiate(r,h);this.A=r;g(v.exports)}})}},progress:m=>{this.me.send("download-progress",{uf:0,tf:1,vf:k,lengthComputable:m.lengthComputable,total:m.total,loaded:m.loaded})}})}));f({env:b}).then(h=>
{d=h.memory;h.rust_init();h=this.Aa=new Zd(this.me,{exports:h,ph:e});c=h.s;$d(this,h,a)});this.h=null;this.D=0}
async function $d(a,b,c){function d(r,v){switch(r){case "hda":f.L=this.nb.L=v;break;case "hdb":f.ob=this.nb.ob=v;break;case "cdrom":f.P=this.nb.P=v;break;case "fda":f.V=this.nb.V=v;break;case "fdb":f.Ue=this.nb.Ue=v;break;case "multiboot":f.Nb=this.nb.Nb=v.buffer;break;case "bzimage":f.tb=this.nb.tb=v.buffer;break;case "initrd":f.Jb=this.nb.Jb=v.buffer;break;case "bios":f.mb=v.buffer;break;case "vga_bios":f.Md=v.buffer;break;case "initial_state":f.Ac=v.buffer;break;case "fs9p_json":f.Lh=v}}async function e(){if(f.wc&&
f.Lh&&!f.Ac){var r=f.wc,v=f.Lh;if(3!==v.version)throw"The filesystem JSON format has changed. Please update your fs2json (https://github.com/copy/fs2json) and recreate the filesystem JSON.";var B=v.fsroot;r.o=v.size;for(v=0;v<B.length;v++)Zc(r,B[v],0);if(c.hf){const {dj:C,Mj:y}=ae(f.wc),[q,w]=await Promise.all([f.wc.Hf(y),f.wc.Hf(C)]);d.call(this,"initrd",new Ba(q.buffer));d.call(this,"bzimage",new Ba(w.buffer))}}this.fc&&this.fc.show&&this.fc.show();this.Aa.bc(f);f.Ac&&(b.sg(f.Ac),f.Ac=void 0);c.$i&&
this.Aa.If();this.me.send("emulator-loaded")}a.v.register("emulator-stopped",function(){this.Zf=!1;this.ec.pause()},a);a.v.register("emulator-started",function(){this.Zf=!0;this.ec.continue()},a);var f={};a.nb={V:void 0,Ue:void 0,L:void 0,ob:void 0,P:void 0};var h=c.Db?c.Db:c.V?801:c.L?786:291;f.xa=c.xa;f.mf=c.mf;f.Oj=!0;f.G=c.G||67108864;f.oa=c.oa||8388608;f.Db=h;f.Hh=c.Hh||!1;f.V=void 0;f.Ue=void 0;f.$e=c.$e;f.af=c.af;f.bf=c.bf;f.Eb=c.Eb;f.ye=c.ye;f.Mb=c.Mb;f.pd=c.pd;f.cf=c.cf;f.Nd=c.Nd;f.Bi=c.Bi;
if(h=c.Tl||c.cd&&c.cd.Fc)"fetch"===h?a.i=new yc(a.v,c.cd):"inbrowser"===h?a.i=new Oc(a.v,c.cd):h.startsWith("wisp://")||h.startsWith("wisps://")?a.i=new Dc(h,a.v,c.cd):a.i=new ac(h,a.v);f.cd=c.cd||{type:"ne2k"};h=c.screen||{};c.pl&&(h.Xf=c.pl);c.Ll||(a.o=new Ic(a.v));c.Ml||(a.j=new Jc(a.v,h.Xf));h.Xf?a.ec=new Kc(h,()=>a.Aa.s.u.Ld&&a.Aa.s.u.Ld.dh()):a.ec=new Lc;f.screen=a.ec;f.Bi=h;c.ql&&(a.fc=new Mc(c.ql,a.v));c.rl&&(a.fc=new Nc(c.rl,a.v));c.rj||(a.g=new Ub(a.v));var g=[];h=(r,v)=>{if(v)if(v.get&&
v.set&&v.load)g.push({name:r,Af:v});else{if("bios"===r||"vga_bios"===r||"initial_state"===r||"multiboot"===r||"bzimage"===r||"initrd"===r)v.async=!1;if("fda"===r||"fdb"===r)v.async=!1;v.url&&!v.async?g.push({name:r,url:v.url,size:v.size}):g.push({name:r,Af:Ma(v,a.rh.bind(a))})}};c.state&&console.warn("Warning: Unknown option 'state'. Did you mean 'initial_state'?");h("bios",c.mb);h("vga_bios",c.Md);h("cdrom",c.P);h("hda",c.L);h("hdb",c.ob);h("fda",c.V);h("fdb",c.Ue);h("initial_state",c.Ac);h("multiboot",
c.Nb);h("bzimage",c.tb);h("initrd",c.Jb);if(c.filesystem){h=c.filesystem.aj;var k=c.filesystem.Uf;let r=new Pc;k&&(r=new Qc(r,k));f.wc=a.wc=new Vc(r);if(h){if("object"===typeof h){var l=h.size;h=h.url}g.push({name:"fs9p_json",url:h,size:l,Oe:!0})}}var m=g.length,p=function(r){if(r===m)setTimeout(e.bind(this),0);else{var v=g[r];v.Af?(v.Af.onload=function(){d.call(this,v.name,v.Af);p(r+1)}.bind(this),v.Af.load()):za(v.url,{done:function(B){if(v.url.endsWith(".zst")&&"initial_state"!==v.name){var C=
v.size,y=new Uint8Array(B);B=this.Aa.s;this.l=B.Mi(y.length);(new Uint8Array(B.Ma.buffer)).set(y,B.Oi(this.l));y=B.df(this.l,C);const q=B.Ma.buffer.slice(y,y+C);B.ef(y,C);B.Ni(this.l);this.l=null;B=q}d.call(this,v.name,v.Oe?B:new Ba(B));p(r+1)}.bind(this),progress:function(B){200===B.target.status?a.me.send("download-progress",{uf:r,tf:m,vf:v.url,lengthComputable:B.lengthComputable,total:B.total||v.size,loaded:B.loaded}):a.me.send("download-error",{uf:r,tf:m,vf:v.url,request:B.target})},Oe:v.Oe})}}.bind(a);
p(0)}n=Td.prototype;
n.rh=async function(a,b){if(!this.h){const c=URL.createObjectURL(new Blob(["("+function(){let d;globalThis.onmessage=function(e){if(d){var f=e.data.src,h=e.data.qj;e=e.data.id;var g=d.exports,k=g.zstd_create_ctx(f.length);(new Uint8Array(g.memory.buffer)).set(f,g.zstd_get_src_ptr(k));f=g.zstd_read(k,h);var l=g.memory.buffer.slice(f,f+h);g.zstd_read_free(f,h);g.zstd_free_ctx(k);postMessage({result:l,id:e},[l])}else h=Object.fromEntries("cpu_exception_hook run_hardware_timers cpu_event_halt microtick get_rand_int apic_acknowledge_irq stop_idling io_port_read8 io_port_read16 io_port_read32 io_port_write8 io_port_write16 io_port_write32 mmap_read8 mmap_read16 mmap_read32 mmap_write8 mmap_write16 mmap_write32 mmap_write64 mmap_write128 codegen_finalize jit_clear_func jit_clear_all_funcs".split(" ").map(m=>[m,
()=>console.error("zstd worker unexpectedly called "+m)])),h.__indirect_function_table=new WebAssembly.Table({element:"anyfunc",initial:1024}),h.abort=()=>{throw Error("zstd worker aborted");},h.log_from_wasm=h.console_log_from_wasm=(m,p)=>{console.log(String.fromCharCode(...(new Uint8Array(d.exports.memory.buffer,m,p))))},h.dbg_trace_from_wasm=()=>console.trace(),d=new WebAssembly.Instance(new WebAssembly.Module(e.data),{env:h})}}.toString()+")()"],{type:"text/javascript"}));this.h=new Worker(c);
URL.revokeObjectURL(c);this.h.postMessage(this.A,[this.A])}return new Promise(c=>{const d=this.D++,e=async f=>{f.data.id===d&&(this.h.removeEventListener("message",e),c(f.data.result))};this.h.addEventListener("message",e);this.h.postMessage({src:b,qj:a,id:d},[b.buffer])})};
function ae(a){const b=(Sd(a,"/")||[]).map(e=>"/"+e);a=(Sd(a,"/boot/")||[]).map(e=>"/boot/"+e);let c,d;for(const e of[].concat(b,a)){const f=/old/i.test(e)||/fallback/i.test(e),h=/initrd/i.test(e)||/initramfs/i.test(e);!/vmlinuz/i.test(e)&&!/bzimage/i.test(e)||d&&f||(d=e);!h||c&&f||(c=e)}c&&d||(console.log("Failed to find bzimage or initrd in filesystem. Files:"),console.log(b.join(" ")),console.log(a.join(" ")));return{Mj:c,dj:d}}n.If=async function(){this.Aa.If()};
n.stop=async function(){this.Zf&&await new Promise(a=>{const b=()=>{this.v.unregister("emulator-stopped",b);a()};be(this,"emulator-stopped",b);this.Aa.stop()})};n.ya=async function(){await this.stop();this.Aa.ya();this.o&&this.o.ya();this.i&&this.i.ya();this.j&&this.j.ya();this.ec&&this.ec.ya();this.fc&&this.fc.ya();this.g&&this.g.ya()};n.$g=function(){this.Aa.$g()};function be(a,b,c){a.v.register(b,c,a)}n.sg=async function(a){this.Aa.sg(a)};n.ah=async function(){return this.Aa.ah()};n.ud=function(){return this.Zf};
n.Jf=async function(a){if(a.url&&!a.async)za(a.url,{done:b=>{this.Aa.s.u.ne.Jf(new Ba(b))}});else{const b=Ma(a,this.rh.bind(this));b.onload=()=>{this.Aa.s.u.ne.Jf(b)};await b.load()}};n.cg=function(){this.Aa.s.u.ne.cg()};n.ug=async function(a){if(a.url&&!a.async)za(a.url,{done:b=>{this.Aa.s.u.P.ug(new Ba(b))}});else{const b=Ma(a,this.rh.bind(this));b.onload=()=>{this.Aa.s.u.P.ug(b)};await b.load()}};function ce(a,b){for(var c=0;c<b.length;c++)a.v.send("keyboard-code",b[c])}
function de(a,b){for(var c=0;c<b.length;c++)a.o.ul(b[c])}async function ee(){const a=document.body;try{await a.requestPointerLock({unadjustedMovement:!0})}catch(b){await a.requestPointerLock()}}n.kj=async function(a,b){var c=this.wc;if(c){var d=a.split("/");d=d[d.length-1];a=Kd(c,a).Vg;if(""!==d&&-1!==a)await nd(c,d,a,b);else return Promise.reject(new fe)}};n.Hf=async function(a){var b=this.wc;if(b)return(a=await b.Hf(a))?a:Promise.reject(new fe)};function fe(){this.message="File not found"}
fe.prototype=Error.prototype;"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports.V86=Td:"undefined"!==typeof window?window.V86=Td:"function"===typeof importScripts&&(self.V86=Td);function Zd(a,b){this.i=this.h=!1;this.l=!0;this.j=0;this.g=null;this.s=new ge(a,b,()=>{this.l&&he(this,0)});this.v=a;this.o()}n=Zd.prototype;n.If=function(){this.i=!1;this.h||(this.h=!0,this.v.send("emulator-started"));he(this,0)};function ie(a){if(a.i||!a.h)a.i=a.h=!1,a.v.send("emulator-stopped");else{a.l=!1;var b=a.s.Xd();he(a,b)}}function he(a,b){const c=++a.j;a.l=!0;a.B(b,c)}n.stop=function(){this.h&&(this.i=!0)};n.ya=function(){this.A()};n.$g=function(){this.s.na();je(this.s)};
n.bc=function(a){this.s.bc(a,this.v);this.v.send("emulator-ready")};
if("undefined"!==typeof process)Zd.prototype.B=function(a,b){1>a?global.setImmediate(c=>{c===this.j&&ie(this)},b):setTimeout(c=>{c===this.j&&ie(this)},a,b)},Zd.prototype.o=function(){},Zd.prototype.A=function(){};else if("undefined"!==typeof Worker){function a(){let b;globalThis.onmessage=function(c){const d=c.data.t;b=b&&clearTimeout(b);1>d?postMessage(c.data.Ji):b=setTimeout(()=>postMessage(c.data.Ji),d)}}Zd.prototype.o=function(){const b=URL.createObjectURL(new Blob(["("+a.toString()+")()"],{type:"text/javascript"}));
this.g=new Worker(b);this.g.onmessage=c=>{c.data===this.j&&ie(this)};URL.revokeObjectURL(b)};Zd.prototype.B=function(b,c){this.g.postMessage({t:b,Ji:c})};Zd.prototype.A=function(){this.g&&this.g.terminate();this.g=null}}else Zd.prototype.B=function(a){setTimeout(()=>{ie(this)},a)},Zd.prototype.o=function(){},Zd.prototype.A=function(){};
Zd.prototype.ah=function(){for(var a=[],b=Hb(this.s,a),c=[],d=0,e=0;e<a.length;e++){var f=a[e].byteLength;c[e]={offset:d,length:f};d+=f;d=d+3&-4}e=JSON.stringify({buffer_infos:c,state:b});e=(new TextEncoder).encode(e);b=16+e.length;b=b+3&-4;f=b+d;d=new ArrayBuffer(f);var h=new Int32Array(d,0,4);(new Uint8Array(d,16,e.length)).set(e);b=new Uint8Array(d,b);h[0]=-2039052682;h[1]=6;h[2]=f;h[3]=e.length;for(e=0;e<a.length;e++)b.set(a[e],c[e].offset);return d};
Zd.prototype.sg=function(a){return Jb(this.s,a)};if("object"===typeof performance&&performance.now)var Ob=performance.now.bind(performance);else if("function"===typeof require){const {performance:a}=require("perf_hooks");Ob=a.now.bind(a)}else"object"===typeof process&&process.hrtime?Ob=function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:Ob=Date.now;function ke(a){this.s=a;this.la=this.B=0;this.na=1;this.g=this.l=0;this.j=Ob();this.T=this.X=this.U=this.Z=this.aa=this.h=65536;this.K=this.F=this.A=0;this.i=new Int32Array(8);this.cb=new Int32Array(8);this.o=new Int32Array(8);this.da=254;this.D=-1;this.ba=this.error=this.N=0;Za(a.C,4276092928,1048576,b=>{var c=b&3;return this.Gf(b&-4)>>8*c&255},()=>{},b=>this.Gf(b),(b,c)=>this.Ca(b,c))}n=ke.prototype;
n.Gf=function(a){a=a-4276092928|0;switch(a){case 32:return this.B;case 48:return 327700;case 128:return this.A;case 208:return this.N;case 224:return this.D;case 240:return this.da;case 256:case 272:case 288:case 304:case 320:case 336:case 352:case 368:return this.cb[a-256>>4];case 384:case 400:case 416:case 432:case 448:case 464:case 480:case 496:return this.o[a-384>>4];case 512:case 528:case 544:case 560:case 576:case 592:case 608:case 624:return this.i[a-512>>4];case 640:return this.ba;case 768:return this.F;
case 784:return this.K;case 800:return this.h;case 816:return this.aa;case 832:return this.Z;case 848:return this.U;case 864:return this.X;case 880:return this.T;case 992:return this.la;case 896:return this.l;case 912:return this.g;default:return 0}};
n.Ca=function(a,b){switch(a-4276092928|0){case 32:this.B=b;break;case 128:this.A=b&255;Xd(this);break;case 176:b=Ud(this.cb);if(-1!==b){Vd(this.cb,b);if(this.o[b>>5]>>(b&31)&1){a=this.s.u.td;for(var c=0;24>c;c++){var d=a.g[c];(d&255)===b&&d&16384&&(a.g[c]&=-16385,le(a,c))}}Xd(this)}break;case 208:this.N=b&4278190080;break;case 224:this.D=b|16777215;break;case 240:this.da=b;break;case 640:this.ba=this.error;this.error=0;break;case 768:a=b&255;c=b>>8&7;d=b>>15&1;var e=b>>18&3;this.F=b&-4097;0===e?me(this,
a,c,d):1===e?me(this,a,0,d):2===e&&me(this,a,c,d);break;case 784:this.K=b;break;case 800:this.h=b;break;case 816:this.aa=b;break;case 832:this.Z=b;break;case 848:this.U=b;break;case 864:this.X=b;break;case 880:this.T=b;break;case 992:this.la=b;b=b&3|(b&8)>>1;this.na=7===b?0:b+1;break;case 896:this.l=b>>>0,this.g=b>>>0,this.j=Ob()}};
n.Jc=function(a){if(0===this.g)return 100;const b=1E6/(1<<this.na);a=(a-this.j)*b>>>0;this.j+=a/b;this.g-=a;0>=this.g&&(a=this.h&393216,131072===a?(this.g%=this.l,0>=this.g&&(this.g+=this.l),0===(this.h&65536)&&me(this,this.h&255,0,!1)):0===a&&(this.g=0,0===(this.h&65536)&&me(this,this.h&255,0,!1)));return Math.max(0,this.g/b)};function me(a,b,c,d){5===c||4===c||a.i[b>>5]>>(b&31)&1||(Wd(a.i,b),d?Wd(a.o,b):Vd(a.o,b),Xd(a))}
function Xd(a){var b=Ud(a.i);-1!==b&&(Ud(a.cb)>=b||(b&240)<=(a.A&240)||a.s.Sd())}n.ja=function(){var a=[];a[0]=this.B;a[1]=this.la;a[2]=this.na;a[3]=this.l;a[4]=this.g;a[5]=this.j;a[6]=this.h;a[7]=this.Z;a[8]=this.U;a[9]=this.X;a[10]=this.T;a[11]=this.A;a[12]=this.F;a[13]=this.K;a[14]=this.i;a[15]=this.cb;a[16]=this.o;a[17]=this.da;a[18]=this.D;a[19]=this.N;a[20]=this.error;a[21]=this.ba;a[22]=this.aa;return a};
n.J=function(a){this.B=a[0];this.la=a[1];this.na=a[2];this.l=a[3];this.g=a[4];this.j=a[5];this.h=a[6];this.Z=a[7];this.U=a[8];this.X=a[9];this.T=a[10];this.A=a[11];this.F=a[12];this.K=a[13];this.i=a[14];this.cb=a[15];this.o=a[16];this.da=a[17];this.D=a[18];this.N=a[19];this.error=a[20];this.ba=a[21];this.aa=a[22]||65536};function Wd(a,b){a[b>>5]|=1<<(b&31)}function Vd(a,b){a[b>>5]&=~(1<<(b&31))}function Ud(a){for(var b=7;0<=b;b--){var c=a[b];if(c)return ha(c>>>0)|b<<5}return-1};function ne(a){this.s=a;this.g=new Int32Array(24);this.o=new Int32Array(24);for(var b=0;b<this.g.length;b++)this.g[b]=65536;this.i=this.h=this.l=this.j=0;Za(a.C,4273995776,131072,c=>{c=c-4273995776|0;return 16<=c&&20>c?(c-=16,this.read(this.j)>>8*c&255):0},()=>{},c=>{c=c-4273995776|0;return 0===c?this.j:16===c?this.read(this.j):0},(c,d)=>{c=c-4273995776|0;0===c?this.j=d:16===c&&this.write(this.j,d)})}
function le(a,b){var c=1<<b;if(0!==(a.h&c)){var d=a.g[b];if(0===(d&65536)){var e=d>>8&7;if(0===(d&32768))a.h&=~c;else if(a.g[b]|=16384,d&16384)return;0!==e&&1!==e||me(a.s.u.Ne,d&255,e,32768===(d&32768));a.g[b]&=-4097}}}ne.prototype.read=function(a){if(0===a)return this.l<<24;if(1===a)return 1507345;if(2===a)return this.l<<24;if(16<=a&&64>a){var b=a-16>>1;return a&1?this.o[b]:this.g[b]}return 0};
ne.prototype.write=function(a,b){if(0===a)this.l=b>>>24&15;else if(1!==a&&2!==a&&16<=a&&64>a){var c=a-16>>1;a&1?this.o[c]=b&4278190080:(this.g[c]=b&110591|this.g[c]&-110592,le(this,c))}};ne.prototype.ja=function(){var a=[];a[0]=this.g;a[1]=this.o;a[2]=this.j;a[3]=this.l;a[4]=this.h;a[5]=this.i;return a};ne.prototype.J=function(a){this.g=a[0];this.o=a[1];this.j=a[2];this.l=a[3];this.h=a[4];this.i=a[5]};function oe(a){this.s=a;var b=a.C;pe(a.u.eb,{fb:56,R:[134,128,19,113,7,0,128,2,8,0,128,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,0,0],Ob:[],name:"acpi"});this.g=this.h=0;this.status=1;this.Df=this.ve=0;this.i=qe(this,Ob());this.yc=new Uint8Array(4);x(b,45056,this,void 0,function(){return this.ve});u(b,45056,this,void 0,function(c){this.ve&=~c});x(b,45058,this,void 0,function(){return this.Df});u(b,45058,this,void 0,function(c){this.Df=
c});x(b,45060,this,void 0,function(){return this.status});u(b,45060,this,void 0,function(c){this.status=c});x(b,45064,this,void 0,void 0,function(){return qe(this,Ob())&16777215});x(b,45024,this,function(){return this.yc[0]});x(b,45025,this,function(){return this.yc[1]});x(b,45026,this,function(){return this.yc[2]});x(b,45027,this,function(){return this.yc[3]});u(b,45024,this,function(c){this.yc[0]=c});u(b,45025,this,function(c){this.yc[1]=c});u(b,45026,this,function(c){this.yc[2]=c});u(b,45027,this,
function(c){this.yc[3]=c})}oe.prototype.Jc=function(a){a=qe(this,a);var b=0!==((a^this.i)&8388608);this.Df&1&&b?(this.ve|=1,this.s.Wa(9)):Eb(this.s,9);this.i=a;return 100};function qe(a,b){b=Math.round(3579.545*b);b===a.h?3579.545>a.g&&a.g++:a.h+a.g<=b&&(a.g=0,a.h=b);return a.h+a.g}oe.prototype.ja=function(){var a=[];a[0]=this.status;a[1]=this.ve;a[2]=this.Df;a[3]=this.yc;return a};oe.prototype.J=function(a){this.status=a[0];this.ve=a[1];this.Df=a[2];this.yc=a[3]};function re(a,b,c){this.v=c;this.s=a;this.h=4;this.vd=this.nd=0;this.pe=96;this.Uc=this.sf=0;this.Vc=1;this.ra=this.tg=this.Ya=this.mg=0;this.input=[];switch(b){case 1016:this.g=0;this.ra=4;break;case 760:this.g=1;this.ra=3;break;case 1E3:this.g=2;this.ra=4;break;case 744:this.ra=this.g=3;break;default:this.g=0,this.ra=4}this.v.register("serial"+this.g+"-input",function(d){this.input.push(d);this.pe|=1;this.sf&1?se(this,12):se(this,4)},this);this.v.register("serial"+this.g+"-modem-status-input",function(d){te(this,
d)},this);this.v.register("serial"+this.g+"-carrier-detect-input",function(d){te(this,d?this.Ya|136:this.Ya&-137)},this);this.v.register("serial"+this.g+"-ring-indicator-input",function(d){te(this,d?this.Ya|68:this.Ya&-69)},this);this.v.register("serial"+this.g+"-data-set-ready-input",function(d){te(this,d?this.Ya|34:this.Ya&-35)},this);this.v.register("serial"+this.g+"-clear-to-send-input",function(d){te(this,d?this.Ya|17:this.Ya&-18)},this);a=a.C;u(a,b,this,function(d){ue(this,d)},function(d){ue(this,
d&255);ue(this,d>>8)});u(a,b|1,this,function(d){this.vd&128?this.nd=this.nd&255|d<<8:(0===(this.Uc&2)&&d&2&&se(this,2),this.Uc=d&15,ve(this))});x(a,b,this,function(){if(this.vd&128)return this.nd&255;let d=0;0!==this.input.length&&(d=this.input.shift());0===this.input.length&&(this.pe&=-2,we(this,12),we(this,4));return d});x(a,b|1,this,function(){return this.vd&128?this.nd>>8:this.Uc&15});x(a,b|2,this,function(){var d=this.Vc&15;2===this.Vc&&we(this,2);this.sf&1&&(d|=192);return d});u(a,b|2,this,
function(d){this.sf=d});x(a,b|3,this,function(){return this.vd});u(a,b|3,this,function(d){this.vd=d});x(a,b|4,this,function(){return this.mg});u(a,b|4,this,function(d){this.mg=d});x(a,b|5,this,function(){return this.pe});u(a,b|5,this,function(){});x(a,b|6,this,function(){return this.Ya&=240});u(a,b|6,this,function(d){te(this,d)});x(a,b|7,this,function(){return this.tg});u(a,b|7,this,function(d){this.tg=d})}
re.prototype.ja=function(){var a=[];a[0]=this.h;a[1]=this.nd;a[2]=this.vd;a[3]=this.pe;a[4]=this.sf;a[5]=this.Uc;a[6]=this.Vc;a[7]=this.mg;a[8]=this.Ya;a[9]=this.tg;a[10]=this.ra;return a};re.prototype.J=function(a){this.h=a[0];this.nd=a[1];this.vd=a[2];this.pe=a[3];this.sf=a[4];this.Uc=a[5];this.Vc=a[6];this.mg=a[7];this.Ya=a[8];this.tg=a[9];this.ra=a[10]};
function ve(a){a.h&4096&&a.Uc&1?(a.Vc=12,a.s.Wa(a.ra)):a.h&16&&a.Uc&1?(a.Vc=4,a.s.Wa(a.ra)):a.h&4&&a.Uc&2?(a.Vc=2,a.s.Wa(a.ra)):a.h&1&&a.Uc&8?(a.Vc=0,a.s.Wa(a.ra)):(a.Vc=1,Eb(a.s,a.ra))}function se(a,b){a.h|=1<<b;ve(a)}function we(a,b){a.h&=~(1<<b);ve(a)}function ue(a,b){a.vd&128?a.nd=a.nd&-256|b:(se(a,2),a.v.send("serial"+a.g+"-output-byte",b))}function te(a,b){let c=(a.Ya^b)>>4;c|=a.Ya&15;a.Ya=b;a.Ya|=c};function xe(a){this.cc=new Uint8Array(4);this.g=new Uint8Array(4);this.te=new Uint8Array(4);this.ue=new Uint8Array(4);this.se=new Int32Array(this.cc.buffer);new Int32Array(this.g.buffer);this.ai=new Int32Array(this.te.buffer);this.ci=new Int32Array(this.ue.buffer);this.oc=[];this.u=[];this.s=a;for(var b=0;256>b;b++)this.oc[b]=void 0,this.u[b]=void 0;this.C=a.C;u(a.C,3324,this,function(c){ye(this,this.se[0],c)},function(c){ze(this,this.se[0],c)},function(c){var d=this.se[0],e=d>>8&65535,f=d&255;d=
this.oc[e];e=this.u[e];if(d)if(16<=f&&40>f)if(e=e.Ob[f-16>>2]){f>>=2;var h=d[f]&1;-1===(c|3|e.size-1)?(c=~(e.size-1)|h,0===h&&(d[f]=c)):0===h&&(d[f]=e.$h);1===h&&(Ae(this,e,d[f]&65534,c&65534),d[f]=c|1)}else d[f>>2]=0;else 48===f?d[f>>2]=e.bi?-1===(c|2047)?-e.bi|0:e.Tj|0:0:4!==f&&(d[f>>>2]=c)});u(a.C,3325,this,function(c){ye(this,this.se[0]+1|0,c)});u(a.C,3326,this,function(c){ye(this,this.se[0]+2|0,c)},function(c){ze(this,this.se[0]+2|0,c)});u(a.C,3327,this,function(c){ye(this,this.se[0]+3|0,c)});
a.C.Be(3324,this,function(){return this.te[0]},function(){return this.te[1]},function(){return this.te[2]},function(){return this.te[3]});a.C.Be(3320,this,function(){return this.ue[0]},function(){return this.ue[1]},function(){return this.ue[2]},function(){return this.ue[3]});a.C.jd(3320,this,function(c){this.cc[0]=c&252},function(c){2===(this.cc[1]&6)&&6===(c&6)?Be(a):this.cc[1]=c},function(c){this.cc[2]=c},function(c){this.cc[3]=c;c=this.cc[0]&252;var d=this.oc[this.cc[2]<<8|this.cc[1]];void 0!==
d?(this.ci[0]=-2147483648,this.ai[0]=c<d.byteLength?d[c>>2]:0):(this.ai[0]=-1,this.ci[0]=0)});pe(this,{fb:0,R:[134,128,55,18,0,0,0,0,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0],Ob:[],name:"82441FX PMC"});this.i={fb:8,R:[134,128,0,112,7,0,0,2,0,0,1,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ob:[],name:"82371SB PIIX3 ISA"};
this.j=pe(this,this.i);this.h=new Uint8Array(this.j.buffer)}xe.prototype.ja=function(){for(var a=[],b=0;256>b;b++)a[b]=this.oc[b];a[256]=this.cc;a[257]=this.g;a[258]=this.te;a[259]=this.ue;return a};xe.prototype.J=function(a){for(var b=0;256>b;b++){var c=this.u[b],d=a[b];if(c&&d){for(var e=0;e<c.Ob.length;e++){var f=d[4+e];if(f&1){var h=c.Ob[e];Ae(this,h,h.$h&65534,f&65534)}}this.oc[b].set(d)}}this.cc.set(a[256]);this.g.set(a[257]);this.te.set(a[258]);this.ue.set(a[259])};
function ye(a,b,c){var d=b&255;(new Uint8Array(a.oc[b>>8&65535].buffer))[d]=c}function ze(a,b,c){var d=b&255;a=new Uint16Array(a.oc[b>>8&65535].buffer);!a||16<=d&&44>d||(a[d>>>1]=c)}function pe(a,b){var c=b.fb,d=new Int32Array(64);d.set(new Int32Array((new Uint8Array(b.R)).buffer));a.oc[c]=d;a.u[c]=b;c=d.slice(4,10);for(var e=0;e<b.Ob.length;e++){var f=b.Ob[e];if(f){var h=c[e],g=h&1;f.$h=h;f.entries=[];if(0!==g)for(h&=-2,g=0;g<f.size;g++)f.entries[g]=a.C.ports[h+g]}}return d}
function Ae(a,b,c,d){for(var e=b.size,f=a.C.ports,h=0;h<e;h++){4096<=c+h&&(f[c+h]=Ya(a.C));var g=b.entries[h];4096<=d+h&&(f[d+h]=g)}}xe.prototype.Sa=function(a){this.s.Wa(this.h[96+((this.oc[a][15]>>8&255)-1+((a>>3)-1&255)&3)])};function Ce(a,b){Eb(a.s,a.h[96+((a.oc[b][15]>>8&255)+(b>>3&255)-2&3)])};function De(a,b,c){a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5]);a[6]===b[0]&&a[7]===b[1]&&a[8]===b[2]&&a[9]===b[3]&&a[10]===b[4]&&a[11]===b[5]&&(a[6]=c[0],a[7]=c[1],a[8]=c[2],a[9]=c[3],a[10]=c[4],a[11]=c[5]);var d=a[12]<<8|a[13];if(2048===d){if(a=a.subarray(14),4===a[0]>>4&&17===a[9]&&(a=a.subarray(20),d=a[2]<<8|a[3],67===(a[0]<<8|a[1])||67===d)){const e=a.subarray(8);if(1669485411===(e[236]<<24|e[237]<<
16|e[238]<<8|e[239]))for(e[28]===b[0]&&e[29]===b[1]&&e[30]===b[2]&&e[31]===b[3]&&e[32]===b[4]&&e[33]===b[5]&&(e[28]=c[0],e[29]=c[1],e[30]=c[2],e[31]=c[3],e[32]=c[4],e[33]=c[5],a[6]=a[7]=0),d=240;d<e.length;){const f=e[d++];if(255===f)break;const h=e[d++];61===f&&1===e[d+0]&&e[d+1]===b[0]&&e[d+2]===b[1]&&e[d+3]===b[2]&&e[d+4]===b[3]&&e[d+5]===b[4]&&e[d+6]===b[5]&&(e[d+1]=c[0],e[d+2]=c[1],e[d+3]=c[2],e[d+4]=c[3],e[d+5]=c[4],e[d+6]=c[5],a[6]=a[7]=0);d+=h}}}else 2054===d&&(a=a.subarray(14),a[8]===b[0]&&
a[9]===b[1]&&a[10]===b[2]&&a[11]===b[3]&&a[12]===b[4]&&a[13]===b[5]&&(a[8]=c[0],a[9]=c[1],a[10]=c[2],a[11]=c[3],a[12]=c[4],a[13]=c[5]))}function Ee(a){return[a[0].toString(16).padStart(2,"0"),a[1].toString(16).padStart(2,"0"),a[2].toString(16).padStart(2,"0"),a[3].toString(16).padStart(2,"0"),a[4].toString(16).padStart(2,"0"),a[5].toString(16).padStart(2,"0")].join(":")}
function Je(a,b,c,d){this.s=a;this.eb=a.u.eb;this.id=0;this.ye=c;this.Mb=d;this.v=b;this.v.register("net"+this.id+"-receive",function(e){this.Ga(e)},this);this.port=768+256*this.id;this.name="ne2k";this.R=[236,16,41,128,3,1,0,0,0,0,0,2,0,0,0,0,this.port&255|1,this.port>>8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,184,254,0,0,0,0,0,0,0,0,0,1,0,0];this.fb=(0===this.id?5:7+this.id)<<3;this.Ob=[{size:32}];this.gg=this.cb=0;this.ub=1;this.yg=this.Fe=this.dc=this.kf=0;this.memory=
new Uint8Array(32768);this.mh=this.Ye=0;this.lh=1;this.ma=new Uint8Array([0,34,21,255*Math.random()|0,255*Math.random()|0,255*Math.random()|0]);this.v.send("net"+this.id+"-mac",Ee(this.ma));this.wd=Uint8Array.of(255,255,255,255,255,255,255,255);this.Bf=null;for(b=0;6>b;b++)this.memory[b<<1]=this.memory[b<<1|1]=this.ma[b];this.memory[28]=this.memory[29]=87;this.memory[30]=this.memory[31]=87;this.Ja=0;this.Ec=64;this.qb=128;this.od=this.lc=76;b=a.C;x(b,this.port|0,this,function(){return this.ub});u(b,
this.port|0,this,function(e){this.ub=e;this.ub&1||(e&24&&0===this.dc&&Ke(this,64),e&4&&(e=this.yg<<8,e=this.memory.subarray(e,e+this.Fe),this.Bf&&(e=new Uint8Array(e),De(e,this.Bf,this.ma)),this.v.send("net"+this.id+"-send",e),this.v.send("eth-transmit-end",[e.length]),this.ub&=-5,Ke(this,2)))});x(b,this.port|13,this,function(){return 1===O(this)?this.wd[5]:0});x(b,this.port|14,this,function(){return 1===O(this)?this.wd[6]:0},function(){return 0});x(b,this.port|15,this,function(){return 1===O(this)?
this.wd[7]:0});x(b,this.port|31,this,function(){Ke(this,128);return 0});u(b,this.port|31,this,function(){});x(b,this.port|1,this,function(){var e=O(this);return 0===e?this.Ec:1===e?this.ma[0]:2===e?this.Ec:0});u(b,this.port|1,this,function(e){var f=O(this);0===f?this.Ec=e:1===f&&(this.ma[0]=e)});x(b,this.port|2,this,function(){var e=O(this);return 0===e?this.qb:1===e?this.ma[1]:2===e?this.qb:0});u(b,this.port|2,this,function(e){var f=O(this);0===f?(e>this.memory.length>>8&&(e=this.memory.length>>
8),this.qb=e):1===f&&(this.ma[1]=e)});x(b,this.port|7,this,function(){var e=O(this);return 0===e?this.cb:1===e?this.lc:0});u(b,this.port|7,this,function(e){var f=O(this);0===f?(this.cb&=~e,Le(this)):1===f&&(this.lc=e)});u(b,this.port|13,this,function(e){0===O(this)&&(this.mh=e)});u(b,this.port|14,this,function(e){0===O(this)&&(this.kf=e)});x(b,this.port|10,this,function(){var e=O(this);return 0===e?80:1===e?this.wd[2]:0});u(b,this.port|10,this,function(e){0===O(this)&&(this.dc=this.dc&65280|e&255)});
x(b,this.port|11,this,function(){var e=O(this);return 0===e?67:1===e?this.wd[3]:0});u(b,this.port|11,this,function(e){0===O(this)&&(this.dc=this.dc&255|e<<8&65280)});x(b,this.port|8,this,function(){var e=O(this);return 0===e?this.Ja&255:1===e?this.wd[0]:0});u(b,this.port|8,this,function(e){0===O(this)&&(this.Ja=this.Ja&65280|e&255)});x(b,this.port|9,this,function(){var e=O(this);return 0===e?this.Ja>>8&255:1===e?this.wd[1]:0});u(b,this.port|9,this,function(e){0===O(this)&&(this.Ja=this.Ja&255|e<<
8&65280)});u(b,this.port|15,this,function(e){0===O(this)&&(this.gg=e,Le(this))});x(b,this.port|3,this,function(){var e=O(this);return 0===e?this.od:1===e?this.ma[2]:0});u(b,this.port|3,this,function(e){var f=O(this);0===f?this.od=e:1===f&&(this.ma[2]=e)});x(b,this.port|4,this,function(){var e=O(this);return 0===e?this.lh:1===e?this.ma[3]:0});u(b,this.port|4,this,function(e){var f=O(this);0===f?this.yg=e:1===f&&(this.ma[3]=e)});x(b,this.port|5,this,function(){var e=O(this);return 0===e?0:1===e?this.ma[4]:
0});u(b,this.port|5,this,function(e){var f=O(this);0===f?this.Fe=this.Fe&-256|e:1===f&&(this.ma[4]=e)});x(b,this.port|6,this,function(){var e=O(this);return 0===e?0:1===e?this.ma[5]:0});u(b,this.port|6,this,function(e){var f=O(this);0===f?this.Fe=this.Fe&255|e<<8:1===f&&(this.ma[5]=e)});x(b,this.port|12,this,function(){var e=O(this);return 0===e?9:1===e?this.wd[4]:0});u(b,this.port|12,this,function(e){0===O(this)&&(this.Ye=e)});x(b,this.port|16,this,this.nj,this.Ah,this.mj);u(b,this.port|16,this,
this.Bh,this.Bh,this.oj);pe(a.u.eb,this)}n=Je.prototype;n.ja=function(){var a=[];a[0]=this.cb;a[1]=this.gg;a[2]=this.ub;a[3]=this.kf;a[4]=this.dc;a[5]=this.Fe;a[6]=this.yg;a[7]=this.Ja;a[8]=this.Ec;a[9]=this.lc;a[10]=this.od;a[11]=this.qb;a[12]=this.Ye;a[13]=this.mh;a[14]=this.lh;a[15]=this.ma;a[16]=this.memory;return a};
n.J=function(a){this.cb=a[0];this.gg=a[1];this.ub=a[2];this.kf=a[3];this.dc=a[4];this.Fe=a[5];this.yg=a[6];this.Ja=a[7];this.Ec=a[8];this.lc=a[9];this.od=a[10];this.qb=a[11];this.Ye=a[12];this.mh=a[13];this.lh=a[14];this.ye?(this.ma=a[15],this.memory=a[16]):this.Mb&&(this.Bf=a[15],this.memory=a[16]);this.v.send("net"+this.id+"-mac",Ee(this.ma))};function Ke(a,b){a.cb|=b;Le(a)}function Le(a){a.gg&a.cb?a.eb.Sa(a.fb):Ce(a.eb,a.fb)}
function Me(a,b){if(16>=a.Ja||16384<=a.Ja&&32768>a.Ja)a.memory[a.Ja]=b;a.Ja++;a.dc--;a.Ja>=a.qb<<8&&(a.Ja+=a.Ec-a.qb<<8);0===a.dc&&Ke(a,64)}n.Bh=function(a){Me(this,a);this.kf&1&&Me(this,a>>8)};n.oj=function(a){Me(this,a);Me(this,a>>8);Me(this,a>>16);Me(this,a>>24)};function Ne(a){let b=0;32768>a.Ja&&(b=a.memory[a.Ja]);a.Ja++;a.dc--;a.Ja>=a.qb<<8&&(a.Ja+=a.Ec-a.qb<<8);0===a.dc&&Ke(a,64);return b}n.nj=function(){return this.Ah()&255};n.Ah=function(){return this.kf&1?Ne(this)|Ne(this)<<8:Ne(this)};
n.mj=function(){return Ne(this)|Ne(this)<<8|Ne(this)<<16|Ne(this)<<24};
n.Ga=function(a){if(!(this.ub&1)&&(this.v.send("eth-receive-end",[a.length]),this.Ye&16||this.Ye&4&&255===a[0]&&255===a[1]&&255===a[2]&&255===a[3]&&255===a[4]&&255===a[5]||!(this.Ye&8&&1===(a[0]&1)||a[0]!==this.ma[0]||a[1]!==this.ma[1]||a[2]!==this.ma[2]||a[3]!==this.ma[3]||a[4]!==this.ma[4]||a[5]!==this.ma[5]))){this.Bf&&(a=new Uint8Array(a),De(a,this.ma,this.Bf));var b=this.lc<<8,c=Math.max(60,a.length)+4,d=b+4,e=this.lc+1+(c>>8);if(!((this.od>this.lc?this.od-this.lc:this.qb-this.lc+this.od-this.Ec)<
1+(c>>8)&&0!==this.od)){if(b+c>this.qb<<8){var f=(this.qb<<8)-d;this.memory.set(a.subarray(0,f),d);this.memory.set(a.subarray(f),this.Ec<<8)}else this.memory.set(a,d),60>a.length&&this.memory.fill(0,d+a.length,d+60);e>=this.qb&&(e+=this.Ec-this.qb);this.memory[b]=1;this.memory[b+1]=e;this.memory[b+2]=c;this.memory[b+3]=c>>8;this.lc=e;Ke(this,1)}}};function O(a){return a.ub>>6&3};function Oe(a,b){this.v=b;this.rows=25;this.cols=80;this.ports=4;b=[{La:16,Za:0},{La:16,Za:1},{La:16,Za:2},{La:16,Za:3}];for(let c=1;c<this.ports;++c)b.push({La:16,Za:0}),b.push({La:8,Za:1});this.O=new Pe(a,{name:"virtio-console",fb:96,je:4163,Kf:3,he:{Qa:47104,$:b,features:[0,1,32],Tg:()=>{}},notification:{Qa:47360,wg:!1,fg:[()=>{},c=>{const d=this.O.$[c],e=3<c?c-3>>1:0;for(;Qe(d);){const f=Re(d),h=new Uint8Array(f.Lb);Se(f,h);this.v.send("virtio-console"+e+"-output-bytes",h);Te(this,c,f)}},c=>{if(2===
c)for(c=this.O.$[c];Ue(c)>c.size-2;)Re(c)},c=>{if(3===c)for(var d=this.O.$[c];Qe(d);){var e=Re(d),f=new Uint8Array(e.Lb);Se(e,f);var h=K(["w","h","h"],f,{offset:0});f=h[0];h=h[1];Te(this,c,e);switch(h){case 0:for(f=0;f<this.ports;++f)Ve(this,f,1,0);break;case 3:Te(this,c,e);Ve(this,f,4,1);h=f;var g="virtio-"+f;e=Re(this.O.$[2]);g=(new TextEncoder).encode(g);const k=new Uint8Array(g.length+9);G(["w","h","h"],[h,7,1],k,0);for(h=0;h<g.length;++h)k[h+8]=g[h];k[8+g.length]=0;this.md(2,e,k);Ve(this,f,6,
1);break;case 6:Te(this,c,e);0===f&&We(this,f);break;default:return}}}]},Kb:{Qa:46848},lf:{Qa:46592,Hc:[{bytes:2,name:"cols",read:()=>this.cols,write:()=>{}},{bytes:2,name:"rows",read:()=>this.rows,write:()=>{}},{bytes:4,name:"max_nr_ports",read:()=>this.ports,write:()=>{}},{bytes:4,name:"emerg_wr",read:()=>0,write:()=>{}}]}});for(let c=0;c<this.ports;++c){const d=0===c?0:2*c+2;this.v.register("virtio-console"+c+"-input-bytes",function(e){var f=this.O.$[d];Qe(f)&&(f=Re(f),this.md(d,f,new Uint8Array(e)))},
this);this.v.register("virtio-console"+c+"-resize",function(e){0===c&&(this.cols=e[0],this.rows=e[1]);Xe(this.O.$[2])&&Qe(this.O.$[2])&&We(this,c,e[0],e[1])},this)}}function We(a,b,c,d){d=d||a.rows;c=c||a.cols;const e=Re(a.O.$[2]),f=new Uint8Array(12);G(["w","h","h","h","h"],[b,5,0,d,c],f,0);a.md(2,e,f)}Oe.prototype.ja=function(){const a=[];a[0]=this.O;a[1]=this.rows;a[2]=this.cols;a[3]=this.ports;return a};Oe.prototype.J=function(a){this.O.J(a[0]);this.rows=a[1];this.cols=a[2];this.ports=a[3]};
Oe.prototype.reset=function(){this.O.reset()};function Ve(a,b,c,d){const e=Re(a.O.$[2]),f=new Uint8Array(8);G(["w","h","h"],[b,c,d],f,0);a.md(2,e,f)}Oe.prototype.md=function(a,b,c){Ye(b,c);Ze(this.O.$[a],b);$e(this.O.$[a])};function Te(a,b,c){Ye(c,new Uint8Array(0));Ze(a.O.$[b],c);$e(a.O.$[b])};function af(a,b){this.s=a;this.v=b;this.reset();this.v.register("keyboard-code",function(c){this.pf&&(this.wa.push(c),this.Sa())},this);this.v.register("mouse-click",function(c){this.wf&&this.Ge&&(this.re=c[0]|c[2]<<1|c[1]<<2,this.rd&&bf(this,0,0))},this);this.v.register("mouse-delta",function(c){var d=c[1];this.wf&&this.Ge&&(this.Bc+=1*c[0],this.Cc+=1*d,this.rd&&(c=this.Bc|0,d=this.Cc|0,c||d))&&(this.Bc-=c,this.Cc-=d,bf(this,c,d))},this);this.v.register("mouse-wheel",function(c){this.Kc-=c[0];this.Kc-=
2*c[1];this.Kc=Math.min(7,Math.max(-8,this.Kc));bf(this,0,0)},this);x(a.C,96,this,this.fl);x(a.C,100,this,this.hl);u(a.C,96,this,this.gl);u(a.C,100,this,this.il)}n=af.prototype;n.reset=function(){this.Ge=this.rd=!1;this.wf=!0;this.re=this.Cc=this.Bc=0;this.Da=!0;this.X=this.U=this.K=this.T=this.Z=this.N=this.pf=!1;this.wa=new sa(1024);this.o=0;this.l=100;this.j=this.i=0;this.D=!1;this.Kc=0;this.la=4;this.B=!1;this.g=new sa(1024);this.F=this.A=!1;this.h=5;this.na=0;this.ba=this.aa=this.da=!1};
n.ja=function(){var a=[];a[0]=this.rd;a[1]=this.Ge;a[2]=this.wf;a[3]=this.Bc;a[4]=this.Cc;a[5]=this.re;a[6]=this.Da;a[7]=this.pf;a[8]=this.N;a[9]=this.Z;a[10]=this.T;a[11]=this.K;a[12]=this.U;a[13]=this.X;a[15]=this.o;a[16]=this.l;a[17]=this.la;a[18]=this.B;a[20]=this.h;a[21]=this.da;a[22]=this.aa;a[23]=this.na;a[24]=this.ba;a[25]=this.j;a[26]=this.i;a[27]=this.D;return a};
n.J=function(a){this.rd=a[0];this.Ge=a[1];this.wf=a[2];this.Bc=a[3];this.Cc=a[4];this.re=a[5];this.Da=a[6];this.pf=a[7];this.N=a[8];this.Z=a[9];this.T=a[10];this.K=a[11];this.U=a[12];this.X=a[13];this.o=a[15];this.l=a[16];this.la=a[17];this.B=a[18];this.h=a[20];this.da=a[21];this.aa=a[22];this.na=a[23];this.ba=a[24];this.j=a[25]||0;this.i=a[26]||0;this.D=a[27]||!1;this.F=this.A=!1;this.wa.clear();this.g.clear();this.v.send("mouse-enable",this.Ge)};
n.Sa=function(){this.A||(this.wa.length?cf(this):this.g.length&&df(this))};function df(a){a.A=!0;a.F=!0;a.h&2&&(Eb(a.s,12),a.s.Wa(12))}function cf(a){a.A=!0;a.F=!1;a.h&1&&(Eb(a.s,1),a.s.Wa(1))}function bf(a,b,c){a.g.push((0>c)<<5|(0>b)<<4|8|a.re);a.g.push(b);a.g.push(c);4===a.j?(a.g.push(0|a.Kc&15),a.Kc=0):3===a.j&&(a.g.push(a.Kc&255),a.Kc=0);a.Sa()}
n.fl=function(){this.A=!1;if(!this.wa.length&&!this.g.length)return this.o;this.F?(Eb(this.s,12),this.o=this.g.shift()):(Eb(this.s,1),this.o=this.wa.shift());(this.wa.length||this.g.length)&&this.Sa();return this.o};n.hl=function(){var a=16;this.A&&(a|=1);this.F&&(a|=32);return a};
n.gl=function(a){if(this.aa)this.h=a,this.aa=!1;else if(this.da)this.da=!1,this.g.clear(),this.g.push(a),df(this);else if(this.Z){this.Z=!1;this.g.clear();this.g.push(250);this.l=a;switch(this.i){case -1:60===a?(this.D=!0,this.i=0):(this.D=!1,this.i=200===a?1:0);break;case 0:200===a&&(this.i=1);break;case 1:this.i=100===a?2:200===a?3:0;break;case 2:80===a&&(this.j=3);this.i=-1;break;case 3:80===a&&(this.j=4),this.i=-1}this.l||(this.l=100);df(this)}else if(this.X)this.X=!1,this.g.clear(),this.g.push(250),
this.la=3<a?4:1<<a,df(this);else if(this.T)this.T=!1,this.wa.push(250),cf(this);else if(this.K)this.K=!1,this.wa.push(250),cf(this),a||this.wa.push(1);else if(this.U)this.U=!1,this.wa.push(250),cf(this);else if(this.N){if(this.N=!1,this.wf){this.wa.clear();this.g.clear();this.g.push(250);switch(a){case 230:this.B=!1;break;case 231:this.B=!0;break;case 232:this.X=!0;break;case 233:bf(this,0,0);break;case 235:bf(this,0,0);break;case 242:this.g.push(this.j);this.re=this.Bc=this.Cc=0;this.Sa();break;
case 243:this.Z=!0;break;case 244:this.Ge=this.rd=!0;this.v.send("mouse-enable",!0);this.re=this.Bc=this.Cc=0;break;case 245:this.rd=!1;break;case 246:this.rd=!1;this.l=100;this.B=!1;this.la=4;break;case 255:this.g.push(170),this.g.push(0),this.Ge=!0,this.v.send("mouse-enable",!0),this.rd=!1,this.l=100,this.B=!1,this.la=4,this.D||(this.j=0),this.re=this.Bc=this.Cc=0}df(this)}}else if(this.ba)this.ba=!1,this.na=a;else{this.g.clear();this.wa.clear();this.wa.push(250);switch(a){case 237:this.T=!0;break;
case 240:this.K=!0;break;case 242:this.wa.push(171);this.wa.push(131);break;case 243:this.U=!0;break;case 244:this.pf=!0;break;case 245:this.pf=!1;break;case 255:this.wa.clear(),this.wa.push(250),this.wa.push(170),this.wa.push(0)}cf(this)}};
n.il=function(a){switch(a){case 32:this.wa.clear();this.g.clear();this.wa.push(this.h);cf(this);break;case 96:this.aa=!0;break;case 209:this.ba=!0;break;case 211:this.da=!0;break;case 212:this.N=!0;break;case 167:this.h|=32;break;case 168:this.h&=-33;break;case 169:this.wa.clear();this.g.clear();this.wa.push(0);cf(this);break;case 170:this.wa.clear();this.g.clear();this.wa.push(85);cf(this);break;case 171:this.wa.clear();this.g.clear();this.wa.push(0);cf(this);break;case 173:this.h|=16;break;case 174:this.h&=
-17;break;case 254:Be(this.s)}};const ef=DataView.prototype,ff={size:1,get:ef.getUint8,set:ef.setUint8},gf={size:2,get:ef.getUint16,set:ef.setUint16},R={size:4,get:ef.getUint32,set:ef.setUint32},jf=hf([{Vh:R},{fe:ff},{data:ff},{Al:ff},{Ul:ff},{Fl:ff},{Vl:function(a){return{size:a,get:()=>-1}}(7)},{type:gf},{Sl:gf},{Bl:R},{Fh:R},{Uj:R},{sl:R},{flags:R},{Aj:gf},{di:gf},{ei:gf},{Di:gf},{Ei:gf},{Xl:gf}]);console.assert(52===jf.reduce((a,b)=>a+b.size,0));const kf=hf([{type:R},{offset:R},{oh:R},{pg:R},{Ih:R},{Rg:R},{flags:R},{align:R}]);
console.assert(32===kf.reduce((a,b)=>a+b.size,0));const lf=hf([{name:R},{type:R},{flags:R},{Gl:R},{offset:R},{size:R},{link:R},{info:R},{Il:R},{Ol:R}]);console.assert(40===lf.reduce((a,b)=>a+b.size,0));function hf(a){return a.map(function(b){var c=Object.keys(b);console.assert(1===c.length);c=c[0];b=b[c];console.assert(0<b.size);return{name:c,type:b,size:b.size,get:b.get,set:b.set}})}
function mf(a,b){const c={};let d=0;for(const e of b)b=e.get.call(a,d,!0),console.assert(void 0===c[e.name]),c[e.name]=b,d+=e.size;return[c,d]}function nf(a,b,c){const d=[];let e=0;for(var f=0;f<c;f++){const [h,g]=mf(new DataView(a.buffer,a.byteOffset+e,void 0),b);d.push(h);e+=g}return[d,e]};function of(a,b){this.C=a.C;this.s=a;this.Fb=a.u.Fb;this.h=0;this.U=new Uint8Array(10);this.X=0;this.i=null;this.g=new Uint8Array(10);this.T=this.D=this.ba=this.da=this.F=this.o=this.l=this.j=0;this.Z=1;this.K=this.B=0;this.sd=null;b?this.Jf(b):(this.cg(),this.s.u.Gd.ha[16]=64);x(this.C,1008,this,this.Uk);x(this.C,1010,this,this.Vk);x(this.C,1012,this,this.Xk);x(this.C,1013,this,this.Zk);x(this.C,1015,this,this.al);u(this.C,1010,this,this.Wk);u(this.C,1012,this,this.Yk);u(this.C,1013,this,this.$k)}
n=of.prototype;n.cg=function(){this.sd=null;this.aa=this.N=this.A=0;this.K=128};
n.Jf=function(a){var b={[163840]:{type:1,Rb:40,Qb:8,Hb:1},[184320]:{type:1,Rb:40,Qb:9,Hb:1},[204800]:{type:1,Rb:40,Qb:10,Hb:1},[327680]:{type:1,Rb:40,Qb:8,Hb:2},[368640]:{type:1,Rb:40,Qb:9,Hb:2},[409600]:{type:1,Rb:40,Qb:10,Hb:2},[737280]:{type:3,Rb:80,Qb:9,Hb:2},[1228800]:{type:2,Rb:80,Qb:15,Hb:2},[1474560]:{type:4,Rb:80,Qb:18,Hb:2},[1763328]:{type:5,Rb:82,Qb:21,Hb:2},[2949120]:{type:5,Rb:80,Qb:36,Hb:2},512:{type:1,Rb:1,Qb:1,Hb:1}};let c=a.byteLength,d=b[c];d||(c=1474560<a.byteLength?2949120:1474560,
d=b[c],b=new Uint8Array(c),b.set(new Uint8Array(a.buffer)),a=new Ba(b.buffer));this.A=d.Qb;this.N=d.Hb;this.aa=d.Rb;this.sd=a;this.K=128;this.s.u.Gd.ha[16]=d.type<<4};n.ja=function(){var a=[];a[0]=this.h;a[1]=this.U;a[2]=this.X;a[4]=this.g;a[5]=this.j;a[6]=this.l;a[8]=this.o;a[9]=this.F;a[10]=this.da;a[11]=this.ba;a[12]=this.D;a[13]=this.T;a[14]=this.Z;a[15]=this.B;a[16]=this.A;a[17]=this.N;a[18]=this.aa;return a};
n.J=function(a){this.h=a[0];this.U=a[1];this.X=a[2];this.i=a[3];this.g=a[4];this.j=a[5];this.l=a[6];this.o=a[8];this.F=a[9];this.da=a[10];this.ba=a[11];this.D=a[12];this.T=a[13];this.Z=a[14];this.B=a[15];this.A=a[16];this.N=a[17];this.aa=a[18]};n.Uk=function(){return 0};n.Xk=function(){var a=128;this.j<this.l&&(a|=80);0===(this.B&8)&&(a|=32);return a};n.al=function(){return this.K};n.Zk=function(){return this.j<this.l?(Eb(this.s,6),this.g[this.j++]):255};n.Yk=function(a){a&128&&(this.o=192,this.s.Wa(6))};
n.$k=function(a){if(0<this.h)this.U[this.X++]=a,this.h--,0===this.h&&this.i.call(this,this.U);else{switch(a){case 3:this.i=this.Fj;this.h=2;break;case 19:this.i=this.jj;this.h=3;break;case 4:case 20:this.i=this.gj;this.h=1;break;case 5:case 69:case 197:this.i=function(b){pf(this,!0,b)};this.h=8;break;case 6:case 70:case 198:case 230:this.i=function(b){pf(this,!1,b)};this.h=8;break;case 7:this.i=this.ej;this.h=1;break;case 8:this.j=0;this.l=2;this.g[0]=this.o;this.g[1]=this.D;break;case 74:this.i=
this.jl;this.h=1;break;case 15:this.h=2;this.i=this.vh;break;case 14:case 16:this.o=128,this.g[0]=this.o,this.j=0,this.l=1,this.h=0}this.X=0}};n.Vk=function(){return this.B};n.Wk=function(a){!(this.B&4)&&a&4&&(this.o=192,a&8&&this.s.Wa(6));this.B=a};n.gj=function(){this.F=this.sd?0:5;this.j=0;this.l=1;this.g[0]=0};n.vh=function(a){if(0===(a[0]&3)){var b=a[1];a=a[0]>>2&1;b!==this.D&&(this.K=0);this.F=this.sd?0:5;this.o=32;this.D=b;this.T=a}this.Sa()};n.ej=function(a){this.vh([a[0],0])};
function pf(a,b,c){var d=c[2],e=c[1],f=c[3],h=128<<c[4],g=c[5]-c[3]+1,k=((d+a.N*e)*a.A+f-1)*h;a.sd?(a.F=0,b?a.Fb.nf(a.sd,k,g*h,2,a.done.bind(a,c,e,d,f)):Ra(a.Fb,a.sd,k,a.done.bind(a,c,e,d,f))):a.F=5}n.done=function(a,b,c,d,e){e||(d++,d>this.A&&(d=1,c++,c>=this.N&&(c=0,b++)),b!==this.D&&(this.K=0),this.o=32,this.D=b,this.T=c,this.Z=d,this.j=0,this.l=7,this.g[0]=c<<2|32,this.g[1]=0,this.g[2]=0,this.g[3]=b,this.g[4]=c,this.g[5]=d,this.g[6]=a[4],this.Sa())};n.Fj=function(){};n.jj=function(){};
n.jl=function(){this.j=0;this.l=7;this.g[0]=0;this.g[1]=0;this.g[2]=0;this.g[3]=0;this.g[4]=0;this.g[5]=0;this.g[6]=0;this.Sa()};n.Sa=function(){this.B&8&&this.s.Wa(6)};const qf={[70]:{name:"GET CONFIGURATION",flags:0},[74]:{name:"GET EVENT STATUS NOTIFICATION",flags:0},[18]:{name:"INQUIRY",flags:0},[189]:{name:"MECHANISM STATUS",flags:0},[26]:{name:"MODE SENSE (6)",flags:0},[90]:{name:"MODE SENSE (10)",flags:0},[69]:{name:"PAUSE",flags:1},[30]:{name:"PREVENT ALLOW MEDIUM REMOVAL",flags:0},[40]:{name:"READ",flags:1},[37]:{name:"READ CAPACITY",flags:1},[190]:{name:"READ CD",flags:1},[81]:{name:"READ DISK INFORMATION",flags:1},[66]:{name:"READ SUBCHANNEL",flags:1},
[67]:{name:"READ TOC PMA ATIP",flags:1},[82]:{name:"READ TRACK INFORMATION",flags:1},[3]:{name:"REQUEST SENSE",flags:0},[27]:{name:"START STOP UNIT",flags:0},[0]:{name:"TEST UNIT READY",flags:1}};
function rf(a,b,c){this.s=a;this.v=b;this.Hd=this.Pb=void 0;b=c&&c[0][0];const d=c&&c[1][0];if(b||d){b&&(this.Pb=new sf(this,0,c[0],496,1014,14));d&&(this.Hd=new sf(this,1,c[1],368,886,15));c=b?this.Pb.h:0;const e=b?this.Pb.j:0,f=d?this.Hd.h:0,h=d?this.Hd.j:0;this.name="ide";this.fb=240;this.R=[134,128,16,112,5,0,160,2,0,128,1,1,0,0,0,0,c&255|1,c>>8,0,0,e&255|1,e>>8,0,0,f&255|1,f>>8,0,0,h&255|1,h>>8,0,0,1,180,0,0,0,0,0,0,0,0,0,0,67,16,212,130,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Ob=[b?{size:8}:void 0,b?{size:1}:void 0,d?{size:8}:void 0,d?{size:1}:void 0,{size:16}];pe(a.u.eb,this)}Object.seal(this)}rf.prototype.ja=function(){const a=[];a[0]=this.Pb;a[1]=this.Hd;return a};rf.prototype.J=function(a){this.Pb&&this.Pb.J(a[0]);this.Hd&&this.Hd.J(a[1])};
function sf(a,b,c,d,e,f){this.N=b;this.s=a.s;this.v=a.v;this.h=d;this.j=e;this.ra=f;this.name="ide"+b;d=c?c[0]:void 0;c=c?c[1]:void 0;this.jb=new tf(this,0,d?.buffer,d?.ig);this.Gc=new tf(this,1,c?.buffer,c?.ig);this.fa=this.jb;this.o=2;this.l=this.g=this.i=0;a=a.s;x(a.C,this.h|0,this,function(){return uf(this.fa,1)},function(){return uf(this.fa,2)},function(){return uf(this.fa,4)});x(a.C,this.h|1,this,function(){return this.fa.Oa&255});x(a.C,this.h|2,this,function(){return this.fa.ta&255});x(a.C,
this.h|3,this,function(){return this.fa.Xa&255});x(a.C,this.h|4,this,function(){return this.fa.Fa&255});x(a.C,this.h|5,this,function(){return this.fa.Ia&255});x(a.C,this.h|6,this,function(){return this.fa.Re&255});x(a.C,this.h|7,this,function(){const h=this.yi();Eb(this.s,this.ra);return h});u(a.C,this.h|0,this,function(h){vf(this.fa,h,1)},function(h){vf(this.fa,h,2)},function(h){vf(this.fa,h,4)});u(a.C,this.h|1,this,function(h){this.fa.rf=(this.fa.rf<<8|h)&65535});u(a.C,this.h|2,this,function(h){this.fa.ta=
(this.fa.ta<<8|h)&65535});u(a.C,this.h|3,this,function(h){this.fa.Xa=(this.fa.Xa<<8|h)&65535});u(a.C,this.h|4,this,function(h){this.fa.Fa=(this.fa.Fa<<8|h)&65535});u(a.C,this.h|5,this,function(h){this.fa.Ia=(this.fa.Ia<<8|h)&65535});u(a.C,this.h|6,this,function(h){const g=h&16;if(g&&this.fa===this.jb||!g&&this.fa===this.Gc)this.fa=g?this.Gc:this.jb;this.fa.Re=h;this.fa.yf=h>>6&1;this.fa.head=h&15});u(a.C,this.h|7,this,function(h){this.fa.H&=-34;var g=this.fa;if(g.la||144===h)switch(g.D=h,g.Oa=0,h){case 8:g.i=
0;g.g=0;g.h=0;wf(g);U(g);break;case 16:g.Fa=0;g.H=80;U(g);break;case 248:var k=g.j-1;g.Xa=k&255;g.Fa=k>>8&255;g.Ia=k>>16&255;g.Re=g.Re&240|k>>24&15;g.H=80;U(g);break;case 39:k=g.j-1;g.Xa=k&255;g.Fa=k>>8&255;g.Ia=k>>16&255;g.Xa|=k>>24<<8&65280;g.H=80;U(g);break;case 32:g.B?(g.Fa=20,g.Ia=235,xf(g)):yf(g,h);break;case 36:case 41:case 196:g.B?xf(g):yf(g,h);break;case 48:case 52:case 57:case 197:if(g.B)xf(g);else{var l=52===h||57===h;k=zf(g,l);l=Af(g,l);h=48===h||52===h;k*=g.o;l*=g.o;l+k>g.buffer.byteLength?
(g.H=255,U(g)):(g.H=88,Bf(g,k),g.g=h?512:Math.min(k,512*g.U),g.na=l)}break;case 144:g.l.jb.H=80;g.l.jb.Oa=1;U(g.l.jb);g.l.Gc.la&&(g.l.Gc.H=80,g.l.Gc.Oa=1,U(g.l.Gc));break;case 145:g.H=80;U(g);break;case 160:g.B?(Cf(g,12),g.g=12,g.ta=1,g.H=88,U(g)):xf(g);break;case 161:g.B?(Df(g),g.H=88,U(g)):xf(g);break;case 198:g.U=g.ta&255;g.H=80;U(g);break;case 200:case 37:k=37===h;l=zf(g,k);Af(g,k)*g.o+l*g.o>g.buffer.byteLength?(g.H=255,U(g)):(g.H=88,g.l.g|=1);break;case 202:case 53:k=53===h;l=zf(g,k);Af(g,k)*
g.o+l*g.o>g.buffer.byteLength?(g.H=255,U(g)):(g.H=88,g.l.g|=1);break;case 64:g.H=80;U(g);break;case 218:g.B&&(g.buffer||(g.Oa|=2),g.T&&(g.Oa|=32,g.T=!1),g.Oa|=64);g.H=80;U(g);break;case 224:g.H=80;U(g);break;case 225:g.H=80;U(g);break;case 231:g.H=80;U(g);break;case 234:g.H=80;U(g);break;case 236:g.B?(g.Fa=20,g.Ia=235,xf(g)):(Df(g),g.H=88,U(g));break;case 239:g.H=80;U(g);break;case 222:g.H=64;U(g);break;case 245:g.H=80;U(g);break;case 249:xf(g);break;case 0:xf(g);break;default:xf(g)}Eb(this.s,this.ra)});
x(a.C,this.j|0,this,this.yi);u(a.C,this.j|0,this,this.Dl);b=46080+8*b;x(a.C,b|0,this,this.uj,void 0,this.tj);u(a.C,b|0,this,this.Ch,void 0,this.xj);x(a.C,b|2,this,this.vj);u(a.C,b|2,this,this.Dh);x(a.C,b|4,this,void 0,void 0,this.sj);u(a.C,b|4,this,void 0,void 0,this.wj)}n=sf.prototype;n.yi=function(){return this.fa.la?this.fa.H:0};n.Dl=function(a){a&4&&(Eb(this.s,this.ra),wf(this.jb),wf(this.Gc));this.o=a};n.sj=function(){return this.i};n.wj=function(a){this.i=a};n.vj=function(){return this.g};
n.Dh=function(a){this.g&=~(a&6)};n.tj=function(){return this.l|this.g<<16};n.uj=function(){return this.l};n.xj=function(a){this.Ch(a&255);this.Dh(a>>16&255)};n.Ch=function(a){const b=this.l;this.l=a&9;if((b&1)!==(a&1))if(0===(a&1))this.g&=-2;else switch(this.g|=1,this.fa.D){case 200:case 37:Ef(this.fa);break;case 202:case 53:Ff(this.fa);break;case 160:Gf(this.fa);break;default:this.g&=-2,this.g|=2,Hf(this)}};function Hf(a){0===(a.o&2)&&(a.g|=4,a.s.Wa(a.ra))}
n.ja=function(){var a=[];a[0]=this.jb;a[1]=this.Gc;a[2]=this.h;a[3]=this.ra;a[5]=this.j;a[7]=this.name;a[8]=this.o;a[9]=this.i;a[10]=this.g;a[11]=this.fa===this.jb;a[12]=this.l;return a};n.J=function(a){this.jb.J(a[0]);this.Gc.J(a[1]);this.h=a[2];this.ra=a[3];this.j=a[5];this.name=a[7];this.o=a[8];this.i=a[9];this.g=a[10];this.fa=a[11]?this.jb:this.Gc;this.l=a[12]};
function tf(a,b,c,d){this.l=a;this.name=a.name+"."+b;this.v=a.v;this.N=a.N;this.Ua=b;this.s=a.s;this.buffer=null;this.la=d||!!c;this.o=d?2048:512;this.B=d;this.j=0;this.F=this.B?1:0;this.Re=this.head=this.Ia=this.Fa=this.rf=this.Xa=this.ta=this.yf=this.K=this.A=0;this.H=80;this.U=128;this.i=this.Oa=0;this.data=new Uint8Array(65536);this.da=new Uint16Array(this.data.buffer);this.X=new Int32Array(this.data.buffer);this.g=this.h=0;this.D=-1;this.ab=this.na=0;this.Z=new Set;this.Pa=new Set;this.Da=-1;
this.aa=this.ba=0;this.T=!1;If(this,c);Object.seal(this)}function Jf(a){a.B&&a.buffer&&(a.T=!0,a.buffer=null,a.H=89,a.Oa=96,U(a))}n=tf.prototype;n.ug=function(a){this.B&&a&&(If(this,a),this.T=!0)};
function If(a,b){if(b){a.buffer=b;a.B&&(a.H=89,a.Oa=96);a.j=a.buffer.byteLength/a.o;a.j!==(a.j|0)&&(a.j=Math.ceil(a.j));a.B?(a.F=1,a.A=2048):(a.F=16,a.A=63);a.K=a.j/a.F/a.A;a.K!==(a.K|0)&&(a.K=Math.floor(a.K));if(0===a.Ua){b=a.s.u.Gd;b.ha[57]|=1<<4*a.N;b.ha[18]=b.ha[18]&15|240;const c=0===a.N?27:36;b.ha[c]=a.K&255;b.ha[c+1]=a.K>>8&255;b.ha[c+2]=a.F&255;b.ha[c+3]=255;b.ha[c+4]=255;b.ha[c+5]=200;b.ha[c+6]=a.K&255;b.ha[c+7]=a.K>>8&255;b.ha[c+8]=a.A&255}a.l.s&&U(a)}}
function wf(a){a.B?(a.H=0,a.ta=1,a.Oa=1,a.Xa=1,a.Fa=20,a.Ia=235):(a.H=81,a.ta=1,a.Oa=1,a.Xa=1,a.Fa=0,a.Ia=0);for(const b of a.Z)a.Pa.add(b);a.Z.clear()}function U(a){Hf(a.l)}function xf(a){a.Oa=4;a.H=65;U(a)}function Kf(a,b,c){Cf(a,0);a.g=a.h;a.H=65;a.Oa=b<<4;a.ta=a.ta&-8|3;a.ba=b;a.aa=c}n.nf=function(){this.H=80;var a=this.data.subarray(0,this.h);Lf(this,this.D,this.h/512);U(this);this.buffer.set(this.na,a,function(){});Mf(this,this.h)};
function Nf(a,b){var c=(b[7]<<8|b[8])*a.o;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.o;a.h=0;var d=a.Ia<<8&65280|a.Fa&255;a.Fa=a.Ia=0;65535===d&&d--;d>c&&(d=c);a.buffer?b>=a.buffer.byteLength?(a.H=255,U(a)):0===c?(a.H=80,a.i=0):(c=Math.min(c,a.buffer.byteLength-b),a.H=208,Of(a),a.sa(b,c,e=>{Pf(a,e);a.H=88;a.ta=a.ta&-8|2;U(a);d&=-4;a.g=d;a.g>a.h&&(a.g=a.h);a.Fa=a.g&255;a.Ia=a.g>>8&255;Qf(a,c)})):(a.H=255,a.Oa=65,U(a))}
function Rf(a,b){var c=(b[7]<<8|b[8])*a.o;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.o;b>=a.buffer.byteLength?(a.H=255,U(a)):(a.H=208,Of(a),a.sa(b,c,d=>{Qf(a,c);a.H=88;a.ta=a.ta&-8|2;Pf(a,d);Gf(a)}))}function Gf(a){if(0!==(a.l.g&1)&&0!==(a.H&8)){var b=a.l.i,c=0,d=a.data;do{var e=a.s.h(b),f=a.s.gb(b+4),h=a.s.Ae(b+7)&128;f||(f=65536);Ta(a.s,d.subarray(c,Math.min(c+f,a.h)),e);c+=f;b+=8;if(c>=a.h&&!h)break}while(!h);a.H=80;a.l.g&=-2;a.ta=a.ta&-8|3;U(a)}}
function uf(a,b){if(a.i<a.g){var c=1===b?a.data[a.i]:2===b?a.da[a.i>>>1]:a.X[a.i>>>2];a.i+=b;a.i>=a.g&&(160===a.D?a.g===a.h?(a.H=80,a.ta=a.ta&-8|3,U(a)):(a.H=88,a.ta=a.ta&-8|2,U(a),b=a.Ia<<8&65280|a.Fa&255,a.g+b>a.h?(a.Fa=a.h-a.g&255,a.Ia=a.h-a.g>>8&255,a.g=a.h):a.g+=b):(a.Oa=0,a.i>=a.h?a.H=80:(b=41===a.D||196===a.D?Math.min(a.U,(a.h-a.g)/512):1,Lf(a,a.D,b),a.g+=512*b,a.H=88,U(a))));return c}a.i+=b;return 0}
function vf(a,b,c){if(!(a.i>=a.g)&&(1===c?a.data[a.i++]=b:2===c?(a.da[a.i>>>1]=b,a.i+=2):(a.X[a.i>>>2]=b,a.i+=4),a.i===a.g))if(160===a.D)if(b=a.data[0],c=qf[b]?qf[b].flags:0,a.i=0,a.Da=b,3!==b&&(a.ba=0,a.aa=0),!a.buffer&&c&1)Kf(a,2,58),U(a);else{switch(b){case 0:a.buffer?(Cf(a,0),a.g=a.h,a.H=80):Kf(a,2,58);break;case 3:Cf(a,a.data[4]);a.g=a.h;a.H=88;a.data[0]=240;a.data[2]=a.ba;a.data[7]=8;a.data[12]=a.aa;a.ba=0;a.aa=0;break;case 18:b=a.data[4];a.H=88;a.data.set([5,128,1,49,31,0,0,0,83,79,78,89,32,
32,32,32,67,68,45,82,79,77,32,67,68,85,45,49,48,48,48,32,49,46,49,97]);a.g=a.h=Math.min(36,b);break;case 26:Cf(a,a.data[4]);a.g=a.h;a.H=88;break;case 30:Cf(a,0);a.g=a.h;a.H=80;break;case 37:b=a.j-1;Pf(a,new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,0,0,a.o>>8&255,a.o&255]));a.g=a.h;a.H=88;break;case 40:a.rf&1?Rf(a,a.data):Nf(a,a.data);break;case 66:b=a.data[8];Cf(a,Math.min(8,b));a.g=a.h;a.H=88;break;case 67:b=a.data[8]|a.data[7]<<8;c=a.data[9]>>6;Cf(a,b);a.g=a.h;0===c?(b=a.j,a.data.set(new Uint8Array([0,
18,1,1,0,20,1,0,0,0,0,0,0,22,170,0,b>>24,b>>16&255,b>>8&255,b&255]))):1===c&&a.data.set(new Uint8Array([0,10,1,1,0,0,0,0,0,0,0,0]));a.H=88;break;case 70:b=Math.min(a.data[8]|a.data[7]<<8,32);Cf(a,b);a.g=a.h;a.data[0]=b-4>>24&255;a.data[1]=b-4>>16&255;a.data[2]=b-4>>8&255;a.data[3]=b-4&255;a.data[6]=8;a.data[10]=3;a.H=88;break;case 81:Cf(a,0);a.g=a.h;a.H=80;break;case 82:Kf(a,5,36);break;case 90:b=a.data[8]|a.data[7]<<8;42===a.data[2]&&Cf(a,Math.min(30,b));a.g=a.h;a.H=88;break;case 189:Cf(a,a.data[9]|
a.data[8]<<8);a.g=a.h;a.data[5]=1;a.H=88;break;case 27:b=a.data[4]&3;a.buffer&&2===b&&(a.T=!0,a.buffer=null);a.H=80;Cf(a,0);a.g=a.h;break;case 69:case 74:Kf(a,5,36);break;case 190:Cf(a,0);a.g=a.h;a.H=80;break;default:Kf(a,5,36)}a.ta=a.ta&-8|2;0===(a.H&128)&&U(a);0===(a.H&128)&&0===a.h&&(a.ta|=1,a.H&=-9)}else a.i>=a.h?a.nf():(a.H=88,a.g+=512,U(a))}
function Lf(a,b,c){a.ta-=c;36===b||41===b||37===b||52===b||57===b||53===b?(b=c+Sf(a),a.Xa=b&255|b>>16&65280,a.Fa=b>>8&255,a.Ia=b>>16&255):a.yf?(b=c+Tf(a),a.Xa=b&255,a.Fa=b>>8&255,a.Ia=b>>16&255,a.head=a.head&-16|b&15):(b=c+Uf(a),c=b/(a.F*a.A)|0,a.Fa=c&255,a.Ia=c>>8&255,a.head=(b/a.A|0)%a.F&15,a.Xa=b%a.A+1&255,Uf(a))}
function yf(a,b){var c=36===b||41===b,d=zf(a,c);c=Af(a,c);var e=32===b||36===b,f=d*a.o;c*=a.o;c+f>a.buffer.byteLength?(a.H=255,U(a)):(a.H=192,Of(a),a.sa(c,f,h=>{Pf(a,h);a.H=88;a.g=e?512:Math.min(f,512*a.U);Lf(a,b,e?1:Math.min(d,a.A));U(a);Qf(a,f)}))}
function Ef(a){var b=37===a.D,c=zf(a,b);b=Af(a,b);var d=c*a.o;b*=a.o;Of(a);a.sa(b,d,e=>{var f=a.l.i,h=0;do{var g=a.s.h(f),k=a.s.gb(f+4),l=a.s.Ae(f+7)&128;k||(k=65536);Ta(a.s,e.subarray(h,h+k),g);h+=k;f+=8}while(!l);Lf(a,a.D,c);a.H=80;a.l.g&=-2;a.D=-1;Qf(a,d);U(a)})}
function Ff(a){var b=53===a.D,c=zf(a,b),d=Af(a,b);b=c*a.o;d*=a.o;var e=a.l.i,f=0;const h=new Uint8Array(b);do{var g=a.s.h(e),k=a.s.gb(e+4),l=a.s.Ae(e+7)&128;k||(k=65536);h.set(a.s.kb.subarray(g,g+k),f);f+=k;e+=8}while(!l);a.buffer.set(d,h,()=>{Lf(a,a.D,c);a.H=80;U(a);a.l.g&=-2;a.D=-1});Mf(a,b)}function Uf(a){return((a.Fa&255|a.Ia<<8&65280)*a.F+a.head)*a.A+(a.Xa&255)-1}function Tf(a){return a.Xa&255|a.Fa<<8&65280|a.Ia<<16&16711680|(a.head&15)<<24}
function Sf(a){return(a.Xa&255|a.Fa<<8&65280|a.Ia<<16&16711680|a.Xa>>8<<24&4278190080)>>>0}function Af(a,b){return b?Sf(a):a.yf?Tf(a):Uf(a)}function zf(a,b){b?(a=a.ta,0===a&&(a=65536)):(a=a.ta&255,0===a&&(a=256));return a}
function Df(a){const b=Math.min(16383,a.K),c=(g,k,l,m)=>{k<<=1;var p=l<<1;l=k+p;g.fill(32,k,p);for(p=0;p<m.length&&k<l;p++)p&1?(g[k]=m.charCodeAt(p),k+=2):g[k+1]=m.charCodeAt(p)},d=a.B?34112:64,e=160===a.D?0:1031,f=a.B?16928:16384,h=a.B?20480:29696;a.data.fill(0,0,512);Pf(a,[d&255,d>>8&255,b&255,b>>8&255,0,0,a.F&255,a.F>>8&255,a.A/512&255,a.A/512>>8&255,0,2,a.A&255,a.A>>8&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,1,0,0,2,0,0,0,2,0,2,7,0,b&255,b>>8&255,a.F&255,a.F>>8&255,a.A,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255,0,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255,0,0,e&255,e>>8&255,0,0,30,0,30,0,30,0,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f&255,f>>8&255,h&255,h>>8&255,0,64,f&255,f>>8&255,h&255,h>>8&255,0,64,0,0,0,0,0,0,0,0,0,0,1,96,0,0,0,0,0,0,0,0,0,0,0,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255]);c(a.data,10,10,`8086-86${a.N}${a.Ua}`);c(a.data,
23,4,"1.00");c(a.data,27,20,a.B?"v86 ATAPI CD-ROM":"v86 ATA HD");a.h=512;a.g=512}function Cf(a,b){Bf(a,b);a.X.fill(0,0,b+3>>2)}function Bf(a,b){a.data.length<b&&(a.data=new Uint8Array(b+3&-4),a.da=new Uint16Array(a.data.buffer),a.X=new Int32Array(a.data.buffer));a.h=b;a.i=0}function Pf(a,b){Bf(a,b.length);a.data.set(b)}function Of(a){a.v.send("ide-read-start")}function Qf(a,b){a.v.send("ide-read-end",[a.N,b,b/a.o|0])}function Mf(a,b){a.v.send("ide-write-end",[a.N,b,b/a.o|0])}
n.sa=function(a,b,c){const d=this.ab++;this.Z.add(d);this.buffer.get(a,b,e=>{this.Pa.delete(d)?this.Z.has(d):(this.Z.delete(d),c(e))})};
n.ja=function(){var a=[];a[0]=this.ta;a[1]=this.K;a[2]=this.Ia;a[3]=this.Fa;a[4]=this.i;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=this.Re;a[10]=this.Oa;a[11]=this.head;a[12]=this.F;a[13]=this.B;a[14]=this.yf;a[15]=this.rf;a[16]=this.data;a[17]=this.h;a[18]=this.Xa;a[19]=this.j;a[20]=this.o;a[21]=this.U;a[22]=this.A;a[23]=this.H;a[24]=this.na;a[25]=this.D;a[26]=this.g;a[27]=this.Da;a[28]=this.buffer;return a};
n.J=function(a){this.ta=a[0];this.K=a[1];this.Ia=a[2];this.Fa=a[3];this.i=a[4];this.Re=a[9];this.Oa=a[10];this.head=a[11];this.F=a[12];this.B=a[13];this.yf=a[14];this.rf=a[15];this.data=a[16];this.h=a[17];this.Xa=a[18];this.j=a[19];this.o=a[20];this.U=a[21];this.A=a[22];this.H=a[23];this.na=a[24];this.D=a[25];this.g=a[26];this.Da=a[27];this.da=new Uint16Array(this.data.buffer);this.X=new Int32Array(this.data.buffer);this.buffer&&this.buffer.J(a[28]);this.la=this.B||this.buffer;this.T=!1};function Vf(a,b,c){this.v=b;this.id=a.u.ga?1:0;this.status=1;this.ye=c;this.ma=new Uint8Array([0,34,21,255*Math.random()|0,255*Math.random()|0,255*Math.random()|0]);this.v.send("net"+this.id+"-mac",Ee(this.ma));b=[];for(c=0;1>c;++c)b.push({La:1024,Za:0}),b.push({La:1024,Za:1});b.push({La:16,Za:2});this.O=new Pe(a,{name:"virtio-net",fb:80,je:4161,Kf:1,he:{Qa:51200,$:b,features:[5,16,22,3,17,23,32],Tg:()=>{}},notification:{Qa:51456,wg:!1,fg:[()=>{},d=>{const e=this.O.$[d];for(;Qe(e);){const f=Re(e),
h=new Uint8Array(f.Lb);Se(f,h);this.v.send("net"+this.id+"-send",h.subarray(12));this.v.send("eth-transmit-end",[h.length-12]);Ze(this.O.$[d],f)}$e(this.O.$[d])},d=>{if(2===d)for(var e=this.O.$[d];Qe(e);){const f=Re(e),h=new Uint8Array(f.Lb);Se(f,h);const g=K(["b","b"],h,{offset:0});switch(g[0]<<8|g[1]){case 1024:K(["h"],h,{offset:2});this.md(d,f,new Uint8Array([0]));break;case 257:this.ma=h.subarray(2,8);this.md(d,f,new Uint8Array([0]));this.v.send("net"+this.id+"-mac",Ee(this.ma));break;default:this.md(d,
f,new Uint8Array([1]));return}}}]},Kb:{Qa:50944},lf:{Qa:50688,Hc:[0,1,2,3,4,5].map((d,e)=>({bytes:1,name:"mac_"+e,read:()=>this.ma[e],write:()=>{}})).concat([{bytes:2,name:"status",read:()=>this.status,write:()=>{}},{bytes:2,name:"max_pairs",read:()=>1,write:()=>{}},{bytes:2,name:"mtu",read:()=>1500,write:()=>{}}])}});this.v.register("net"+this.id+"-receive",d=>{this.v.send("eth-receive-end",[d.length]);const e=new Uint8Array(12+d.byteLength);(new DataView(e.buffer,e.byteOffset,e.byteLength)).setInt16(10,
1);e.set(d,12);d=this.O.$[0];Qe(d)?(d=Re(d),Ye(d,e),Ze(this.O.$[0],d),$e(this.O.$[0])):console.log("No buffer to write into!")},this)}Vf.prototype.ja=function(){const a=[];a[0]=this.O;a[1]=this.id;a[2]=this.ma;return a};Vf.prototype.J=function(a){this.O.J(a[0]);this.id=a[1];this.ye&&(this.ma=a[2],this.v.send("net"+this.id+"-mac",Ee(this.ma)))};Vf.prototype.reset=function(){this.O.reset()};Vf.prototype.md=function(a,b,c){Ye(b,c);Ze(this.O.$[a],b);$e(this.O.$[a])};const Wf=Uint32Array.from([655360,655360,720896,753664]),Xf=Uint32Array.from([131072,65536,32768,32768]);
function Yf(a,b,c,d){this.s=a;this.v=b;this.screen=c;this.oa=d;this.U=0;this.Wc=14;this.Sd=15;this.yb=80;this.gd=25;this.ce=this.l=this.Kd=this.Bb=0;this.ed=[];this.be=this.g=0;this.Sc=new Uint8Array(25);this.K=this.ba=this.ae=this.Cb=this.B=this.F=this.$c=this.bd=this.o=0;this.h=!1;this.Z=new Int32Array(256);this.D=0;this.Sf=45253;this.X=this.A=0;this.j=!1;this.na=32;this.Rd=this.Qd=this.Sb=this.xc=0;void 0===this.oa||262144>this.oa?this.oa=262144:268435456<this.oa?this.oa=268435456:this.oa=qa(this.oa);
this.R=[52,18,17,17,3,1,0,0,0,0,0,3,0,0,0,0,8,14680064,57344,224,0,0,0,0,0,0,191,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,190,254,0,0,0,0,0,0,0,0,0,0,0,0];this.fb=144;this.Ob=[{size:this.oa}];this.bi=65536;this.Tj=4272947200;this.name="vga";this.kc=this.Xc=this.jc=this.la=0;this.Ua=255;this.Pa=new Uint8Array(16);this.T=-1;this.hd=32;this.ic=this.dd=this.Rc=this.i=0;this.Od=-1;this.Ab=15;this.Tb=this.Pd=0;this.Yc=-1;this.vc=this.zb=this.$d=this.Da=0;this.Yd=255;this.aa=this.Vb=this.Ub=this.tc=
this.Zd=this.ld=0;this.N=this.Ie=255;this.mc=!1;b=a.C;u(b,960,this,this.Bk);x(b,960,this,this.ki,this.Ak);x(b,961,this,this.li);u(b,962,this,this.Ck);b.jd(964,this,this.Ek,this.Gk);x(b,964,this,this.Dk);x(b,965,this,this.Fk);b.jd(974,this,this.Rk,this.Tk);x(b,974,this,this.Qk);x(b,975,this,this.Sk);x(b,966,this,this.Hk);u(b,966,this,this.Ik);u(b,967,this,this.Kk);x(b,967,this,this.Jk);u(b,968,this,this.Mk);x(b,968,this,this.Lk);u(b,969,this,this.Ok);x(b,969,this,this.Nk);x(b,972,this,this.Pk);u(b,
980,this,this.Wg,this.ni);u(b,981,this,this.rg,this.pi);x(b,980,this,this.mi);x(b,981,this,this.Xg,this.oi);u(b,948,this,this.Wg,this.ni);u(b,949,this,this.rg,this.pi);x(b,948,this,this.mi);x(b,949,this,this.Xg,this.oi);x(b,970,this,function(){return 0});x(b,986,this,this.ri);x(b,954,this,this.ri);this.Xd=-1;this.ab=0;u(b,462,this,void 0,this.Vj);u(b,463,this,void 0,this.Xj);x(b,463,this,void 0,this.Wj);c=a.Yi(this.oa)>>>0;this.Me=t(Uint8Array,a.Ma,c,this.oa);this.Ud=this.oa;this.Td=0;this.Wd=this.oa;
this.Vd=0;this.zc=null;this.da=new Uint8Array(262144);this.Je=new Uint8Array(this.da.buffer,0,65536);this.Ke=new Uint8Array(this.da.buffer,65536,65536);this.Jd=new Uint8Array(this.da.buffer,131072,65536);this.Le=new Uint8Array(this.da.buffer,196608,65536);this.kd=new Uint8Array(524288);Za(b,655360,131072,e=>Zf(this,e),(e,f)=>{if(this.j)this.s.Dg((e-655360|this.xc)+3758096384|0,f);else{var h=this.tc>>2&3;e-=Wf[h];if(!(0>e||e>=Xf[h]))if(this.h){var g=f;f=$f(this.Yd);var k=ag(this.ld);h=ag(this.Zd);
switch(this.zb&3){case 0:g=(g|g<<8)>>>(this.vc&7)&255;var l=$f(g);g=ag(this.ld);l=bg(this,(l|h&g)&(~h|g),this.D);l=f&l|~f&this.D;break;case 1:l=this.D;break;case 2:l=ag(g);l=bg(this,l,this.D);l=f&l|~f&this.D;break;case 3:g=(g|g<<8)>>>(this.vc&7)&255,f&=$f(g),l=f&k|~f&this.D}f=15;switch(this.Pd&12){case 0:f=5<<(e&1);e&=-2;break;case 8:case 12:f=1<<(e&3),e&=-4}f&=this.Ab;f&1&&(this.Je[e]=l>>0&255);f&2&&(this.Ke[e]=l>>8&255);f&4&&(this.Jd[e]=l>>16&255);f&8&&(this.Le[e]=l>>24&255);l=cg(this,e);f=l+7;
l<this.Wd&&(this.Wd=l);f>this.Vd&&(this.Vd=f);l<this.Ud&&(this.Ud=l);f>this.Td&&(this.Td=f)}else if(this.Ab&3){if(h=e,this.da[h]=f,e=Math.max(this.yb,2*this.ba),h>>1>=this.g?(g=(h>>1)-this.g,l=g/e|0,e=g%e):(g=h>>1,l=(g/e|0)+dg(this,this.K),e=g%e),!(e>=this.yb||l>=this.gd)){h&1?(g=f,f=this.da[h&-2]):g=this.da[h|1];var m=this.i&8;h=(m&&g&128?this.screen.o:0)|(!this.mc||g&8?0:this.screen.A);k=this.mc?7:15;m=m?7:15;this.v.send("screen-put-char",[l,e,f]);this.screen.j(l,e,f,h,this.Z[this.Ua&this.Pa[g>>
4&m]],this.Z[this.Ua&this.Pa[g&k]])}}else this.Ab&4&&(this.Jd[e]=f)}});pe(a.u.eb,this)}n=Yf.prototype;
n.ja=function(){var a=[];a[0]=this.oa;a[1]=this.U;a[2]=this.Wc;a[3]=this.Sd;a[4]=this.yb;a[5]=this.gd;a[6]=this.da;a[7]=this.kc;a[8]=this.g;a[9]=this.h;a[10]=this.Z;a[11]=this.D;a[12]=this.Ub;a[13]=this.Vb;a[14]=this.tc;a[15]=this.A;a[16]=this.X;a[17]=this.o;a[18]=this.j;a[19]=this.na;a[20]=this.xc;a[21]=this.Sb;a[22]=this.la;a[23]=this.jc;a[24]=this.Xc;a[25]=this.Pa;a[26]=this.Od;a[27]=this.Ab;a[28]=this.Pd;a[29]=this.Yc;a[30]=this.$d;a[31]=this.zb;a[32]=this.vc;a[33]=this.Yd;a[34]=this.aa;a[35]=
this.Ie;a[36]=this.N;a[37]=this.Xd;a[38]=this.ab;a[39]=this.Me;a[41]=this.T;a[42]=this.ba;a[43]=this.ld;a[44]=this.Zd;a[45]=this.be;a[46]=this.Sc;a[47]=this.bd;a[48]=this.$c;a[49]=this.F;a[50]=this.B;a[51]=this.Cb;a[52]=this.ae;a[53]=this.ba;a[54]=this.hd;a[55]=this.i;a[56]=this.Rc;a[57]=this.dd;a[58]=this.ic;a[59]=this.Tb;a[60]=this.K;a[61]=this.kd;a[62]=this.Ua;a[63]=this.Da;a[64]=this.mc;return a};
n.J=function(a){this.oa=a[0];this.U=a[1];this.Wc=a[2];this.Sd=a[3];this.yb=a[4];this.gd=a[5];a[6]&&this.da.set(a[6]);this.kc=a[7];this.g=a[8];this.h=a[9];this.Z=a[10];this.D=a[11];this.Ub=a[12];this.Vb=a[13];this.tc=a[14];this.A=a[15];this.X=a[16];this.o=a[17];this.j=a[18];this.na=a[19];this.xc=a[20];this.Sb=a[21];this.la=a[22];this.jc=a[23];this.Xc=a[24];this.Pa=a[25];this.Od=a[26];this.Ab=a[27];this.Pd=a[28];this.Yc=a[29];this.$d=a[30];this.zb=a[31];this.vc=a[32];this.Yd=a[33];this.aa=a[34];this.Ie=
a[35];this.N=a[36];this.Xd=a[37];this.ab=a[38];this.Me.set(a[39]);this.T=a[41];this.ba=a[42];this.ld=a[43];this.Zd=a[44];this.be=a[45];this.Sc.set(a[46]);this.bd=a[47];this.$c=a[48];this.F=a[49];this.B=a[50];this.Cb=a[51];this.ae=a[52];this.ba=a[53];this.hd=a[54];this.i=a[55];this.Rc=a[56];this.dd=a[57];this.ic=a[58];this.Tb=a[59];this.K=a[60];a[61]&&this.kd.set(a[61]);this.Ua=void 0===a[62]?255:a[62];this.Da=void 0===a[63]?0:a[63];this.mc=void 0===a[64]?0:a[64];this.screen.g(this.h);this.h?(this.Kd=
this.Bb=0,this.j?(eg(this,this.A,this.X,this.A,this.X,this.na),fg(this)):(gg(this),fg(this),hg(this))):(ig(this,!0),jg(this,this.yb,this.gd),kg(this),lg(this),mg(this));ng(this)};
function Zf(a,b){if(a.j)return a.s.Ae((b-655360|a.xc)+3758096384|0);var c=a.tc>>2&3;b-=Wf[c];if(0>b||b>=Xf[c])return 0;a.D=a.Je[b];a.D|=a.Ke[b]<<8;a.D|=a.Jd[b]<<16;a.D|=a.Le[b]<<24;if(a.zb&8)return c=255,a.Vb&1&&(c&=a.Je[b]^~(a.Ub&1?255:0)),a.Vb&2&&(c&=a.Ke[b]^~(a.Ub&2?255:0)),a.Vb&4&&(c&=a.Jd[b]^~(a.Ub&4?255:0)),a.Vb&8&&(c&=a.Le[b]^~(a.Ub&8?255:0)),c;c=a.$d;a.h?a.Pd&8?(c=b&3,b&=-4):a.zb&16&&(c=b&1,b&=-2):c&=3;return a.da[c<<16|b]}function $f(a){return a|a<<8|a<<16|a<<24}
function ag(a){return(a&1?255:0)|(a&2?255:0)<<8|(a&4?255:0)<<16|(a&8?255:0)<<24}function bg(a,b,c){switch(a.vc&24){case 8:return b&c;case 16:return b|c;case 24:return b^c}return b}
function og(a){const b=dg(a,a.K),c=Math.max(0,2*(2*a.ba-a.yb)),d=a.i&8,e=a.mc?7:15,f=d?7:15,h=a.screen.o,g=a.screen.A;let k=a.g<<1;for(let l=0;l<a.gd;l++){l===b&&(k=0);for(let m=0;m<a.yb;m++){const p=a.da[k],r=a.da[k|1],v=(d&&r&128?h:0)|(!a.mc||r&8?0:g);a.v.send("screen-put-char",[l,m,p]);a.screen.j(l,m,p,v,a.Z[a.Ua&a.Pa[r>>4&f]],a.Z[a.Ua&a.Pa[r&e]]);k+=2}k+=c}}
function mg(a){var b=Math.max(a.yb,2*a.ba);let c;a.U>=a.g?(c=(a.U-a.g)/b|0,b=(a.U-a.g)%b):(c=(a.U/b|0)+dg(a,a.K),b=a.U%b);a.screen.F(c,b)}function ng(a){a.h?a.j?a.s.bd():(a.Ud=0,a.Td=524288):og(a)}function hg(a){a.h&&!a.j&&(a.Wd=0,a.Vd=524288,ng(a))}n.ya=function(){};function pg(a){var b=128+(~a.Cb&a.o&64);b-=a.Cb&64;b-=a.i&64;return b>>>6}
function cg(a,b){var c=pg(a);if(~a.o&3){var d=b-a.g;d&=a.o<<13|-24577;d<<=c;var e=d/a.l|0;d%=a.l;switch(a.o&3){case 2:e=e<<1|b>>13&1;break;case 1:e=e<<1|b>>14&1;break;case 0:e=e<<2|b>>13&3}return e*a.l+d+(a.g<<c)}return b<<c}function dg(a,b){a.aa&128&&(b>>>=1);b=Math.ceil(b/(1+(a.aa&31)));a.o&1||(b<<=1);a.o&2||(b<<=1);return b}function jg(a,b,c){a.yb=b;a.gd=c;a.screen.i(b,c);a.v.send("screen-set-size",[b,c,0])}
function eg(a,b,c,d,e,f){d=Math.max(d,1);e=Math.max(e,1);if(a.Bb!==b||a.Kd!==c||a.l!==d||a.ce!==e){a.Bb=b;a.Kd=c;a.l=d;a.ce=e;if("undefined"!==typeof ImageData){const h=d*e,g=a.s.Xi(h)>>>0;a.ff=g;a.zc=new ImageData(new Uint8ClampedArray(a.s.Ma.buffer,g,4*h),d,e);a.s.bd()}a.screen.h(b,c);a.v.send("screen-set-size",[b,c,f])}}
function gg(a){if(!a.j){var b=Math.min(1+a.bd,a.$c),c=Math.min(1+a.F,a.B);if(b&&c)if(a.h){b<<=3;var d=a.ba<<4,e=4;a.i&64?(b>>>=1,d>>>=1,e=8):a.i&2&&(e=1);c=dg(a,c);var f=Xf[0];var h=a.ba<<2;a.Cb&64?h<<=1:a.o&64&&(h>>>=1);eg(a,b,c,d,h?Math.ceil(f/h):c,e);qg(a);fg(a)}else a.aa&128&&(c>>>=1),d=c/(1+(a.aa&31))|0,b&&d&&jg(a,b,d)}}
function fg(a){a.h||og(a);if(a.j)a.ed=[];else if(a.l&&a.Bb)if(!a.hd||a.Tb&32)a.ed=[],a.screen.N();else{var b=a.be,c=a.dd;a.i&64&&(c>>>=1);var d=a.ae>>5&3,e=cg(a,b+d);b=e/a.l|0;var f=e%a.l+c;e=dg(a,1+a.K);e=Math.min(e,a.Kd);var h=a.Kd-e;a.ed=[];f=-f;for(var g=0;f<a.Bb;f+=a.l,g++)a.ed.push({zc:a.zc,eh:f,fh:0,Vf:0,Wf:b+g,Hg:a.l,Gg:e});b=0;a.i&32||(b=cg(a,d)+c);f=-b;for(g=0;f<a.Bb;f+=a.l,g++)a.ed.push({zc:a.zc,eh:f,fh:e,Vf:0,Wf:g,Hg:a.l,Gg:h})}}function qg(a){a.N|=8;a.be!==a.g&&(a.be=a.g,fg(a))}
function lg(a){var b=a.aa&31;const c=Math.min(b,a.Wc&31);b=Math.min(b,a.Sd&31);a.screen.K(c,b,!(a.Wc&32)&&c<b)}
n.Bk=function(a){if(-1===this.T)this.T=a&31,this.hd!==(a&32)&&(this.hd=a&32,fg(this));else{if(16>this.T)this.Pa[this.T]=a,this.i&64||ng(this);else switch(this.T){case 16:if(this.i!==a){var b=this.i;this.i=a;const c=0!==(a&1);this.j||this.h===c||(this.h=c,this.screen.g(this.h));(b^a)&64&&hg(this);gg(this);ng(this);ig(this,!1)}break;case 18:this.Rc!==a&&(this.Rc=a,ng(this));break;case 19:this.dd!==a&&(this.dd=a&15,fg(this));break;case 20:this.ic!==a&&(this.ic=a,ng(this))}this.T=-1}};
n.ki=function(){return(this.T|this.hd)&255};n.Ak=function(){return this.ki()|this.li()<<8&65280};n.li=function(){if(16>this.T)return this.Pa[this.T]&255;switch(this.T){case 16:return this.i;case 18:return this.Rc;case 19:return this.dd;case 20:return this.ic}return 255};n.Ck=function(a){this.Ie=a};n.Ek=function(a){this.Od=a};n.Dk=function(){return this.Od};
n.Gk=function(a){switch(this.Od){case 1:var b=this.Tb;this.Tb=a;(b^a)&32&&fg(this);ig(this,!1);break;case 2:b=this.Ab;this.Ab=a;this.h||!(b&4)||this.Ab&4||ig(this,!0);break;case 3:b=this.Da;this.Da=a;this.h||b===a||kg(this);break;case 4:this.Pd=a}};n.Fk=function(){switch(this.Od){case 1:return this.Tb;case 2:return this.Ab;case 3:return this.Da;case 4:return this.Pd;case 6:return 18}return 0};n.Ik=function(a){this.Ua!==a&&(this.Ua=a,ng(this))};n.Hk=function(){return this.Ua};
n.Kk=function(a){this.Xc=3*a;this.kc&=0};n.Jk=function(){return this.kc};n.Mk=function(a){this.jc=3*a;this.kc|=3};n.Lk=function(){return this.jc/3&255};n.Ok=function(a){var b=this.jc/3|0,c=this.jc%3,d=this.Z[b];if(0===(this.ab&32)){a&=63;const e=a&1;a=a<<2|e<<1|e}d=0===c?d&-16711681|a<<16:1===c?d&-65281|a<<8:d&-256|a;this.Z[b]!==d&&(this.Z[b]=d,ng(this));this.jc++};n.Nk=function(){var a=this.Z[this.Xc/3|0]>>8*(2-this.Xc%3)&255;this.Xc++;return this.ab&32?a:a>>2};n.Pk=function(){return this.Ie};
n.Rk=function(a){this.Yc=a};n.Qk=function(){return this.Yc};n.Tk=function(a){switch(this.Yc){case 0:this.ld=a;break;case 1:this.Zd=a;break;case 2:this.Ub=a;break;case 3:this.vc=a;break;case 4:this.$d=a;break;case 5:var b=this.zb;this.zb=a;(b^a)&96&&hg(this);break;case 6:this.tc!==a&&(this.tc=a,gg(this));break;case 7:this.Vb=a;break;case 8:this.Yd=a}};
n.Sk=function(){switch(this.Yc){case 0:return this.ld;case 1:return this.Zd;case 2:return this.Ub;case 3:return this.vc;case 4:return this.$d;case 5:return this.zb;case 6:return this.tc;case 7:return this.Vb;case 8:return this.Yd}return 0};n.Wg=function(a){this.la=a};n.ni=function(a){this.Wg(a&255);this.rg(a>>8&255)};n.mi=function(){return this.la};
n.rg=function(a){switch(this.la){case 1:this.bd!==a&&(this.bd=a,gg(this));break;case 2:this.$c!==a&&(this.$c=a,gg(this));break;case 7:var b=this.F;this.F&=255;this.F=this.F|a<<3&512|a<<7&256;b!==this.F&&gg(this);this.K=this.K&767|a<<4&256;b=this.B;this.B=this.B&767|a<<5&256;b!==this.B&&gg(this);fg(this);break;case 8:this.ae=a;fg(this);break;case 9:var c=this.aa;this.aa=a;this.K=this.K&511|a<<3&512;b=this.B;this.B=this.B&511|a<<4&512;((c^this.aa)&159||b!==this.B)&&gg(this);lg(this);fg(this);ig(this,
!1);break;case 10:this.Wc=a;lg(this);break;case 11:this.Sd=a;lg(this);break;case 12:(this.g>>8&255)!==a&&(this.g=this.g&255|a<<8,fg(this),~this.o&3&&hg(this));break;case 13:(this.g&255)!==a&&(this.g=this.g&65280|a,fg(this),~this.o&3&&hg(this));break;case 14:this.U=this.U&255|a<<8;mg(this);break;case 15:this.U=this.U&65280|a;mg(this);break;case 18:(this.F&255)!==a&&(this.F=this.F&768|a,gg(this));break;case 19:this.ba!==a&&(this.ba=a,gg(this),~this.o&3&&hg(this));break;case 20:this.Cb!==a&&(b=this.Cb,
this.Cb=a,gg(this),(b^a)&64&&hg(this));break;case 21:(this.B&255)!==a&&(this.B=this.B&768|a,gg(this));break;case 23:this.o!==a&&(b=this.o,this.o=a,gg(this),(b^a)&67&&hg(this));break;case 24:this.K=this.K&768|a;fg(this);break;default:this.la<this.Sc.length&&(this.Sc[this.la]=a)}};n.pi=function(a){this.rg(a&255)};
n.Xg=function(){switch(this.la){case 1:return this.bd;case 2:return this.$c;case 7:return this.F>>7&2|this.B>>5&8|this.K>>4&16|this.F>>3&64;case 8:return this.ae;case 9:return this.aa;case 10:return this.Wc;case 11:return this.Sd;case 12:return this.g&255;case 13:return this.g>>8;case 14:return this.U>>8;case 15:return this.U&255;case 18:return this.F&255;case 19:return this.ba;case 20:return this.Cb;case 21:return this.B&255;case 23:return this.o;case 24:return this.K&255}return this.la<this.Sc.length?
this.Sc[this.la]:0};n.oi=function(){return this.Xg()};n.ri=function(){var a=this.N;this.h?(this.N^=1,this.N&=1):(this.N&1&&(this.N^=8),this.N^=1);this.T=-1;return a};n.Vj=function(a){this.Xd=a};
n.Xj=function(a){const b=this.j;switch(this.Xd){case 0:45248<=a&&45253>=a&&(this.Sf=a);break;case 1:this.A=a;2560<this.A&&(this.A=2560);break;case 2:this.X=a;1600<this.X&&(this.X=1600);break;case 3:this.na=a;break;case 4:(this.j=1===(a&1))&&0===(a&128)&&this.Me.fill(0);this.ab=a;break;case 5:this.xc=a<<16;break;case 8:this.Qd!==a&&(this.Qd=a,this.Sb=this.Rd*this.A+this.Qd,ng(this));break;case 9:this.Rd!==a&&(this.Rd=a,this.Sb=this.Rd*this.A+this.Qd,ng(this))}!this.j||this.A&&this.X||(this.j=!1);this.j&&
!b&&(this.Rd=this.Qd=this.Sb=0,this.h=!0,this.screen.g(this.h),eg(this,this.A,this.X,this.A,this.X,this.na));this.j||(this.xc=0);fg(this)};n.Wj=function(){return rg(this,this.Xd)};function rg(a,b){switch(b){case 0:return a.Sf;case 1:return a.ab&2?2560:a.A;case 2:return a.ab&2?1600:a.X;case 3:return a.ab&2?32:a.na;case 4:return a.ab;case 5:return a.xc>>>16;case 6:return a.Bb?a.Bb:1;case 8:return a.Qd;case 9:return a.Rd;case 10:return a.oa/65536|0}return 255}
n.dh=function(){if(this.h){if(0===this.zc.data.byteLength){var a=new Uint8ClampedArray(this.s.Ma.buffer,this.ff,4*this.l*this.ce);this.zc=new ImageData(a,this.l,this.ce);fg(this)}if(this.j){a=0;var b=this.X;if(8===this.na)for(var c=new Int32Array(this.s.Ma.buffer,this.ff,this.Bb*this.Kd),d=new Uint8Array(this.s.Ma.buffer,this.Me.byteOffset,this.oa),e=0;e<c.length;e++){var f=this.Z[d[e]];c[e]=f&65280|f<<16|f>>16|4278190080}else this.s.bj(this.na,this.Sb),e=15===this.na?2:this.na/8,a=((this.s.Zi[0]/
e|0)-this.Sb)/this.A|0,b=(((this.s.Pi[0]/e|0)-this.Sb)/this.A|0)+1;a<b&&(a=Math.max(a,0),b=Math.min(b,this.X),this.screen.l([{zc:this.zc,eh:0,fh:a,Vf:0,Wf:a,Hg:this.A,Gg:b-a}]))}else{a=Math.min(this.Vd|15,524287);e=pg(this);f=~this.o&3;b=this.zb&96;c=this.i&64;for(d=this.Wd&-16;d<=a;){var h=d>>>e;if(f){var g=d/this.l|0,k=d-this.l*g;switch(f){case 1:h=(g&1)<<13;g>>>=1;break;case 2:h=(g&1)<<14;g>>>=1;break;case 3:h=(g&3)<<13,g>>>=2}h|=(g*this.l+k>>>e)+this.g}g=this.Je[h];k=this.Ke[h];var l=this.Jd[h],
m=this.Le[h];h=new Uint8Array(8);switch(b){case 0:g<<=0;k<<=1;l<<=2;m<<=3;for(var p=7;0<=p;p--)h[7-p]=g>>p&1|k>>p&2|l>>p&4|m>>p&8;break;case 32:h[0]=g>>6&3|l>>4&12;h[1]=g>>4&3|l>>2&12;h[2]=g>>2&3|l>>0&12;h[3]=g>>0&3|l<<2&12;h[4]=k>>6&3|m>>4&12;h[5]=k>>4&3|m>>2&12;h[6]=k>>2&3|m>>0&12;h[7]=k>>0&3|m<<2&12;break;case 64:case 96:h[0]=g>>4&15,h[1]=g>>0&15,h[2]=k>>4&15,h[3]=k>>0&15,h[4]=l>>4&15,h[5]=l>>0&15,h[6]=m>>4&15,h[7]=m>>0&15}if(c)for(g=p=0;4>p;p++,d++,g+=2)this.kd[d]=h[g]<<4|h[g+1];else for(p=0;8>
p;p++,d++)this.kd[d]=h[p]}c=this.Ud;a=Math.min(this.Td,524287);b=new Int32Array(this.s.Ma.buffer,this.ff,this.l*this.ce);e=255;f=0;this.i&128&&(e&=207,f|=this.ic<<4&48);if(this.i&64)for(;c<=a;c++)d=this.kd[c]&e|f,d=this.Z[d],b[c]=d&65280|d<<16|d>>16|4278190080;else for(e&=63,f|=this.ic<<4&192;c<=a;c++)d=this.Pa[this.kd[c]&this.Rc]&e|f,d=this.Z[d],b[c]=d&65280|d<<16|d>>16|4278190080;this.screen.l(this.ed)}this.Ud=this.oa;this.Td=0;this.Wd=this.oa;this.Vd=0}qg(this)};
function ig(a,b){const c=a.aa&31;if(c&&!a.h){const d=!!(a.Tb&8);a.screen.B(c+1,!d&&!(a.Tb&1),d,!!(a.i&4),a.Jd,b)}}function kg(a){const b=[0,2,4,6,1,3,5,7],c=(a.Da&12)>>2|(a.Da&32)>>3,d=a.Da&3|(a.Da&16)>>2;a.mc=c!==d;a.screen.D(b[c],b[d]);ng(a)};const sg="SWAP_IN SWAP_OUT MAJFLT MINFLT MEMFREE MEMTOT AVAIL CACHES HTLB_PGALLOC HTLB_PGFAIL".split(" ");
function tg(a,b){this.v=b;this.j=this.h=this.g=this.i=0;this.O=new Pe(a,{name:"virtio-balloon",fb:88,je:4165,Kf:5,he:{Qa:55296,$:[{La:32,Za:0},{La:32,Za:0},{La:2,Za:1},{La:64,Za:2}],features:[1,3,32],Tg:()=>{}},notification:{Qa:55552,wg:!1,fg:[c=>{const d=this.O.$[c];for(;Qe(d);){var e=Re(d);const f=new Uint8Array(e.Lb);Se(e,f);Ze(this.O.$[c],e);e=f.byteLength/4;this.g+=0===c?e:-e}$e(this.O.$[c])},c=>{var d=this.O.$[c];if(Qe(d)){d=Re(d);const e=new Uint8Array(d.Lb);Se(d,e);let f={};for(let h=0;h<
d.Lb;h+=10){let [g,k]=K(["h","d"],e,{offset:h});f[sg[g]]=k}Ze(this.O.$[c],d);this.o&&this.o(f)}},c=>{const d=this.O.$[c];for(;Qe(d);){const f=Re(d);if(0<f.Lb){var e=new Uint8Array(f.Lb);Se(f,e);[e]=K(["w"],e,{offset:0});0===e&&(this.l&&this.l(this.j),1<this.h&&(this.h=1),e=this.O,e.D=!0,e.i&4&&e.Sa(2))}if(0<f.j)for(new Uint8Array(0),e=0;e<f.i.length;++e){let h=f.i[e];this.j+=h.Zc;this.O.s.ld(h.Tf,h.Zc)}Ze(this.O.$[c],f)}$e(this.O.$[c])}]},Kb:{Qa:55040},lf:{Qa:54784,Hc:[{bytes:4,name:"num_pages",read:()=>
this.i,write:()=>{}},{bytes:4,name:"actual",read:()=>this.g,write:()=>{}},{bytes:4,name:"free_page_hint_cmd_id",read:()=>this.h,write:()=>{}}]}})}tg.prototype.ja=function(){const a=[];a[0]=this.O;a[1]=this.i;a[2]=this.g;return a};tg.prototype.J=function(a){this.O.J(a[0]);this.i=a[1];this.g=a[2]};function ug(a,b,c,d){var e=new Uint8Array(b);const f=new Uint16Array(b);var h=new Uint32Array(b),g=e[497]||4;if(43605===f[255]&&1400005704===(f[257]|f[258]<<16)){var k=e[529];e[528]=255;e[529]=k&-97|128;f[274]=56832;f[253]=65535;d+="\x00";h[138]=581632;for(e=0;e<d.length;e++)a[581632+e]=d.charCodeAt(e);g=512*(g+1);d=new Uint8Array(b,0,g);b=new Uint8Array(b,g);e=g=0;c&&(g=67108864,e=c.byteLength,a.set(new Uint8Array(c),g));h[134]=g;h[135]=e;a.set(d,524288);a.set(b,1048576);a=new Uint8Array(512);(new Uint16Array(a.buffer))[0]=
43605;a[2]=1;c=3;a[c++]=250;a[c++]=184;a[c++]=32768;a[c++]=128;a[c++]=142;a[c++]=192;a[c++]=142;a[c++]=216;a[c++]=142;a[c++]=224;a[c++]=142;a[c++]=232;a[c++]=142;a[c++]=208;a[c++]=188;a[c++]=57344;a[c++]=224;a[c++]=234;a[c++]=0;a[c++]=0;a[c++]=32800;a[c++]=128;h=a[c]=0;for(b=0;b<a.length;b++)h+=a[b];a[c]=-h;return{name:"genroms/kernel.bin",data:a}}};function ge(a,b,c){this.Vi=c;this.Na=b;vg(this);b=Object.create(null);b.m=this.Na.exports.memory;for(var d of Object.keys(this.Na.exports))d.startsWith("_")||d.startsWith("zstd")||d.endsWith("_js")||(b[d]=this.Na.exports[d]);this.Wd=b;this.Ma=d=this.Na.exports.memory;this.G=t(Uint32Array,d,812,1);this.kb=new Uint8Array(0);new Int32Array(this.kb.buffer);this.B=t(Uint8Array,d,724,8);this.Pa=t(Int32Array,d,736,8);this.Da=t(Uint32Array,d,768,8);this.A=t(Uint8Array,d,512,8);this.la=t(Int32Array,d,800,
1);this.kc=t(Int32Array,d,564,1);this.jc=t(Int32Array,d,568,1);this.Vb=t(Int32Array,d,572,1);this.Ub=t(Int32Array,d,576,1);this.hd=t(Int32Array,d,1128,1);this.Rc=t(Uint32Array,d,540,8);this.ub=t(Int32Array,d,580,8);this.zb=t(Uint8Array,d,612,1);this.ba=t(Int32Array,d,804,1);this.ab=t(Int32Array,d,808,1);this.mc=t(Uint8Array,d,616,1);this.xc=t(Int32Array,d,620,1);this.Bb=t(Int32Array,d,624,1);this.dd=t(Int32Array,d,636,1);this.gd=t(Int32Array,d,640,1);this.ed=t(Int32Array,d,644,1);this.Sc=t(Int32Array,
d,648,1);this.flags=t(Int32Array,d,120,1);this.Cb=t(Int32Array,d,100,1);this.vc=t(Int32Array,d,96,1);this.tc=t(Int32Array,d,104,1);t(Int32Array,d,112,1);this.Od=t(Uint32Array,d,960,2);this.u={};this.aa=t(Int32Array,d,556,1);this.Wc=t(Int32Array,d,560,1);t(Uint8Array,d,548,1);this.yb=t(Uint8Array,d,552,1);this.g=[];this.j=[];this.da=[];this.i=[];this.mb={Pg:null,Ld:null};this.Nj=t(Uint32Array,d,664,1);this.o=t(Int32Array,d,64,8);this.Tb=t(Int32Array,d,1152,32);this.X=t(Uint8Array,d,816,1);this.X[0]=
255;this.Z=t(Uint8Array,d,1032,1);this.Z[0]=0;this.D=t(Uint16Array,d,1036,1);this.D[0]=895;this.Pd=t(Uint16Array,d,1040,1);this.Pd[0]=0;this.N=t(Int32Array,d,1048,1);this.N[0]=0;this.T=t(Int32Array,d,1052,1);this.T[0]=0;this.U=t(Int32Array,d,1044,1);this.U[0]=0;this.F=t(Int32Array,d,1056,1);this.F[0]=0;this.K=t(Int32Array,d,1060,1);this.K[0]=0;this.Yc=t(Int32Array,d,832,32);t(Int32Array,d,824,1);this.Ua=t(Uint16Array,d,668,8);this.Ab=t(Int32Array,d,684,8);this.Xc=t(Int32Array,d,968,8);this.Zi=t(Uint32Array,
d,716,1);this.Pi=t(Uint32Array,d,720,1);this.vb=[];this.Mg=0;this.yd=[];this.C=void 0;this.v=a;this.$c(0,0)}function Ta(a,b,c){b.length&&(a.l(c),a.l(c+b.length-1),a.Vd(c,c+b.length),a.kb.set(b,c))}
function vg(a){const b=c=>{const d=a.Na.exports[c];console.assert(d,"Missing import: "+c);return d};a.na=b("reset_cpu");b("getiopl");b("get_eflags");a.Sd=b("handle_irqs");a.Xd=b("main_loop");a.Ui=b("set_jit_config");a.Ae=b("read8");a.gb=b("read16");a.h=b("read32s");a.Dg=b("write8");a.Rf=b("write16");a.Ca=b("write32");a.l=b("in_mapped_range");b("fpu_load_tag_word");b("fpu_load_status_word");b("fpu_get_sti_f64");b("translate_address_system_read_js");a.Rd=b("get_seg_cs");b("get_real_eip");b("clear_tlb");
a.Qd=b("full_clear_tlb");a.kd=b("update_state_flags");a.$c=b("set_tsc");a.Wi=b("store_current_tsc");a.Ti=b("set_cpuid_level");a.Zd=b("pic_set_irq");a.Yd=b("pic_clear_irq");a.Ud=b("jit_clear_cache_js");a.Vd=b("jit_dirty_cache");a.Kd=b("codegen_finalize_finished");a.Jd=b("allocate_memory");a.ld=b("zero_memory");a.Td=b("is_memory_zeroed");a.Yi=b("svga_allocate_memory");a.Xi=b("svga_allocate_dest_buffer");a.bj=b("svga_fill_pixel_buffer");a.bd=b("svga_mark_dirty");a.Sb=b("get_pic_addr_master");a.ic=b("get_pic_addr_slave");
a.Mi=b("zstd_create_ctx");a.Oi=b("zstd_get_src_ptr");a.Ni=b("zstd_free_ctx");a.df=b("zstd_read");a.ef=b("zstd_read_free");a.$d=b("port20_read");a.be=b("port21_read");a.Me=b("portA0_read");a.Sf=b("portA1_read");a.ae=b("port20_write");a.ce=b("port21_write");a.ff=b("portA0_write");a.Si=b("portA1_write");a.Ie=b("port4D0_read");a.Ke=b("port4D1_read");a.Je=b("port4D0_write");a.Le=b("port4D1_write")}
ge.prototype.ja=function(){var a=[];a[0]=this.G[0];a[1]=new Uint8Array([...this.B,...this.A]);a[2]=this.Pa;a[3]=this.Da;a[4]=this.la[0];a[5]=this.jc[0];a[6]=this.kc[0];a[7]=this.Ub[0];a[8]=this.Vb[0];a[9]=this.Rc[0];a[10]=this.ub;a[11]=this.zb[0];a[13]=this.ba[0];a[16]=this.ab[0];a[17]=this.mc[0];a[18]=this.xc[0];a[19]=this.Bb[0];a[22]=this.dd[0];a[23]=this.ed[0];a[24]=this.gd[0];a[25]=this.Sc[0];a[26]=this.flags[0];a[27]=this.Cb[0];a[28]=this.tc[0];a[30]=this.vc[0];a[37]=this.aa[0];a[38]=this.Wc[0];
a[39]=this.o;a[40]=this.Ua;a[41]=this.Ab;a[42]=this.Xc;this.Wi();a[43]=this.Od;a[45]=this.u.Pf;a[46]=this.u.Ne;a[47]=this.u.Gd;a[48]=this.u.eb;a[49]=this.u.Fb;a[50]=this.u.xa;a[52]=this.u.Ld;a[53]=this.u.Ef;a[54]=this.u.nh;a[55]=this.u.ne;this.u.Ib.Hd?a[85]=this.u.Ib:this.u.Ib.Pb?.jb.Rl?a[56]=this.u.Ib.Pb:a[57]=this.u.Ib.Pb;a[58]=this.u.qg;a[59]=this.u.ga;var b=new Uint8Array(this.Ma.buffer,this.Sb(),13),c=new Uint8Array(this.Ma.buffer,this.ic(),13),d=[];const e=[];d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=
b[3];d[4]=b[4];d[5]=e;d[6]=b[6];d[7]=b[7];d[8]=b[8];d[9]=b[9];d[10]=b[10];d[11]=b[11];d[12]=b[12];e[0]=c[0];e[1]=c[1];e[2]=c[2];e[3]=c[3];e[4]=c[4];e[5]=null;e[6]=c[6];e[7]=c[7];e[8]=c[8];e[9]=c[9];e[10]=c[10];e[11]=c[11];e[12]=c[12];a[60]=d;a[61]=this.u.bh;a[62]=this.vb;a[63]=this.u.td;a[64]=this.hd[0];a[66]=this.Yc;a[67]=this.Tb;a[68]=this.X[0];a[69]=this.Z[0];a[70]=this.D[0];a[71]=this.N[0];a[72]=this.T[0];a[73]=this.F[0];a[74]=this.K[0];a[75]=this.U[0];c=this.kb.length>>12;b=[];for(d=0;d<c;d++)this.Td(d<<
12,4096)||b.push(d);c=new ya(c);d=new Uint8Array(b.length<<12);for(const [g,k]of b.entries())c.set(k,1),b=k<<12,d.set(this.kb.subarray(b,b+4096),g<<12);const {Sj:f,cj:h}={cj:c,Sj:d};a[77]=f;a[78]=new Uint8Array(h.ac());a[79]=this.u.$e;a[80]=this.u.af;a[81]=this.u.bf;a[82]=this.u.Nd;a[83]=this.u.Qf;a[84]=this.u.cf;return a};
ge.prototype.J=function(a){this.G[0]=a[0];this.kb.length!==this.G[0]&&console.warn("Note: Memory size mismatch. we="+this.kb.length+" state="+this.G[0]);8===a[1].length?(this.B.set(a[1]),this.A.fill(242),this.A[1]=250):16===a[1].length&&(this.B.set(a[1].subarray(0,8)),this.A.set(a[1].subarray(8,16)));this.Pa.set(a[2]);this.Da.set(a[3]);this.la[0]=a[4];this.jc[0]=a[5];this.kc[0]=a[6];this.Ub[0]=a[7];this.Vb[0]=a[8];this.Rc[0]=a[9];this.ub.set(a[10]);this.zb[0]=a[11];this.ba[0]=a[13];this.ab[0]=a[16];
this.mc[0]=a[17];this.xc[0]=a[18];this.Bb[0]=a[19];this.dd[0]=a[22];this.ed[0]=a[23];this.gd[0]=a[24];this.Sc[0]=a[25];this.flags[0]=a[26];this.Cb[0]=a[27];this.tc[0]=a[28];this.vc[0]=a[30];this.aa[0]=a[37];this.Wc[0]=a[38];this.o.set(a[39]);this.Ua.set(a[40]);this.Ab.set(a[41]);a[42]&&this.Xc.set(a[42]);this.$c(a[43][0],a[43][1]);this.u.Pf&&this.u.Pf.J(a[45]);this.u.Ne&&this.u.Ne.J(a[46]);this.u.Gd&&this.u.Gd.J(a[47]);this.u.Fb&&this.u.Fb.J(a[49]);this.u.xa&&this.u.xa.J(a[50]);this.u.Ld&&this.u.Ld.J(a[52]);
this.u.Ef&&this.u.Ef.J(a[53]);this.u.nh&&this.u.nh.J(a[54]);this.u.ne&&this.u.ne.J(a[55]);if(a[56]||a[57]){var b=[[void 0,void 0],[void 0,void 0]];b[0][0]=a[56]?{ig:!0,buffer:this.u.P.buffer}:{ig:!1,buffer:this.u.Ib.Pb.jb.buffer};this.u.Ib=new rf(this,this.u.Ib.v,b);this.u.P=a[56]?this.u.Ib.Pb.jb:void 0;this.u.Ib.Pb.J(a[56]||a[57])}else a[85]&&this.u.Ib.J(a[85]);this.u.eb&&this.u.eb.J(a[48]);this.u.qg&&this.u.qg.J(a[58]);this.u.ga&&this.u.ga.J(a[59]);b=a[60];var c=new Uint8Array(this.Ma.buffer,this.Sb(),
13),d=new Uint8Array(this.Ma.buffer,this.ic(),13);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];var e=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[6]=e[6];d[7]=e[7];d[8]=e[8];d[9]=e[9];d[10]=e[10];d[11]=e[11];d[12]=e[12];this.u.bh&&this.u.bh.J(a[61]);this.u.$e&&this.u.$e.J(a[79]);this.u.af&&this.u.af.J(a[80]);this.u.bf&&this.u.bf.J(a[81]);this.u.Nd&&this.u.Nd.J(a[82]);this.u.Qf&&this.u.Qf.J(a[83]);this.u.cf&&
this.u.cf.J(a[84]);this.vb=a[62];this.u.td&&this.u.td.J(a[63]);this.hd[0]=a[64];this.Yc.set(a[66]);this.Tb.set(a[67]);this.X[0]=a[68];this.Z[0]=a[69];this.D[0]=a[70];this.N[0]=a[71];this.T[0]=a[72];this.F[0]=a[73];this.K[0]=a[74];this.U[0]=a[75];b=new ya(a[78].buffer);a=a[77];this.ld(0,this.G[0]);c=this.G[0]>>12;d=0;for(e=0;e<c;e++)if(b.get(e)){const f=d<<12;this.kb.set(a.subarray(f,f+4096),e<<12);d++}this.kd();this.Qd();this.Ud()};
function Be(a){a.na();a.vb=[];a.u.Pf&&a.u.Pf.reset();a.u.Nd&&a.u.Nd.reset();a.u.Qf&&a.u.Qf.reset();a.u.Ef&&a.u.Ef.reset();je(a)}function wg(a,b,c){b<c?b=c:0>(b|0)&&(b=Math.pow(2,31)-131072);b=(b-1|131071)+1|0;console.assert(0===a.G[0],"Expected uninitialised memory");a.G[0]=b;c=a.Jd(b);a.kb=t(Uint8Array,a.Ma,c,b);t(Uint32Array,a.Ma,c,b>>2)}
ge.prototype.bc=function(a,b){wg(this,a.G||67108864,a.Jb?67108864:1048576);a.mf&&this.Ui(0,1);a.pd&&this.Ti(a.pd);this.yb[0]=+a.xa;this.na();var c=new Ua(this);this.C=c;this.mb.Pg=a.mb;this.mb.Ld=a.Md;je(this);if(a.tb){const e=ug(this.kb,a.tb,a.Jb,a.Eb||"");e&&this.yd.push(e)}x(c,179,this,function(){return 0});var d=0;x(c,146,this,function(){return d});u(c,146,this,function(e){d=e});x(c,1297,this,function(){return this.Mg<this.vb.length?this.vb[this.Mg++]:0});u(c,1296,this,void 0,function(e){function f(k){return new Uint8Array(Int32Array.of(k).buffer)}
function h(k){return k>>8|k<<8&65280}function g(k){return k<<24|k<<8&16711680|k>>8&65280|k>>>24}this.Mg=0;if(0===e)this.vb=f(1431127377);else if(1===e)this.vb=f(0);else if(3===e)this.vb=f(this.G[0]);else if(5===e)this.vb=f(1);else if(15===e)this.vb=f(1);else if(13===e)this.vb=new Uint8Array(16);else if(25===e){e=new Int32Array(4+64*this.yd.length);const k=new Uint8Array(e.buffer);e[0]=g(this.yd.length);for(let l=0;l<this.yd.length;l++){const {name:m,data:p}=this.yd[l],r=4+64*l;e[r>>2]=g(p.length);
e[r+4>>2]=h(49152+l);for(let v=0;v<m.length;v++)k[r+8+v]=m.charCodeAt(v)}this.vb=k}else this.vb=32768<=e&&49152>e?f(0):49152<=e&&e-49152<this.yd.length?this.yd[e-49152].data:f(0)});x(c,32,this,this.$d);x(c,33,this,this.be);x(c,160,this,this.Me);x(c,161,this,this.Sf);u(c,32,this,this.ae);u(c,33,this,this.ce);u(c,160,this,this.ff);u(c,161,this,this.Si);x(c,1232,this,this.Ie);x(c,1233,this,this.Ke);u(c,1232,this,this.Je);u(c,1233,this,this.Le);this.u={};a.Oj&&(this.u.eb=new xe(this),this.yb[0]&&(this.u.td=
new ne(this),this.u.Ne=new ke(this),this.u.xa=new oe(this)),this.u.Gd=new Lb(this),xg(this,this.u.Gd,a),this.u.Fb=new Na(this),this.u.Ld=new Yf(this,b,a.screen,a.oa||8388608),this.u.Ef=new af(this,b),this.u.nh=new re(this,1016,b),a.$e&&(this.u.$e=new re(this,760,b)),a.af&&(this.u.af=new re(this,1E3,b)),a.bf&&(this.u.bf=new re(this,744,b)),this.u.ne=new of(this,a.V),c=[[void 0,void 0],[void 0,void 0]],a.L&&(c[0][0]={buffer:a.L},c[0][1]={buffer:a.ob}),c[1][0]={ig:!0,buffer:a.P},this.u.Ib=new rf(this,
b,c),this.u.P=this.u.Ib.Hd.jb,this.u.qg=new Pb(this,b),"ne2k"===a.cd.type?this.u.ga=new Je(this,b,a.ye,a.Mb):"virtio"===a.cd.type&&(this.u.Qf=new Vf(this,b,a.ye)),a.wc&&(this.u.Pf=new yg(a.wc,this,b)),a.Nd&&(this.u.Nd=new Oe(this,b)),a.cf&&(this.u.cf=new tg(this,b)),this.u.bh=new jb(this,b));a.Nb&&(a=zg(this,a.Nb,a.Jb,a.Eb))&&(this.mb.Pg?this.yd.push(a):this.o[0]=$a(this.C,244))};
function zg(a,b,c,d){if(8192>b.byteLength){var e=new Int32Array(2048);(new Uint8Array(e.buffer)).set(new Uint8Array(b))}else e=new Int32Array(b,0,2048);for(var f=0;8192>f;f+=4){if(464367618===e[f>>2]){var h=e[f+4>>2];if(464367618+h+e[f+8>>2]|0)continue}else continue;var g=a;x(a.C,244,a,function(){return 0},function(){return 0},function(){var m=31860,p=0;if(d){p|=4;g.Ca(31760,m);d+="\x00";var r=(new TextEncoder).encode(d);Ta(g,r,m);m+=r.length}if(h&2){p|=64;r=0;g.Ca(31788,0);g.Ca(31792,m);var v=0;
var B=!1;for(let y=0;4294967296>y;y+=131072)B&&void 0!==g.g[y>>>17]?(g.Ca(m,20),g.Ca(m+4,v),g.Ca(m+8,0),g.Ca(m+12,y-v),g.Ca(m+16,0),g.Ca(m+20,1),m+=24,r+=24,B=!1):B||void 0!==g.g[y>>>17]||(v=y,B=!0);g.Ca(31788,r)}g.Ca(31744,p);r=p=0;if(h&65536){p=e[f+16>>2];var C=e[f+20>>2];r=e[f+24>>2];v=e[f+28>>2];B=new Uint8Array(b,f-(e[f+12>>2]-p),0===C?void 0:C-p);Ta(g,B,p);p=v|0;r=Math.max(C,r)}else if(1179403647===e[0]){v=new DataView(b);const [y,q]=mf(v,jf);console.assert(52===q);console.assert(1179403647===
y.Vh,"Bad magic");console.assert(1===y.fe,"Unimplemented: 64 bit elf");console.assert(1===y.data,"Unimplemented: big endian");console.assert(1===y.Al,"Bad version0");console.assert(2===y.type,"Unimplemented type");console.assert(1===y.Bl,"Bad version1");console.assert(52===y.Aj,"Bad header size");console.assert(32===y.di,"Bad program header size");console.assert(40===y.Di,"Bad section header size");[p]=nf(new DataView(v.buffer,v.byteOffset+y.Uj,y.di*y.ei),kf,y.ei);nf(new DataView(v.buffer,v.byteOffset+
y.sl,y.Di*y.Ei),lf,y.Ei);v=y;B=p;p=v.Fh;for(C of B)0!==C.type&&1===C.type&&C.pg+C.Rg<g.G[0]&&(C.Ih&&(B=new Uint8Array(b,C.offset,C.Ih),Ta(g,B,C.pg)),r=Math.max(r,C.pg+C.Rg),p===v.Fh&&C.oh<=p&&C.oh+C.Rg>p&&(p=p-C.oh+C.pg))}c&&(g.Ca(31764,1),g.Ca(31768,m),C=r,0!==(C&4095)&&(C=(C&-4096)+4096),r=C+c.byteLength,g.Ca(m,C),g.Ca(m+4,r),g.Ca(m+8,0),g.Ca(m+12,0),Ta(g,new Uint8Array(c),C));g.o[3]=31744;g.ub[0]=1;g.la[0]=1;g.flags[0]=2;g.ba[0]=1;g.ab[0]=1;for(m=0;6>m;m++)g.B[m]=0,g.Pa[m]=0,g.Da[m]=4294967295,
g.Ua[m]=45058;g.aa[0]=g.Rd()+p|0;g.kd();return 732803074});a.C.jd(244,a,function(m){console.log("Test exited with code "+ea(m,2));throw"HALT";},function(){},function(){},function(){});for(let m=0;15>=m;m++){function p(r){r?this.Wa(m):Eb(this,m)}u(a.C,8192+m,a,p,p,p)}a=new Uint8Array(512);(new Uint16Array(a.buffer))[0]=43605;a[2]=1;var k=3;a[k++]=102;a[k++]=229;a[k++]=244;let l=a[k]=0;for(let m=0;m<a.length;m++)l+=a[m];a[k]=-l;return{name:"genroms/multiboot.bin",data:a}}}
function xg(a,b,c){var d=c.Db||291;b.ha[56]=1|d>>4&240;b.ha[61]=d&255;b.ha[21]=128;b.ha[22]=2;d=0;1048576<=a.G[0]&&(d=a.G[0]-1048576>>10,d=Math.min(d,65535));b.ha[23]=d&255;b.ha[24]=d>>8&255;b.ha[48]=d&255;b.ha[49]=d>>8&255;d=0;16777216<=a.G[0]&&(d=a.G[0]-16777216>>16,d=Math.min(d,65535));b.ha[52]=d&255;b.ha[53]=d>>8&255;b.ha[91]=0;b.ha[92]=0;b.ha[93]=0;b.ha[20]=47;b.ha[95]=0;c.Hh&&(b.ha[63]=1)}
function je(a){var b=a.mb.Pg,c=a.mb.Ld;if(b){var d=new Uint8Array(b);Ta(a,d,1048576-b.byteLength);if(c){var e=new Uint8Array(c);Ta(a,e,786432);Za(a.C,4272947200,1048576,function(f){f=f-4272947200|0;return f<e.length?e[f]:0},function(){})}Za(a.C,4293918720,1048576,function(f){return this.kb[f&1048575]}.bind(a),function(f,h){this.kb[f&1048575]=h}.bind(a))}}
function Yd(a,b,c,d,e,f){const h=new Uint8Array(a.Ma.buffer,e>>>0,f>>>0);WebAssembly.instantiate(h,{e:a.Wd}).then(g=>{a.Na.ph.set(b+1024,g.instance.exports.f);a.Kd(b,c,d);a.fj&&a.fj(h)})}ge.prototype.Wa=function(a){this.Zd(a);if(this.u.td){var b=this.u.td;if(!(24<=a)){var c=1<<a;0===(b.i&c)&&(b.i|=c,65536!==(b.g[a]&98304)&&(b.h|=c,le(b,a)))}}};function Eb(a,b){a.Yd(b);if(a.u.td&&(a=a.u.td,!(24<=b))){var c=1<<b;(a.i&c)===c&&(a.i&=~c,a.g[b]&32768&&(a.h&=~c))}};function Pe(a,b){this.s=a;this.eb=a.u.eb;this.je=b.je;this.R=[244,26,b.je&255,b.je>>8,7,5,16,0,1,0,2,0,0,0,0,0,1,168,0,0,0,16,191,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,b.Kf&255,b.Kf>>8,0,0,0,0,64,0,0,0,0,0,0,0,0,1,0,0];this.R=this.R.concat(Array(256-this.R.length).fill(0));this.fb=b.fb;this.Ob=[];this.name=b.name;this.j=this.A=0;this.o=new Uint32Array(4);this.h=new Uint32Array(4);for(var c of b.he.features)this.o[c>>>5]|=1<<(c&31),this.h[c>>>5]|=1<<(c&31);b.he.features.includes(32);this.B=
!0;this.i=0;this.D=!1;this.F=0;this.$=[];for(var d of b.he.$)this.$.push(new Ag(a,this,d));this.l=0;this.g=this.$[0];this.Kb=0;c=[];c.push(Bg(this,b.he));c.push(Cg(b.notification));c.push(Dg(this,b.Kb));b.lf&&(d=c.push,b=b.lf,b={type:4,Pe:3,port:b.Qa,Of:!1,offset:0,qf:new Uint8Array(0),Hc:b.Hc},d.call(c,b));Eg(this,c);pe(a.u.eb,this);this.reset()}
function Bg(a,b){return{type:1,Pe:0,port:b.Qa,Of:!1,offset:0,qf:new Uint8Array(0),Hc:[{bytes:4,name:"device_feature_select",read:()=>a.A,write:c=>{a.A=c}},{bytes:4,name:"device_feature",read:()=>a.o[a.A]||0,write:()=>{}},{bytes:4,name:"driver_feature_select",read:()=>a.j,write:c=>{a.j=c}},{bytes:4,name:"driver_feature",read:()=>a.h[a.j]||0,write:c=>{const d=a.o[a.j];a.j<a.h.length&&(a.h[a.j]=c&d);a.B=a.B&&!(c&~d)}},{bytes:2,name:"msix_config",read:()=>65535,write:()=>{}},{bytes:2,name:"num_queues",
read:()=>a.$.length,write:()=>{}},{bytes:1,name:"device_status",read:()=>a.i,write:c=>{0===c&&a.reset();c&~a.i&4&&a.i&64&&(a.D=!0,a.i&4&&a.Sa(2));a.B||(c&=-9);a.i=c}},{bytes:1,name:"config_generation",read:()=>a.F,write:()=>{}},{bytes:2,name:"queue_select",read:()=>a.l,write:c=>{a.l=c;a.l<a.$.length?a.g=a.$[a.l]:a.g=null}},{bytes:2,name:"queue_size",read:()=>a.g?a.g.size:0,write:c=>{if(a.g){c&c-1&&(c=1<<ha(c-1)+1);c>a.g.La&&(c=a.g.La);var d=a.g;d.size=c;d.o=c-1}}},{bytes:2,name:"queue_msix_vector",
read:()=>65535,write:()=>{}},{bytes:2,name:"queue_enable",read:()=>a.g?a.g.enabled|0:0,write:c=>{a.g&&1===c&&Xe(a.g)&&(a.g.enabled=!0)}},{bytes:2,name:"queue_notify_off",read:()=>a.g?a.g.Za:0,write:()=>{}},{bytes:4,name:"queue_desc (low dword)",read:()=>a.g?a.g.l:0,write:c=>{a.g&&(a.g.l=c)}},{bytes:4,name:"queue_desc (high dword)",read:()=>0,write:()=>{}},{bytes:4,name:"queue_avail (low dword)",read:()=>a.g?a.g.g:0,write:c=>{a.g&&(a.g.g=c)}},{bytes:4,name:"queue_avail (high dword)",read:()=>0,write:()=>
{}},{bytes:4,name:"queue_used (low dword)",read:()=>a.g?a.g.h:0,write:c=>{a.g&&(a.g.h=c)}},{bytes:4,name:"queue_used (high dword)",read:()=>0,write:()=>{}}]}}function Cg(a){const b=[];let c;c=a.wg?0:2;for(const [d,e]of a.fg.entries())b.push({bytes:2,name:"notify"+d,read:()=>65535,write:e||(()=>{})});return{type:2,Pe:1,port:a.Qa,Of:!1,offset:0,qf:new Uint8Array([c&255,c>>8&255,c>>16&255,c>>24]),Hc:b}}
function Dg(a,b){return{type:3,Pe:2,port:b.Qa,Of:!1,offset:0,qf:new Uint8Array(0),Hc:[{bytes:1,name:"isr_status",read:()=>{const c=a.Kb;a.Kb=0;Ce(a.eb,a.fb);return c},write:()=>{}}]}}
function Eg(a,b){let c=a.R[52]=64;var d=c;for(const f of b){b=16+f.qf.length;d=c;c=d+b;var e=f.Hc.reduce((h,g)=>h+g.bytes,0);e+=f.offset;e=16>e?16:1<<ha(e-1)+1;a.Ob[f.Pe]={size:e};a.R[d]=9;a.R[d+1]=c;a.R[d+2]=b;a.R[d+3]=f.type;a.R[d+4]=f.Pe;a.R[d+5]=0;a.R[d+6]=0;a.R[d+7]=0;a.R[d+8]=f.offset&255;a.R[d+9]=f.offset>>>8&255;a.R[d+10]=f.offset>>>16&255;a.R[d+11]=f.offset>>>24;a.R[d+12]=e&255;a.R[d+13]=e>>>8&255;a.R[d+14]=e>>>16&255;a.R[d+15]=e>>>24;for(const [h,g]of f.qf.entries())a.R[d+16+h]=g;d=16+4*
f.Pe;a.R[d]=f.port&254|!f.Of;a.R[d+1]=f.port>>>8&255;a.R[d+2]=f.port>>>16&255;a.R[d+3]=f.port>>>24&255;d=f.port+f.offset;for(const h of f.Hc){let g=h.read;b=h.write;if(!f.Of){e=function(l){return g(l&-2)>>((l&1)<<3)&255};const k=function(l){return g(l&-4)>>((l&3)<<3)&255};switch(h.bytes){case 4:x(a.s.C,d,a,k,void 0,g);x(a.s.C,d+1,a,k);x(a.s.C,d+2,a,k);x(a.s.C,d+3,a,k);u(a.s.C,d,a,void 0,void 0,b);break;case 2:x(a.s.C,d,a,e,g);x(a.s.C,d+1,a,e);u(a.s.C,d,a,void 0,b);break;case 1:x(a.s.C,d,a,g),u(a.s.C,
d,a,b)}}d+=h.bytes}}a.R[c]=9;a.R[c+1]=0;a.R[c+2]=20;a.R[c+3]=5;a.R[c+4]=0;a.R[c+5]=0;a.R[c+6]=0;a.R[c+7]=0;a.R[c+8]=0;a.R[c+9]=0;a.R[c+10]=0;a.R[c+11]=0;a.R[c+12]=0;a.R[c+13]=0;a.R[c+14]=0;a.R[c+15]=0;a.R[c+16]=0;a.R[c+17]=0;a.R[c+18]=0;a.R[c+19]=0}Pe.prototype.ja=function(){let a=[];a[0]=this.A;a[1]=this.j;a[2]=this.o;a[3]=this.h;a[4]=this.B;a[5]=this.i;a[6]=this.D;a[7]=this.F;a[8]=this.Kb;a[9]=this.l;return a=a.concat(this.$)};
Pe.prototype.J=function(a){this.A=a[0];this.j=a[1];this.o=a[2];this.h=a[3];this.B=a[4];this.i=a[5];this.D=a[6];this.F=a[7];this.Kb=a[8];this.l=a[9];let b=0;for(const c of a.slice(10))this.$[b].J(c),b++;this.g=this.$[this.l]||null};Pe.prototype.reset=function(){this.j=this.A=0;this.h.set(this.o);this.B=!0;this.l=this.i=0;this.g=this.$[0];for(const a of this.$)a.reset();this.D=!1;this.Kb=this.F=0;Ce(this.eb,this.fb)};Pe.prototype.Sa=function(a){this.Kb|=a;this.eb.Sa(this.fb)};
function Ag(a,b,c){this.s=a;this.O=b;this.La=this.size=c.La;this.o=this.size-1;this.enabled=!1;this.Za=c.Za;this.j=this.h=this.i=this.g=this.l=0;this.reset()}Ag.prototype.ja=function(){const a=[];a[0]=this.size;a[1]=this.La;a[2]=this.enabled;a[3]=this.Za;a[4]=this.l;a[5]=this.g;a[6]=this.i;a[7]=this.h;a[8]=this.j;a[9]=1;return a};
Ag.prototype.J=function(a){this.size=a[0];this.La=a[1];this.enabled=a[2];this.Za=a[3];this.l=a[4];this.g=a[5];this.i=a[6];this.h=a[7];this.j=a[8];this.o=this.size-1;this.A=1!==a[9]};Ag.prototype.reset=function(){this.enabled=!1;this.j=this.h=this.i=this.g=this.l=0;var a=this.La;this.size=a;this.o=a-1};function Xe(a){return a.l&&a.g&&a.h}function Ue(a){a.A&&(a.A=!1,a.i=(a.s.gb(a.g+2)&~a.o)+(a.i&a.o));return a.s.gb(a.g+2)-a.i&65535}function Qe(a){return 0!==Ue(a)}
function Re(a){Qe(a);var b=a.s.gb(a.g+4+2*(a.i&a.o));b=new Fg(a,b);a.i=a.i+1&65535;return b}function Ze(a,b){const c=a.s.gb(a.h+2)+a.j&a.o;var d=b.l;a.s.Ca(a.h+4+8*c,b.D);a.s.Ca(a.h+8+8*c,d);a.j++}function $e(a){if(0!==a.j){var b=a.s.gb(a.h+2)+a.j&65535;a.s.Rf(a.h+2,b);a.j=0;0<(a.O.h[0]&536870912)?(a.s.gb(a.g+4+2*a.size),a.O.Sa(1)):~a.s.gb(a.g)&1&&a.O.Sa(1)}}
function Fg(a,b){this.s=a.s;this.O=a.O;this.D=b;this.A=[];this.Lb=this.g=this.o=0;this.i=[];this.j=this.l=this.h=this.B=0;let c=a.l;var d=b;b=0;let e=a.size,f=!1;const h=0<(this.O.h[0]&268435456);do{var g=a,k=c;g={Tf:g.s.h(k+16*d),Hl:g.s.h(k+16*d+4),Zc:g.s.h(k+16*d+8),flags:g.s.gb(k+16*d+12),next:g.s.gb(k+16*d+14)};if(h&&g.flags&4)c=g.Tf,b=d=0,e=g.Zc/16;else{if(g.flags&2)f=!0,this.i.push(g),this.j+=g.Zc;else{if(f)break;this.A.push(g);this.Lb+=g.Zc}b++;if(b>e)break;if(g.flags&1)d=g.next;else break}}while(1)}
function Se(a,b){let c=0,d=b.length;for(;d&&a.o!==a.A.length;){var e=a.A[a.o],f=e.Tf+a.g;let l=e.Zc-a.g;l>d?(l=d,a.g+=d):(a.o++,a.g=0);e=b;var h=e.set,g=a.s,k=l;k&&(g.l(f),g.l(f+k-1));h.call(e,g.kb.subarray(f,f+k),c);c+=l;d-=l}}function Ye(a,b){let c=0,d=b.length;for(;d&&a.B!==a.i.length;){var e=a.i[a.B];const f=e.Tf+a.h;e=e.Zc-a.h;e>d?(e=d,a.h+=d):(a.B++,a.h=0);Ta(a.s,b.subarray(c,c+e),f);c+=e;d-=e}a.l+=c};function yg(a,b,c){this.h=a;this.v=c;this.A=[104,111,115,116,57,112];this.F=this.A.length;this.D="9P2000.L";this.j=this.o=8192;this.i=new Uint8Array(2*this.j);this.B=0;this.g=[];this.O=new Pe(b,{name:"virtio-9p",fb:48,je:4169,Kf:9,he:{Qa:43008,$:[{La:32,Za:0}],features:[0,32,29,28],Tg:()=>{}},notification:{Qa:43264,wg:!1,fg:[d=>{if(0===d){for(;Qe(this.l);)d=Re(this.l),Gg(this,d);d=this.l;const e=d.s.gb(d.g+2)+0&65535;d.s.Rf(d.h+4+8*d.size,e)}}]},Kb:{Qa:42752},lf:{Qa:42496,Hc:[{bytes:2,name:"mount tag length",
read:()=>this.F,write:()=>{}}].concat(Array.from(Array(254).keys()).map(d=>({bytes:1,name:"mount tag name "+d,read:()=>this.A[d]||0,write:()=>{}})))}});this.l=this.O.$[0]}yg.prototype.ja=function(){var a=[];a[0]=this.A;a[1]=this.F;a[2]=this.O;a[3]=this.D;a[4]=this.o;a[5]=this.j;a[6]=this.i;a[7]=this.B;a[8]=this.g.map(function(b){return[b.ka,b.type,b.uid,b.Nc]});a[9]=this.h;return a};
yg.prototype.J=function(a){this.A=a[0];this.F=a[1];this.O.J(a[2]);this.l=this.O.$[0];this.D=a[3];this.o=a[4];this.j=a[5];this.i=a[6];this.B=a[7];this.g=a[8].map(function(b){return{ka:b[0],type:b[1],uid:b[2],Nc:b[3]}});this.h.J(a[9])};yg.prototype.reset=function(){this.g=[];this.O.reset()};function W(a,b,c,d){G(["w","b","h"],[d+7,b+1,c],a.i,0);a.B=d+7}function Hg(a,b,c){c=G(["w"],[c],a.i,7);W(a,6,b,c)}function X(a,b){Ye(b,a.i.subarray(0,a.B));Ze(a.l,b);$e(a.l)}
async function Gg(a,b){var c=new Uint8Array(b.Lb);Se(b,c);var d={offset:0},e=K(["w","b","h"],c,d),f=e[0],h=e[1],g=e[2];switch(h){case 8:f=Hd(a.h);var k=Id(a.h);e=[16914839];e[1]=a.o;e[2]=Math.floor(k/e[1]);e[3]=e[2]-Math.floor(f/e[1]);e[4]=e[2]-Math.floor(f/e[1]);e[5]=Fd(a.h);e[6]=Gd(a.h);e[7]=0;e[8]=256;f=G("wwddddddw".split(""),e,a.i,7);W(a,h,g,f);X(a,b);break;case 112:case 12:e=K(["w","w"],c,d);f=e[0];d=e[1];c=a.g[f].ka;var l=xd(a.h,c);k=pd(a.h,c,d);Yc(a.h,a.g[f].ka,function(){var v=[];v[0]=l.Ra;
v[1]=this.j-24;G(["Q","w"],v,this.i,7);W(this,h,g,17);X(this,b)}.bind(a));break;case 70:e=K(["w","w","s"],c,d);c=e[0];f=e[1];k=e[2];k=Jd(a.h,a.g[c].ka,a.g[f].ka,k);if(0>k){Hg(a,g,-k);X(a,b);break}W(a,h,g,0);X(a,b);break;case 16:e=K(["w","s","s","w"],c,d);f=e[0];k=e[1];var m=e[3];c=md(a.h,k,a.g[f].ka,e[2]);l=xd(a.h,c);l.uid=a.g[f].uid;l.bb=m;G(["Q"],[l.Ra],a.i,7);W(a,h,g,13);X(a,b);break;case 18:e=K("wswwww".split(""),c,d);f=e[0];k=e[1];d=e[2];c=e[3];var p=e[4];m=e[5];c=ld(a.h,k,a.g[f].ka,c,p);l=xd(a.h,
c);l.mode=d;l.uid=a.g[f].uid;l.bb=m;G(["Q"],[l.Ra],a.i,7);W(a,h,g,13);X(a,b);break;case 22:e=K(["w"],c,d);f=e[0];l=xd(a.h,a.g[f].ka);f=G(["s"],[l.Lf],a.i,7);W(a,h,g,f);X(a,b);break;case 72:e=K(["w","s","w","w"],c,d);f=e[0];k=e[1];d=e[2];m=e[3];c=Wc(a.h,k,a.g[f].ka);l=xd(a.h,c);l.mode=d|16384;l.uid=a.g[f].uid;l.bb=m;G(["Q"],[l.Ra],a.i,7);W(a,h,g,13);X(a,b);break;case 14:e=K(["w","s","w","w","w"],c,d);f=e[0];k=e[1];c=e[2];d=e[3];m=e[4];a.v.send("9p-create",[k,a.g[f].ka]);c=kd(a.h,k,a.g[f].ka);a.g[f].ka=
c;a.g[f].type=1;a.g[f].Nc=k;l=xd(a.h,c);l.uid=a.g[f].uid;l.bb=m;l.mode=d|32768;G(["Q","w"],[l.Ra,a.j-24],a.i,7);W(a,h,g,17);X(a,b);break;case 52:e=K("wbwddws".split(""),c,d);f=e[0];c=e[2];k=0===e[4]?Infinity:e[4];e=Pd(e[1],e[3],k,e[5],e[6]);k=Rd(a.h,a.g[f].ka,e,c);G(["b"],[k],a.i,7);W(a,h,g,1);X(a,b);break;case 54:e=K("wbddws".split(""),c,d);f=e[0];k=0===e[3]?Infinity:e[3];e=Pd(e[1],e[2],k,e[4],e[5]);k=Qd(a.h,a.g[f].ka,e);k||(k=e,k.type=2);f=G(["b","d","d","w","s"],[k.type,k.start,Infinity===k.length?
0:k.length,k.h,k.g],a.i,7);W(a,h,g,f);X(a,b);break;case 24:e=K(["w","d"],c,d);f=e[0];l=xd(a.h,a.g[f].ka);if(!l||4===l.status){Hg(a,g,2);X(a,b);break}e[0]=e[1];e[1]=l.Ra;e[2]=l.mode;e[3]=l.uid;e[4]=l.bb;e[5]=l.pb;e[6]=l.jg<<8|l.kg;e[7]=l.size;e[8]=a.o;e[9]=Math.floor(l.size/512+1);e[10]=l.ee;e[11]=0;e[12]=l.ad;e[13]=0;e[14]=l.Qe;e[15]=0;e[16]=0;e[17]=0;e[18]=0;e[19]=0;G("dQwwwddddddddddddddd".split(""),e,a.i,7);W(a,h,g,153);X(a,b);break;case 26:e=K("wwwwwddddd".split(""),c,d);f=e[0];l=xd(a.h,a.g[f].ka);
e[1]&1&&(l.mode=e[2]);e[1]&2&&(l.uid=e[3]);e[1]&4&&(l.bb=e[4]);e[1]&16&&(l.ee=Math.floor((new Date).getTime()/1E3));e[1]&32&&(l.ad=Math.floor((new Date).getTime()/1E3));e[1]&64&&(l.Qe=Math.floor((new Date).getTime()/1E3));e[1]&128&&(l.ee=e[6]);e[1]&256&&(l.ad=e[8]);e[1]&8&&await Ad(a.h,a.g[f].ka,e[5]);W(a,h,g,0);X(a,b);break;case 50:e=K(["w","d"],c,d);f=e[0];W(a,h,g,0);X(a,b);break;case 40:case 116:e=K(["w","d","w"],c,d);f=e[0];k=e[1];m=e[2];l=xd(a.h,a.g[f].ka);if(!l||4===l.status){Hg(a,g,2);X(a,
b);break}if(2===a.g[f].type){(void 0).length<k+m&&(m=(void 0).length-k);for(e=0;e<m;e++)a.i[11+e]=(void 0)[k+e];G(["w"],[m],a.i,7);W(a,h,g,4+m)}else pd(a.h,a.g[f].ka,void 0),e=a.g[f].ka,m=Math.min(m,a.i.length-11),l.size<k+m?m=l.size-k:40===h&&(m=Ld(a.h,e,k+m)-k),k>l.size&&(m=0),a.v.send("9p-read-start",[a.g[f].Nc]),e=await yd(a.h,e,k,m),a.v.send("9p-read-end",[a.g[f].Nc,m]),e&&a.i.set(e,11),G(["w"],[m],a.i,7),W(a,h,g,4+m);X(a,b);break;case 118:e=K(["w","d","w"],c,d);f=e[0];k=e[1];m=e[2];e=a.g[f].Nc;
if(2===a.g[f].type){Hg(a,g,95);X(a,b);break}else await Bd(a.h,a.g[f].ka,k,m,c.subarray(d.offset));a.v.send("9p-write-end",[e,m]);G(["w"],[m],a.i,7);W(a,h,g,4);X(a,b);break;case 74:e=K(["w","s","w","s"],c,d);k=await td(a.h,a.g[e[0]].ka,e[1],a.g[e[2]].ka,e[3]);if(0>k){Hg(a,g,-k);X(a,b);break}W(a,h,g,0);X(a,b);break;case 76:e=K(["w","s","w"],c,d);d=e[0];k=e[1];c=e[2];f=gd(a.h,a.g[d].ka,k);if(-1===f){Hg(a,g,2);X(a,b);break}k=wd(a.h,a.g[d].ka,k);if(0>k){Hg(a,g,-k);X(a,b);break}W(a,h,g,0);X(a,b);break;
case 100:f=K(["w","s"],c,d);a.j!==f[0]&&(a.j=f[0],a.i=new Uint8Array(Math.min(16777216,2*a.j)));f=G(["w","s"],[a.j,a.D],a.i,7);W(a,h,g,f);X(a,b);break;case 104:e=K(["w","w","s","s","w"],c,d);f=e[0];a.g[f]={ka:0,type:1,uid:e[4],Nc:""};l=xd(a.h,a.g[f].ka);G(["Q"],[l.Ra],a.i,7);W(a,h,g,13);X(a,b);a.v.send("9p-attach");break;case 108:e=K(["h"],c,d);W(a,h,g,0);X(a,b);break;case 110:e=K(["w","w","h"],c,d);f=e[0];m=e[1];p=e[2];if(0===p){a.g[m]={ka:a.g[f].ka,type:1,uid:a.g[f].uid,Nc:a.g[f].Nc};G(["h"],[0],
a.i,7);W(a,h,g,2);X(a,b);break}k=[];for(e=0;e<p;e++)k.push("s");d=K(k,c,d);c=a.g[f].ka;k=9;var r=0;for(e=0;e<p;e++){c=gd(a.h,c,d[e]);if(-1===c)break;k+=G(["Q"],[xd(a.h,c).Ra],a.i,k);r++;a.g[m]={ka:c,type:1,uid:a.g[f].uid,Nc:d[e]}}G(["h"],[r],a.i,7);W(a,h,g,k-7);X(a,b);break;case 120:e=K(["w"],c,d);a.g[e[0]]&&0<=a.g[e[0]].ka&&(await rd(a.h,a.g[e[0]].ka),a.g[e[0]].ka=-1,a.g[e[0]].type=-1);W(a,h,g,0);X(a,b);break;case 32:e=K(["w","s","d","w"],c,d);f=e[0];k=e[1];c=e[3];a.g[f].type=2;W(a,h,g,0);X(a,b);
break;case 30:e=K(["w","w","s"],c,d),f=e[0],k=e[2],Hg(a,g,95),X(a,b)}};function Ig(a){function b(w){return 1+Math.floor((w-1)/2048)}function c(w){const D=w.lastIndexOf(".");return-1===D?w.substr(0,8):w.substr(0,Math.min(8,D))+"."+w.substr(D+1,3)}const d=new TextEncoder,e=new Date,f=(w,D)=>{w.buffer[w.offset++]=D;w.buffer[w.offset++]=D>>8},h=(w,D)=>{w.buffer[w.offset++]=D;w.buffer[w.offset++]=D>>8;w.buffer[w.offset++]=D>>16;w.buffer[w.offset++]=D>>24},g=(w,D)=>{w.buffer[w.offset++]=D>>8;w.buffer[w.offset++]=D},k=(w,D)=>{w.buffer[w.offset++]=D>>24;w.buffer[w.offset++]=
D>>16;w.buffer[w.offset++]=D>>8;w.buffer[w.offset++]=D},l=(w,D)=>{f(w,D);g(w,D)},m=(w,D)=>{h(w,D);k(w,D)},p=(w,D,T)=>{w.buffer.fill(T,w.offset,w.offset+=D)},r=(w,D)=>{w.offset+=d.encodeInto(D,w.buffer.subarray(w.offset)).written},v=w=>{p(w,16,32);w.buffer[w.offset++]=0},B=(w,D,T,ca,P,z)=>{ca||(D=c(D.toUpperCase().replace(/[^A-Z0-9_.]/g,""))+";1");w=d.encodeInto(D,w.buffer.subarray(w.offset+33)).written;D=w&1?0:1;q.buffer[q.offset++]=33+w+D;q.buffer[q.offset++]=0;m(q,P);m(q,z);P=q;z=e.getUTCFullYear()-
1900;P.buffer[P.offset++]=z;z=1+e.getUTCMonth();P.buffer[P.offset++]=z;z=e.getUTCDate();P.buffer[P.offset++]=z;z=e.getUTCHours();P.buffer[P.offset++]=z;z=e.getUTCMinutes();P.buffer[P.offset++]=z;z=e.getUTCSeconds();P.buffer[P.offset++]=z;P.buffer[P.offset++]=0;q.buffer[q.offset++]=T;q.buffer[q.offset++]=0;q.buffer[q.offset++]=0;l(q,1);q.buffer[q.offset++]=w;q.offset+=w+D};aa(0===b(0));aa(1===b(1));aa(1===b(2047));aa(1===b(2048));aa(2===b(2049));aa(2===b(4096));aa(3===b(4097));aa(11===b(20481));aa("abcdefgh.qwe"===
c("abcdefghijkl.qwerty"));aa("abcdefgh"===c("abcdefghijkl"));let C=24;a=a.map(({name:w,Yf:D})=>{const T=C;C+=b(D.length);w=c(w);return{name:w,Yf:D,Uh:T}});const y=C,q={buffer:new Uint8Array(2048*y),offset:32768};q.buffer[q.offset++]=1;r(q,"CD001");q.buffer[q.offset++]=1;q.buffer[q.offset++]=0;q.offset+=d.encodeInto("V86".padEnd(32),q.buffer.subarray(q.offset)).written;q.offset+=d.encodeInto("CDROM".padEnd(32),q.buffer.subarray(q.offset)).written;q.offset+=8;m(q,y);q.offset+=32;l(q,1);l(q,1);l(q,2048);
m(q,10);h(q,19);h(q,0);k(q,21);k(q,0);B(q,"\x00",2,!0,23,2048);p(q,128,32);p(q,128,32);p(q,128,32);p(q,128,32);p(q,37,32);p(q,37,32);p(q,37,32);v(q);v(q);v(q);v(q);q.buffer[q.offset++]=1;q.buffer[q.offset++]=0;q.offset+=512;q.offset+=653;q.buffer[q.offset++]=255;r(q,"CD001");q.buffer[q.offset++]=1;q.offset=38912;q.buffer[q.offset++]=1;q.buffer[q.offset++]=0;h(q,23);f(q,1);r(q,"\x00");q.offset=43008;q.buffer[q.offset++]=1;q.buffer[q.offset++]=0;k(q,23);g(q,1);r(q,"\x00");q.offset=47104;B(q,"\x00",
2,!0,23,2048);B(q,"\u0001",2,!0,23,2048);for(const {name:w,Yf:D,Uh:T}of a)B(q,w,0,!1,T,D.length);for(let {Yf:w,Uh:D}of a)q.buffer.set(w,2048*D);return q.buffer};const Jg=!location.hostname.endsWith("copy.sh"),Kg=["wss://relay.widgetry.org/","ws://localhost:8080/"];function Lg(){const a=Y("version");return a?"?"+a.textContent:""}function Mg(a){document.title=a+" - v86";const b=document.querySelector("meta[name=description]");b&&(b.content="Running "+a)}function Ng(a){return!!a&&"0"!==a}function Og(a){return new Promise((b,c)=>{const d=new FileReader;d.onload=()=>b(d.result);d.onerror=e=>c(e);d.readAsArrayBuffer(a)})}let Pg=0;
function Y(a){return document.getElementById(a)}const Qg="memory_size video_memory_size networking_proxy disable_audio enable_acpi boot_order".split(" ");for(const a of Qg)try{window.localStorage.removeItem(a)}catch(b){}
function Rg(){function a(){const k=[];for(const l of g){const m=l.filter(p=>p.element.checked);m.length&&k.push(m)}for(const l of h)l.element.style.display=k.every(m=>m.some(p=>p.Ba(l)))?"":"none"}function b(k,l){if(k=Y(k))k.onclick=()=>Y("relay_url").value=l}if(window.WebAssembly){Y("start_emulation").onclick=function(k){Sg(null,null);Y("start_emulation").blur();k.preventDefault()};var c=new URLSearchParams(location.search),d=c.get("cdn")||(Jg?"images/":"//i.copy.sh/");d=[{id:"archlinux",name:"Arch Linux",
G:536870912,oa:8388608,state:{url:d+"arch_state-v3.bin.zst"},filesystem:{Uf:d+"arch/"},xd:"virtio"},{id:"archlinux-boot",name:"Arch Linux",G:536870912,oa:8388608,filesystem:{Uf:d+"arch/",aj:{url:d+"fs.json"}},Eb:"rw apm=off vga=0x344 video=vesafb:ypan,vremap:8 root=host9p rootfstype=9p rootflags=trans=virtio,cache=loose mitigations=off audit=0 init_on_free=on tsc=reliable random.trust_cpu=on nowatchdog init=/usr/bin/init-openrc net.ifnames=0 biosdevname=0",hf:!0,xd:"virtio"},{id:"copy/skiffos",name:"SkiffOS",
P:{url:d+"skiffos/.iso",size:124672E3,async:!0,M:1048576,ea:!0},G:536870912},{id:"serenity",name:"SerenityOS",L:{url:d+"serenity-v3/.img.zst",size:734003200,async:!0,M:1048576,ea:!0},G:536870912,state:{url:d+"serenity_state-v4.bin.zst"},I:"https://serenityos.org/",Mb:!0},{id:"serenity-boot",name:"SerenityOS",L:{url:d+"serenity-v3/.img.zst",size:734003200,async:!0,M:1048576,ea:!0},G:536870912,I:"https://serenityos.org/"},{id:"redox",name:"Redox",L:{url:d+"redox_demo_i686_2024-09-07_1225_harddrive/.img",
size:671088640,async:!0,M:1048576,ea:!0},G:1073741824,state:{url:d+"redox_state-v2.bin.zst"},I:"https://www.redox-os.org/",xa:!0},{id:"redox-boot",name:"Redox",L:{url:d+"redox_demo_i686_2024-09-07_1225_harddrive/.img",size:671088640,async:!0,M:1048576,ea:!0},G:1073741824,I:"https://www.redox-os.org/",xa:!0},{id:"helenos",G:268435456,P:{url:d+"HelenOS-0.14.1-ia32.iso",size:25792512,async:!1},name:"HelenOS",I:"http://www.helenos.org/"},{id:"fiwix",G:268435456,L:{url:d+"FiwixOS-3.4-i386/.img",size:1073741824,
async:!0,M:1048576,ea:!0},name:"FiwixOS",I:"https://www.fiwix.org/"},{id:"haiku",G:536870912,L:{url:d+"haiku-v4/.img",size:1073741824,async:!0,M:1048576,ea:!0},state:{url:d+"haiku_state-v4.bin.zst"},name:"Haiku",I:"https://www.haiku-os.org/"},{id:"haiku-boot",G:536870912,L:{url:d+"haiku-v4/.img",size:1073741824,async:!0,M:1048576,ea:!0},name:"Haiku",I:"https://www.haiku-os.org/"},{id:"beos",G:536870912,L:{url:d+"beos5/.img",size:536870912,async:!0,M:1048576,ea:!0},name:"BeOS 5"},{id:"msdos",L:{url:d+
"msdos622/.img",size:67108864,async:!0,M:262144,ea:!0},name:"MS-DOS 6.22"},{id:"msdos4",V:{url:d+"msdos4.img",size:1474560},name:"MS-DOS 4"},{id:"freedos",V:{url:d+"freedos722.img",size:737280},name:"FreeDOS"},{id:"freegem",L:{url:d+"freegem/.bin",size:209715200,async:!0,M:262144,ea:!0},name:"Freedos with FreeGEM"},{id:"xcom",V:{url:d+"xcom144.img",size:1474560},name:"Freedos with Xcom",I:"http://xcom.infora.hu/index.html"},{id:"psychdos",L:{url:d+"psychdos/.img",size:549453824,async:!0,M:262144,
ea:!0},name:"PsychDOS",I:"https://psychoslinux.gitlab.io/DOS/INDEX.HTM"},{id:"86dos",V:{url:d+"pc86dos.img",size:163840},name:"86-DOS",I:"https://www.os2museum.com/wp/pc-86-dos/"},{id:"oberon",L:{url:d+"oberon.img",size:25165824,async:!1},name:"Oberon"},{id:"windows1",V:{url:d+"windows101.img",size:1474560},name:"Windows 1.01"},{id:"windows2",L:{url:d+"windows2.img",size:4177920,async:!1},name:"Windows 2.03"},{id:"linux26",P:{url:d+"linux.iso",size:6547456,async:!1},name:"Linux"},{id:"linux3",P:{url:d+
"linux3.iso",size:8638464,async:!1},name:"Linux"},{id:"linux4",P:{url:d+"linux4.iso",size:7731200,async:!1},name:"Linux",filesystem:{}},{id:"buildroot",tb:{url:d+"buildroot-bzimage.bin",size:5166352,async:!1},name:"Buildroot Linux",filesystem:{},Eb:"tsc=reliable mitigations=off random.trust_cpu=on"},{id:"buildroot6",tb:{url:d+"buildroot-bzimage68.bin",size:10068480,async:!1},name:"Buildroot Linux 6.8",filesystem:{},Eb:"tsc=reliable mitigations=off random.trust_cpu=on"},{id:"basiclinux",L:{url:d+"bl3-5.img",
size:104857600,async:!1},name:"BasicLinux"},{id:"xpud",P:{url:d+"xpud-0.9.2.iso",size:67108864,async:!1},name:"xPUD",G:268435456},{id:"elks",L:{url:d+"elks-hd32-fat.img",size:32514048,async:!1},name:"ELKS",I:"https://github.com/ghaerr/elks"},{id:"nodeos",tb:{url:d+"nodeos-kernel.bin",size:14452E3,async:!1},name:"NodeOS",Eb:"tsc=reliable mitigations=off random.trust_cpu=on"},{id:"dsl",G:268435456,P:{url:d+"dsl-4.11.rc2.iso",size:52824064,async:!1},name:"Damn Small Linux",I:"http://www.damnsmalllinux.org/"},
{id:"xwoaf",G:268435456,P:{url:d+"xwoaf_rebuild4.iso",size:2205696,async:!1},name:"xwoaf",I:"https://pupngo.dk/xwinflpy/xwoaf_rebuild.html"},{id:"minix",name:"Minix",G:268435456,P:{url:d+"minix-3.3.0/.iso",size:605581312,async:!0,M:1048576,ea:!0},I:"https://www.minix3.org/"},{id:"unix-v7",name:"Unix V7",L:{url:d+"unix-v7x86-0.8a/.img",size:152764416,async:!0,M:262144,ea:!0}},{id:"kolibrios",V:{url:Jg?d+"kolibri.img":"//builds.kolibrios.org/en_US/data/data/kolibri.img",size:1474560},name:"KolibriOS",
I:"https://kolibrios.org/en/"},{id:"kolibrios-fallback",V:{url:d+"kolibri.img",size:1474560},name:"KolibriOS"},{id:"mu",L:{url:d+"mu-shell.img",size:10321920,async:!1},G:268435456,name:"Mu",I:"https://github.com/akkartik/mu"},{id:"openbsd",L:{url:d+"openbsd/.img",size:1073741824,async:!0,M:1048576,ea:!0},state:{url:d+"openbsd_state-v2.bin.zst"},G:268435456,name:"OpenBSD"},{id:"sortix",P:{url:d+"sortix-1.0-i686.iso",size:71075840,async:!1},G:536870912,name:"Sortix"},{id:"openbsd-boot",L:{url:d+"openbsd/.img",
size:1073741824,async:!0,M:1048576,ea:!0},G:268435456,name:"OpenBSD"},{id:"netbsd",L:{url:d+"netbsd/.img",size:511000064,async:!0,M:1048576,ea:!0},G:268435456,name:"NetBSD"},{id:"crazierl",Nb:{url:d+"crazierl-elf.img",size:896592,async:!1},Jb:{url:d+"crazierl-initrd.img",size:18448316,async:!1},xa:!0,Eb:"kernel /libexec/ld-elf32.so.1",G:134217728,name:"Crazierl"},{id:"solos",V:{url:d+"os8.img",size:1474560},name:"Sol OS",I:"http://oby.ro/os/"},{id:"bootchess",V:{url:d+"bootchess.img",size:1474560},
name:"BootChess",I:"http://www.pouet.net/prod.php?which=64962"},{id:"bootbasic",V:{url:d+"bootbasic.img",size:512},name:"bootBASIC",I:"https://github.com/nanochess/bootBASIC"},{id:"bootlogo",V:{url:d+"bootlogo.img",size:512},name:"bootLogo",I:"https://github.com/nanochess/bootLogo"},{id:"pillman",V:{url:d+"pillman.img",size:512},name:"Pillman",I:"https://github.com/nanochess/Pillman"},{id:"invaders",V:{url:d+"invaders.img",size:512},name:"Invaders",I:"https://github.com/nanochess/Invaders"},{id:"sectorlisp",
V:{url:d+"sectorlisp-friendly.bin",size:512},name:"SectorLISP",I:"https://justine.lol/sectorlisp2/"},{id:"sectorforth",V:{url:d+"sectorforth.img",size:512},name:"sectorforth",I:"https://github.com/cesarblum/sectorforth"},{id:"floppybird",V:{url:d+"floppybird.img",size:1474560},name:"Floppy Bird",I:"http://mihail.co/floppybird"},{id:"stillalive",V:{url:d+"stillalive-os.img",size:368640},name:"Still Alive",I:"https://github.com/maniekx86/stillalive-os"},{id:"hello-v86",V:{url:d+"hello-v86.img",size:512},
name:"Hello v86"},{id:"tetros",V:{url:d+"tetros.img",size:512},name:"TetrOS",I:"https://github.com/daniel-e/tetros"},{id:"dino",V:{url:d+"bootdino.img",size:512},name:"dino",I:"https://github.com/franeklubi/dino"},{id:"bootrogue",V:{url:d+"bootrogue.img",size:512},name:"bootRogue",I:"https://github.com/nanochess/bootRogue"},{id:"duskos",L:{url:d+"duskos.img",async:!1,size:8388608},name:"Dusk OS",I:"http://duskos.org/"},{id:"windows2000",G:536870912,L:{url:d+"windows2k-v2/.img",size:2147483648,async:!0,
M:262144,ea:!0},name:"Windows 2000",state:{url:d+"windows2k_state-v4.bin.zst"},Mb:!0},{id:"windows2000-boot",G:536870912,L:{url:d+"windows2k-v2/.img",size:2147483648,async:!0,M:262144,ea:!0},name:"Windows 2000"},{id:"windows-me",G:268435456,L:{url:d+"windowsme-v2/.img",size:834666496,async:!0,M:262144,ea:!0},state:{url:d+"windows-me_state-v2.bin.zst"},name:"Windows ME"},{id:"windowsnt4",G:536870912,L:{url:d+"winnt4_noacpi/.img",size:523837440,async:!0,M:262144,ea:!0},name:"Windows NT 4.0",pd:2},{id:"windowsnt35",
G:268435456,L:{url:d+"windowsnt351/.img",size:163577856,async:!0,M:262144,ea:!0},name:"Windows NT 3.51"},{id:"windowsnt3",G:268435456,L:{url:d+"winnt31/.img",size:91226112,async:!0,M:262144,ea:!0},name:"Windows NT 3.1"},{id:"windows98",G:134217728,L:{url:d+"windows98/.img",size:314572800,async:!0,M:262144,ea:!0},name:"Windows 98",state:{url:d+"windows98_state-v2.bin.zst"},Mb:!0},{id:"windows98-boot",G:134217728,L:{url:d+"windows98/.img",size:314572800,async:!0,M:262144,ea:!0},name:"Windows 98"},{id:"windows95",
G:67108864,L:{url:d+"windows95-v2/.img",size:471859200,async:!0,M:262144,ea:!0},name:"Windows 95"},{id:"windows95-boot",G:67108864,L:{url:d+"windows95-v2/.img",size:471859200,async:!0,M:262144,ea:!0},name:"Windows 95"},{id:"windows30",G:67108864,P:{url:d+"Win30.iso",size:7774208,async:!1},name:"Windows 3.0"},{id:"windows31",G:67108864,L:{url:d+"win31.img",async:!1,size:34463744},name:"Windows 3.1"},{id:"tilck",G:134217728,L:{url:d+"tilck.img",async:!1,size:37748736},name:"Tilck",I:"https://github.com/vvaltchev/tilck"},
{id:"littlekernel",Nb:{url:d+"littlekernel-multiboot.img",async:!1,size:969580},name:"Little Kernel",I:"https://github.com/littlekernel/lk"},{id:"sanos",G:134217728,L:{url:d+"sanos-flp.img",async:!1,size:1474560},name:"Sanos",I:"http://www.jbox.dk/sanos/"},{id:"freebsd",G:268435456,L:{url:d+"freebsd/.img",size:2147483648,async:!0,M:1048576,ea:!0},state:{url:d+"freebsd_state-v2.bin.zst"},name:"FreeBSD"},{id:"freebsd-boot",G:268435456,L:{url:d+"freebsd/.img",size:2147483648,async:!0,M:1048576,ea:!0},
name:"FreeBSD"},{id:"reactos",G:536870912,L:{url:d+"reactos-v3/.img",size:734003200,async:!0,M:1048576,ea:!0},state:{url:d+"reactos_state-v3.bin.zst"},Mb:!0,name:"ReactOS",xa:!0,xd:"virtio",I:"https://reactos.org/"},{id:"reactos-boot",G:536870912,L:{url:d+"reactos-v2/.img",size:681574400,async:!0,M:1048576,ea:!0},name:"ReactOS",xa:!0,I:"https://reactos.org/"},{id:"skift",P:{url:d+"skift-20200910.iso",size:64452608,async:!1},name:"Skift",I:"https://skiftos.org/"},{id:"snowdrop",V:{url:d+"snowdrop.img",
size:1474560},name:"Snowdrop",I:"http://www.sebastianmihai.com/snowdrop/"},{id:"openwrt",L:{url:d+"openwrt-18.06.1-x86-legacy-combined-squashfs.img",size:19846474,async:!1},name:"OpenWrt"},{id:"qnx",V:{url:d+"qnx-demo-network-4.05.img",size:1474560},name:"QNX 4.05"},{id:"9front",G:134217728,L:{url:d+"9front-10931.386/.iso",size:489453568,async:!0,M:1048576,ea:!0},state:{url:d+"9front_state-v3.bin.zst"},xa:!0,name:"9front",I:"https://9front.org/"},{id:"9front-boot",G:134217728,L:{url:d+"9front-10931.386/.iso",
size:489453568,async:!0,M:1048576,ea:!0},xa:!0,name:"9front",I:"https://9front.org/"},{id:"9legacy",G:536870912,L:{url:d+"9legacy.img",async:!1,size:16E6},name:"9legacy",I:"http://www.9legacy.org/"},{id:"mobius",V:{url:d+"mobius-fd-release5.img",size:1474560},name:"Mobius"},{id:"android",G:536870912,P:{url:d+"android-x86-1.6-r2/.iso",size:54661120,async:!0,M:1048576,ea:!0},name:"Android"},{id:"android4",G:536870912,P:{url:d+"android_x86_nonsse3_4.4r1_20140904/.iso",size:247463936,async:!0,M:1048576,
ea:!0},name:"Android 4"},{id:"tinycore",G:268435456,L:{url:d+"TinyCore-11.0.iso",size:19922944,async:!1},name:"Tinycore",I:"http://www.tinycorelinux.net/"},{id:"slitaz",G:536870912,L:{url:d+"slitaz-rolling-2024.iso",size:56573952,async:!1},name:"SliTaz",I:"https://slitaz.org/"},{id:"freenos",G:268435456,P:{url:d+"FreeNOS-1.0.3.iso",async:!1,size:11014144},name:"FreeNOS",xa:!0,I:"http://www.freenos.org/"},{id:"syllable",G:536870912,L:{url:d+"syllable-destop-0.6.7/.img",async:!0,size:524288E3,M:524288,
ea:!0},name:"Syllable",I:"http://syllable.metaproject.frl/"},{id:"toaruos",G:536870912,P:{url:d+"toaruos-1.6.1-core.iso",size:67567616,async:!1},name:"ToaruOS",xa:!0,I:"https://toaruos.org/"},{id:"nopeos",P:{url:d+"nopeos-0.1.iso",size:532480,async:!1},name:"Nope OS",I:"https://github.com/d99kris/nopeos"},{id:"soso",P:{url:d+"soso.iso",size:22546432,async:!1},name:"Soso",I:"https://github.com/ozkl/soso"},{id:"pcmos",V:{url:d+"PCMOS386-9-user-patched.img",size:1474560},name:"PC-MOS/386",I:"https://github.com/roelandjansen/pcmos386v501"},
{id:"jx",V:{url:d+"jx-demo.img",size:1474560},name:"JX",I:"https://www4.cs.fau.de/Projects/JX/index.html"},{id:"house",V:{url:d+"hOp-0.8.img",size:1474560},name:"House",I:"https://programatica.cs.pdx.edu/House/"},{id:"bleskos",name:"BleskOS",P:{url:d+"bleskos_2024u32.iso",size:1835008,async:!1},I:"https://github.com/VendelinSlezak/BleskOS"},{id:"boneos",name:"BoneOS",P:{url:d+"BoneOS.iso",size:11429888,async:!1},I:"https://amanuel.io/projects/BoneOS/"},{id:"mikeos",name:"MikeOS",P:{url:d+"mikeos.iso",
size:3311616,async:!1},I:"https://mikeos.sourceforge.net/"},{id:"bluejay",name:"Blue Jay",V:{url:d+"bj050.img",size:1474560},I:"https://archiveos.org/blue-jay/"},{id:"t3xforth",name:"T3XFORTH",V:{url:d+"t3xforth.img",size:1474560},I:"https://t3x.org/t3xforth/"},{id:"nanoshell",name:"NanoShell",P:{url:d+"nanoshell.iso",size:6785024,async:!1},I:"https://github.com/iProgramMC/NanoShellOS"},{id:"catk",name:"CatK",P:{url:d+"catkernel.iso",size:11968512,async:!1},I:"https://catk.neocities.org/"},{id:"mcp",
name:"M/CP",V:{url:d+"mcp2.img",size:512},I:"https://github.com/ybuzoku/MCP"},{id:"ibm-exploring",name:"Exploring The IBM Personal Computer",V:{url:d+"ibm-exploring.img",size:368640}},{id:"leetos",name:"lEEt/OS",V:{url:d+"leetos.img",size:1474560},I:"http://sininenankka.dy.fi/leetos/index.php"},{id:"newos",name:"NewOS",V:{url:d+"newos-flp.img",size:1474560,async:!1},I:"https://newos.org/"},{id:"aros-broadway",name:"AROS Broadway",G:536870912,P:{url:d+"broadway10/.iso",size:742051840,async:!0,M:524288,
ea:!0},I:"https://web.archive.org/web/20231109224346/http://www.aros-broadway.de/"},{id:"icaros",name:"Icaros Desktop",G:536870912,P:{url:d+"icaros-pc-i386-2.3/.iso",size:726511616,async:!0,M:524288,ea:!0},I:"http://vmwaros.blogspot.com/"},{id:"tinyaros",name:"Tiny Aros",G:536870912,P:{url:d+"tinyaros-pc-i386/.iso",size:111175680,async:!0,M:524288,ea:!0},I:"https://www.tinyaros.it/"},{id:"dancy",name:"Dancy",P:{url:d+"dancy.iso",size:10485760,async:!1},I:"https://github.com/Tiihala/Dancy"},{id:"curios",
name:"CuriOS",L:{url:d+"curios.img",size:83886080,async:!1},I:"https://github.com/h5n1xp/CuriOS"},{id:"os64",name:"OS64",P:{url:d+"os64boot.iso",size:5580800,async:!1},I:"https://os64.blogspot.com/"},{id:"ipxe",name:"iPXE",P:{url:d+"ipxe.iso",size:4194304,async:!1},I:"https://ipxe.org/"},{id:"netboot.xyz",name:"netboot.xyz",P:{url:d+"netboot.xyz.iso",size:2398208,async:!1},I:"https://netboot.xyz/",xd:"virtio"},{id:"squeaknos",name:"SqueakNOS",P:{url:d+"SqueakNOS.iso",size:61171712,async:!1},G:536870912,
I:"https://squeaknos.blogspot.com/"},{id:"chokanji4",name:"Chokanji 4",L:{url:d+"chokanji4/.img.zst",size:10737418240,async:!0,M:262144,ea:!0},G:536870912,I:"https://archive.org/details/brightv4000"}];var e=c.get("profile");if(!e){var f=document.createElement("link");f.rel="prefetch";f.href="build/v86.wasm"+Lg();document.head.appendChild(f)}f=document.createElement("link");f.rel="prefetch";f.href="build/xterm.js";document.head.appendChild(f);for(const k of d){if(e===k.id){Sg(k,c);return}const l=Y("start_"+
k.id);l&&(l.onclick=m=>{m.ctrlKey||(m.preventDefault(),l.blur(),Sg(k,null))})}if("custom"===e){if(c.has("hda.url")||c.has("cdrom.url")||c.has("fda.url")){Sg(null,c);return}}else if(/^[a-zA-Z0-9\-_]+\/[a-zA-Z0-9\-_]+$/g.test(e)){const k="https://v86-user-images.b-cdn.net/"+e;fetch(k+"/profile.json").catch(()=>alert("Profile not found: "+e)).then(l=>l.json()).then(l=>{function m(p){return p&&{url:k+"/"+p.url,async:p.async,size:p.size}}l={id:l.id,name:l.name,G:l.memory_size,oa:l.vga_memory_size,xa:l.acpi,
Db:l.boot_order,L:m(l.hda),P:m(l.cdrom),V:m(l.fda),Nb:m(l.multiboot),tb:m(l.bzimage),Jb:m(l.initrd)};Sg(l,c)})}c.has("m")&&(Y("memory_size").value=c.get("m"));c.has("vram")&&(Y("vga_memory_size").value=c.get("vram"));c.has("relay_url")&&(Y("relay_url").value=c.get("relay_url"));c.has("mute")&&(Y("disable_audio").checked=Ng(c.get("mute")));c.has("acpi")&&(Y("acpi").checked=Ng(c.get("acpi")));c.has("boot_order")&&(Y("boot_order").value=c.get("boot_order"));for(const k of["hda","hdb"]){const l=Y(k+"_toggle_empty_disk");
l&&(l.onclick=function(m){m.preventDefault();m=document.createElement("input");m.id=k+"_empty_size";m.type="number";m.min="1";m.value="100";const p=l.parentNode;p.innerHTML="";p.append("Empty disk of ",m," MB")})}var h=Array.from(document.querySelectorAll("#oses tbody tr")).map(k=>{const [,l,m]=k.children[1].textContent.match(/([\d\.]+)\+? (\w+)/);let p=+l;"MB"===m?p*=1048576:"KB"===m&&(p*=1024);return{element:k,size:p,Qh:"gui_icon"===k.children[2].firstChild.className,family:k.children[3].textContent.replace(/-like/,
""),wh:k.children[4].textContent,status:k.children[5].textContent,source:k.children[6].textContent,languages:new Set(k.children[7].textContent.split(", ")),Qg:k.children[8].textContent}});d=[[{id:"linux",Ba:k=>"Linux"===k.family},{id:"bsd",Ba:k=>"BSD"===k.family},{id:"windows",Ba:k=>"Windows"===k.family},{id:"unix",Ba:k=>"Unix"===k.family},{id:"dos",Ba:k=>"DOS"===k.family},{id:"custom",Ba:k=>"Custom"===k.family}],[{id:"graphical",Ba:k=>k.Qh},{id:"text",Ba:k=>!k.Qh}],[{id:"floppy",Ba:k=>"Floppy"===
k.Qg},{id:"cd",Ba:k=>"CD"===k.Qg},{id:"hd",Ba:k=>"HD"===k.Qg}],[{id:"bootsector",Ba:k=>512>=k.size},{id:"lt5mb",Ba:k=>5242880>=k.size},{id:"gt5mb",Ba:k=>5242880<k.size}],[{id:"modern",Ba:k=>"Modern"===k.status},{id:"historic",Ba:k=>"Historic"===k.status}],[{id:"opensource",Ba:k=>"Open-source"===k.source},{id:"proprietary",Ba:k=>"Proprietary"===k.source}],[{id:"16bit",Ba:k=>"16-bit"===k.wh},{id:"32bit",Ba:k=>"32-bit"===k.wh}],[{id:"asm",Ba:k=>k.languages.has("ASM")},{id:"c",Ba:k=>k.languages.has("C")},
{id:"cpp",Ba:k=>k.languages.has("C++")},{id:"other_lang",Ba:k=>["ASM","C","C++"].every(l=>!k.languages.has(l))}]];var g=[];for(const k of d)d=k.filter(l=>{const m=document.getElementById(`filter_${l.id}`);m&&(m.onchange=a,l.element=m);return m}),d.length&&g.push(d);b("network_none","");b("network_inbrowser","inbrowser");b("network_fetch","fetch");b("network_relay","wss://relay.widgetry.org/");b("network_wisp","wisps://wisp.mercurywork.shop/v86/")}else alert("Your browser is not supported because it doesn't support WebAssembly")}
window.addEventListener("load",Rg,!1);window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",Tg)},0)});"complete"===document.readyState&&Rg();
function Sg(a,b){Y("boot_options").style.display="none";const c=new Map;c.set("profile",a?.id||"custom");const d={};if(a&&(a.state&&(Y("reset").style.display="none"),Mg(a.name),d.Ac=a.state,d.filesystem=a.filesystem,d.V=a.V,d.P=a.P,d.L=a.L,d.ob=a.ob,d.Nb=a.Nb,d.tb=a.tb,d.Jb=a.Jb,d.Eb=a.Eb,d.hf=a.hf,d.Mb=a.Mb,d.pd=a.pd,d.xa=a.xa,d.G=a.G,d.oa=a.oa,d.Db=a.Db,d.xd=a.xd,a.I)){Y("description").style.display="block";var e=document.createElement("a");e.href=a.I;e.textContent=a.name;e.target="_blank";Y("description").append(document.createTextNode("Running "),
e)}if(b){if(!d.Ac){e=parseInt(b.get("chunk_size"),10);0<=e?(e=Math.min(4194304,Math.max(512,e)),e=qa(e)):e=262144;if(b.has("hda.url"))d.L={size:parseInt(b.get("hda.size"),10)||void 0,url:b.get("hda.url"),M:e,async:!0};else if(b.has("hda.empty")){var f=parseInt(b.get("hda.empty"),10);0<f&&(d.L={buffer:new ArrayBuffer(f)})}b.has("hdb.url")?d.ob={size:parseInt(b.get("hdb.size"),10)||void 0,url:b.get("hdb.url"),M:e,async:!0}:b.has("hdb.empty")&&(f=parseInt(b.get("hdb.empty"),10),0<f&&(d.ob={buffer:new ArrayBuffer(f)}));
b.has("cdrom.url")&&(d.P={size:parseInt(b.get("cdrom.size"),10)||void 0,url:b.get("cdrom.url"),M:e,async:!0});b.has("fda.url")&&(d.V={size:parseInt(b.get("fda.size"),10)||void 0,url:b.get("fda.url"),async:!1});e=parseInt(b.get("m"),10);0<e&&(d.G=1048576*Math.max(16,e));e=parseInt(b.get("vram"),10);0<e&&(d.oa=1048576*e);d.xa=b.has("acpi")?Ng(b.get("acpi")):d.xa;d.yl="bochs"===b.get("bios");d.xd=b.get("net_device_type")||d.xd}d.Fc=b.get("relay_url");d.mf=Ng(b.get("disable_jit"));d.$f=Ng(b.get("mute"))}d.Fc||
(d.Fc=Y("relay_url").value,Kg.includes(d.Fc)||c.set("relay_url",d.Fc));d.Fc.startsWith("fetch:")&&(d.Mc=d.Fc.slice(6),d.Fc="fetch");d.$f=Y("disable_audio").checked||d.$f;d.$f&&c.set("mute","1");if(!d.Ac){if(e=Y("bios").files[0])d.mb={buffer:e};if(f=Y("vga_bios").files[0])d.Md={buffer:f};if(f=Y("floppy_image").files[0])d.V={buffer:f};const m=Y("cdrom_image").files[0];m&&(d.P={buffer:m});const p=Y("hda_image")?.files[0];p&&(d.L={buffer:p});var h=+Y("hda_empty_size")?.value;h&&(h*=1048576,d.L={buffer:new ArrayBuffer(h)},
c.set("hda.empty",String(h)));if(h=Y("hdb_image")?.files[0])d.ob={buffer:h};var g=+Y("hdb_empty_size")?.value;if(g){var k=1048576*g;d.ob={buffer:new ArrayBuffer(1048576*g)};c.set("hdb.empty",String(k))}if(g=Y("multiboot_image")?.files[0])d.Nb={buffer:g};if(k=Y("bzimage").files[0])d.tb={buffer:k};if(k=Y("initrd").files[0])d.Jb={buffer:k};(e=g?.name||p?.name||m?.name||h?.name||f?.name||e?.name)&&Mg(e);e=parseInt(Y("memory_size").value,10)||128;d.G&&128===e||(d.G=1048576*e);128!==e&&c.set("m",String(e));
e=parseInt(Y("vga_memory_size").value,10)||8;d.oa&&8===e||(d.oa=1048576*e);8!==e&&c.set("vram",String(e));e=parseInt(Y("boot_order").value,16)||0;d.Db&&0===e||(d.Db=e);0!==d.Db&&c.set("boot_order",d.Db.toString(16));void 0===d.xa&&(d.xa=Y("acpi").checked,d.xa&&c.set("acpi","1"));d.mb||(d.mb={url:"bios/seabios.bin"});d.Md||(d.Md={url:"bios/vgabios.bin"});d.yl&&(d.mb={url:"bios/bochs-bios.bin"},d.Md={url:"bios/bochs-vgabios.bin"})}b||Ug(c);const l=new Td({Ki:"build/v86.wasm"+Lg(),screen:{Xf:Y("screen_container"),
zl:!1},cd:{type:d.xd||"ne2k",Fc:d.Fc,Mc:d.Mc},$i:!0,G:d.G,oa:d.oa,Db:d.Db,mb:d.mb,Md:d.Md,V:d.V,L:d.L,ob:d.ob,P:d.P,Nb:d.Nb,tb:d.tb,Jb:d.Jb,Eb:d.Eb,hf:d.hf,xa:d.xa,mf:d.mf,Ac:d.Ac,filesystem:d.filesystem||{},rj:d.$f,Mb:d.Mb,pd:d.pd});be(l,"emulator-ready",function(){if(l.Aa.s.Na.exports.profiler_is_enabled()){const m=document.createElement("pre");document.body.appendChild(m);setInterval(function(){if(l.ud()){var p=l.Aa.s,r="",v="COMPILE COMPILE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_WRONG_ADDRESS_SPACE COMPILE_CUT_OFF_AT_END_OF_PAGE COMPILE_WITH_LOOP_SAFETY COMPILE_PAGE COMPILE_PAGE/COMPILE COMPILE_BASIC_BLOCK COMPILE_DUPLICATED_BASIC_BLOCK COMPILE_WASM_BLOCK COMPILE_WASM_LOOP COMPILE_DISPATCHER COMPILE_ENTRY_POINT COMPILE_WASM_TOTAL_BYTES COMPILE_WASM_TOTAL_BYTES/COMPILE_PAGE RUN_INTERPRETED RUN_INTERPRETED_NEW_PAGE RUN_INTERPRETED_PAGE_HAS_CODE RUN_INTERPRETED_PAGE_HAS_ENTRY_AFTER_PAGE_WALK RUN_INTERPRETED_NEAR_END_OF_PAGE RUN_INTERPRETED_DIFFERENT_STATE RUN_INTERPRETED_DIFFERENT_STATE_CPL3 RUN_INTERPRETED_DIFFERENT_STATE_FLAT RUN_INTERPRETED_DIFFERENT_STATE_IS32 RUN_INTERPRETED_DIFFERENT_STATE_SS32 RUN_INTERPRETED_MISSED_COMPILED_ENTRY_RUN_INTERPRETED RUN_INTERPRETED_STEPS RUN_FROM_CACHE RUN_FROM_CACHE_STEPS RUN_FROM_CACHE_STEPS/RUN_FROM_CACHE RUN_FROM_CACHE_STEPS/RUN_INTERPRETED_STEPS DIRECT_EXIT INDIRECT_JUMP INDIRECT_JUMP_NO_ENTRY NORMAL_PAGE_CHANGE NORMAL_FALLTHRU NORMAL_FALLTHRU_WITH_TARGET_BLOCK NORMAL_BRANCH NORMAL_BRANCH_WITH_TARGET_BLOCK CONDITIONAL_JUMP CONDITIONAL_JUMP_PAGE_CHANGE CONDITIONAL_JUMP_EXIT CONDITIONAL_JUMP_FALLTHRU CONDITIONAL_JUMP_FALLTHRU_WITH_TARGET_BLOCK CONDITIONAL_JUMP_BRANCH CONDITIONAL_JUMP_BRANCH_WITH_TARGET_BLOCK DISPATCHER_SMALL DISPATCHER_LARGE LOOP LOOP_SAFETY CONDITION_OPTIMISED CONDITION_UNOPTIMISED CONDITION_UNOPTIMISED_PF CONDITION_UNOPTIMISED_UNHANDLED_L CONDITION_UNOPTIMISED_UNHANDLED_LE FAILED_PAGE_CHANGE SAFE_READ_FAST SAFE_READ_SLOW_PAGE_CROSSED SAFE_READ_SLOW_NOT_VALID SAFE_READ_SLOW_NOT_USER SAFE_READ_SLOW_IN_MAPPED_RANGE SAFE_WRITE_FAST SAFE_WRITE_SLOW_PAGE_CROSSED SAFE_WRITE_SLOW_NOT_VALID SAFE_WRITE_SLOW_NOT_USER SAFE_WRITE_SLOW_IN_MAPPED_RANGE SAFE_WRITE_SLOW_READ_ONLY SAFE_WRITE_SLOW_HAS_CODE SAFE_READ_WRITE_FAST SAFE_READ_WRITE_SLOW_PAGE_CROSSED SAFE_READ_WRITE_SLOW_NOT_VALID SAFE_READ_WRITE_SLOW_NOT_USER SAFE_READ_WRITE_SLOW_IN_MAPPED_RANGE SAFE_READ_WRITE_SLOW_READ_ONLY SAFE_READ_WRITE_SLOW_HAS_CODE PAGE_FAULT TLB_MISS MAIN_LOOP MAIN_LOOP_IDLE DO_MANY_CYCLES CYCLE_INTERNAL INVALIDATE_ALL_MODULES_NO_FREE_WASM_INDICES INVALIDATE_MODULE_WRITTEN_WHILE_COMPILED INVALIDATE_MODULE_UNUSED_AFTER_OVERWRITE INVALIDATE_MODULE_DIRTY_PAGE INVALIDATE_PAGE_HAD_CODE INVALIDATE_PAGE_HAD_ENTRY_POINTS DIRTY_PAGE_DID_NOT_HAVE_CODE RUN_FROM_CACHE_EXIT_SAME_PAGE RUN_FROM_CACHE_EXIT_NEAR_END_OF_PAGE RUN_FROM_CACHE_EXIT_DIFFERENT_PAGE CLEAR_TLB FULL_CLEAR_TLB TLB_FULL TLB_GLOBAL_FULL MODRM_SIMPLE_REG MODRM_SIMPLE_REG_WITH_OFFSET MODRM_SIMPLE_CONST_OFFSET MODRM_COMPLEX SEG_OFFSET_OPTIMISED SEG_OFFSET_NOT_OPTIMISED SEG_OFFSET_NOT_OPTIMISED_ES SEG_OFFSET_NOT_OPTIMISED_FS SEG_OFFSET_NOT_OPTIMISED_GS SEG_OFFSET_NOT_OPTIMISED_NOT_FLAT".split(" "),
B=0;const y={};for(let q=0;q<v.length;q++){const w=v[q];var C=void 0;if(w.includes("/")){B++;const [D,T]=w.split("/");C=y[D]/y[T]}else C=y[w]=p.Na.exports.profiler_stat_get(q-B),C=1E8<=C?Math.round(C/1E6)+"m":1E5<=C?Math.round(C/1E3)+"k":C;r+=w+"="+C+"\n"}r+="\n";v=p.Na.exports.get_valid_tlb_entries_count();B=p.Na.exports.get_valid_global_tlb_entries_count();r=r+("TLB_ENTRIES="+v+" ("+B+" global, "+(v-B)+" non-global)\nWASM_TABLE_FREE=")+(p.Na.exports.jit_get_wasm_table_index_free_list_count()+"\n");
r+="JIT_CACHE_SIZE="+p.Na.exports.jit_get_cache_size()+"\n";r+="FLAT_SEGMENTS="+p.Na.exports.has_flat_segmentation()+"\n";r+="wasm memory size: "+(p.Ma.buffer.byteLength>>20)+"m\n";r+="Config:\n";r+="JIT_DISABLED="+p.Na.exports.get_jit_config(0)+"\n";r+="MAX_PAGES="+p.Na.exports.get_jit_config(1)+"\n";r+="JIT_USE_LOOP_SAFETY="+!!p.Na.exports.get_jit_config(2)+"\n";r+="MAX_EXTRA_BASIC_BLOCKS="+p.Na.exports.get_jit_config(3)+"\n";p=[Kb(p,!1,!1,!1,!1),Kb(p,!0,!1,!1,!1),Kb(p,!1,!0,!1,!1),Kb(p,!1,!1,!0,
!1),Kb(p,!1,!1,!1,!0)].join("\n\n");m.textContent=r+p}},1E3)}"dsl helenos android android4 redox beos 9legacy".split(" ").includes(a?.id)&&setTimeout(()=>{de(l,"9legacy"===a.id?"1\n":"\n")},3E3);Vg(a,d,l);b?.has("c")&&setTimeout(function(){de(l,b.get("c")+"\n")},25);b?.has("s")&&setTimeout(function(){for(var m=b.get("s")+"\n",p=0;p<m.length;p++)l.v.send("serial0-input",m.charCodeAt(p))},25)});be(l,"emulator-loaded",function(){l.Aa.s.u.P||(Y("change_cdrom_image").style.display="none")});be(l,"download-progress",
function(m){const p=Y("loading");p.style.display="block";if(m.vf.endsWith(".wasm")){var r=m.vf.split("/");p.textContent="Fetching "+r[r.length-1]+" ..."}else if(m.uf===m.tf-1&&m.loaded>=m.total-2048)p.textContent="Done downloading. Starting now ...";else{r="Downloading images ";"number"===typeof m.uf&&m.tf&&(r+="["+(m.uf+1)+"/"+m.tf+"] ");if(m.total&&"number"===typeof m.loaded){m=Math.floor(m.loaded/m.total*100);m=Math.min(100,Math.max(0,m));var v=Math.floor(m/2);r=r+(m+"% [")+"#".repeat(v);r+=" ".repeat(50-
v)+"]"}else r+=".".repeat(Pg++%50);p.textContent=r}});be(l,"download-error",function(m){const p=Y("loading");p.style.display="block";p.textContent=`Loading ${m.vf} failed. Check your connection and reload the page to try again.`})}
function Vg(a,b,c){function d(){var z=Date.now(),L=c.Aa?c.Aa.s.Nj[0]>>>0:0;L<l&&(l-=4294967296);var I=L-l;l=L;r+=I;if(L=z-g)k+=L,g=z,Y("speed").textContent=(I/1E3/L).toFixed(1),Y("avg_speed").textContent=(r/1E3/k).toFixed(1),z=k/1E3|0,Y("running_time").textContent=60>z?z+"s":3600>z?(z/60|0)+"m "+da(z%60,2)+"s":(z/3600|0)+"h "+da((z/60|0)%60,2)+"m "+da(z%60,2)+"s"}function e(z,L,I){var M=Y("get_"+I+"_image");!z||z.async?M.style.display="none":M.onclick=function(){const ma=L.file&&L.file.name||(a?.id||
"v86")+("cdrom"===I?".iso":".img");if(L.Oh){var Ia=L.Oh(ma);xa(Ia,ma)}else L.ac(function(Xa){Xa?va(Xa,ma):alert("The file could not be loaded. Maybe it's too big?")});M.blur()}}function f(z){z.ctrlKey?window.onbeforeunload=function(){window.onbeforeunload=null;return"CTRL-W cannot be sent to the emulator."}:window.onbeforeunload=null}Y("loading").style.display="none";Y("runtime_options").style.display="block";Y("runtime_infos").style.display="block";Y("screen_container").style.display="block";b.filesystem?
Wg(c):be(c,"9p-attach",function(){Wg(c)});Y("run").onclick=function(){c.ud()?(Y("run").value="Run",c.stop()):(Y("run").value="Pause",c.If());Y("run").blur()};Y("exit").onclick=function(){c.ya();const z=new URL(location.href);z.searchParams.delete("profile");location.href=z.pathname+z.search};Y("lock_mouse").onclick=function(){if(!h)Y("toggle_mouse").onclick();ee();Y("lock_mouse").blur()};var h=!0;Y("toggle_mouse").onclick=function(){h=!h;c.j&&(c.j.dg=h);Y("toggle_mouse").value=(h?"Dis":"En")+"able mouse";
Y("toggle_mouse").blur()};var g=0,k=0,l=0,m=null,p=!1,r=0;be(c,"emulator-started",function(){g=Date.now();m=setInterval(d,1E3)});be(c,"emulator-stopped",function(){d();null!==m&&clearInterval(m)});var v=0,B=0,C=[];be(c,"9p-read-start",function(z){z=z[0];C.push(z);Y("info_filesystem").style.display="block";Y("info_filesystem_status").textContent="Loading ...";Y("info_filesystem_last_file").textContent=z});be(c,"9p-read-end",function(z){v+=z[1];Y("info_filesystem_bytes_read").textContent=v;const L=
z[0];C=C.filter(I=>I!==L);C[0]?Y("info_filesystem_last_file").textContent=C[0]:Y("info_filesystem_status").textContent="Idle"});be(c,"9p-write-end",function(z){B+=z[1];Y("info_filesystem_bytes_written").textContent=B;C[0]||(Y("info_filesystem_last_file").textContent=z[0])});var y=0,q=0,w=0,D=0;Y("ide_type").textContent=c.nb.P?" (CD-ROM)":" (hard disk)";be(c,"ide-read-start",function(){Y("info_storage").style.display="block";Y("info_storage_status").textContent="Loading ..."});be(c,"ide-read-end",
function(z){y+=z[1];q+=z[2];Y("info_storage_status").textContent="Idle";Y("info_storage_bytes_read").textContent=y;Y("info_storage_sectors_read").textContent=q});be(c,"ide-write-end",function(z){w+=z[1];D+=z[2];Y("info_storage_bytes_written").textContent=w;Y("info_storage_sectors_written").textContent=D});var T=0,ca=0;be(c,"eth-receive-end",function(z){ca+=z[0];Y("info_network").style.display="block";Y("info_network_bytes_received").textContent=ca});be(c,"eth-transmit-end",function(z){T+=z[0];Y("info_network").style.display=
"block";Y("info_network_bytes_transmitted").textContent=T});be(c,"mouse-enable",function(z){p=z;Y("info_mouse_enabled").textContent=z?"Yes":"No"});be(c,"screen-set-size",function(z){const [L,I,M]=z;Y("info_res").textContent=L+"x"+I+(M?"x"+M:"");Y("info_vga_mode").textContent=M?"Graphical":"Text"});Y("reset").onclick=function(){c.$g();Y("reset").blur()};e(b.L,c.nb.L,"hda");e(b.ob,c.nb.ob,"hdb");e(b.V,c.nb.V,"fda");e(b.Ue,c.nb.Ue,"fdb");e(b.P,c.nb.P,"cdrom");Y("change_fda_image").value=b.V?"Eject floppy image":
"Insert floppy image";Y("change_fda_image").onclick=function(){if(c.Aa.s.u.ne.sd)c.cg(),Y("change_fda_image").value="Insert floppy image";else{const z=document.createElement("input");z.type="file";z.onchange=async function(){const L=z.files[0];L&&(await c.Jf({buffer:L}),Y("change_fda_image").value="Eject floppy image")};z.click()}Y("change_fda_image").blur()};Y("change_cdrom_image").value=b.P?"Eject CD image":"Insert CD image";Y("change_cdrom_image").onclick=function(){if(c.Aa.s.u.P.buffer)Jf(c.Aa.s.u.P),
Y("change_cdrom_image").value="Insert CD image";else{const z=document.createElement("input");z.type="file";z.multiple="multiple";z.onchange=async function(){const L=z.files;if(1===L.length&&L[0].name.endsWith(".iso"))var I=L[0];else if(L.length){I=[];for(const M of L)I.push({name:M.name,Yf:new Uint8Array(await Og(M))});I=Ig(I).buffer}I&&(await c.ug({buffer:I}),Y("change_cdrom_image").value="Eject CD image")};z.click()}Y("change_cdrom_image").blur()};Y("memory_dump").onclick=function(){const z=c.Aa.s.kb;
va(new Uint8Array(z.buffer,z.byteOffset,z.length),"v86memory.bin");Y("memory_dump").blur()};Y("capture_network_traffic").onclick=function(){function z(I,M){var ma=L,Ia=ma.push,Xa=performance.now()/1E3;const db=[];let na=0;for(;na+15<M.length;na+=16){var oa=da(na.toString(16).toUpperCase(),5)+"   ";for(var wa=0;16>wa;wa++)oa+=da(M[na+wa].toString(16).toUpperCase(),2)+" ";oa+="  ";for(wa=0;16>wa;wa++){var ra=M[na+wa];oa+=33<=ra&&34!==ra&&92!==ra&&126>=ra?String.fromCharCode(ra):"."}db.push(oa)}for(oa=
da(na.toString(16).toUpperCase(),5)+"   ";na<M.length;na++)oa+=da(M[na].toString(16).toUpperCase(),2)+" ";wa=na&15;oa+="   ".repeat(16-wa);oa+="  ";for(ra=0;ra<wa;ra++){const La=M[na+ra];oa+=33<=La&&34!==La&&92!==La&&126>=La?String.fromCharCode(La):"."}db.push(oa);Ia.call(ma,{direction:I,time:Xa,Lj:"\n"+db.join("\n")+"\n"});Y("capture_network_traffic").value=L.length+" packets"}this.value="0 packets";let L=[];c.me.register("net0-receive",z.bind(this,"I"));be(c,"net0-send",z.bind(this,"O"));this.onclick=
function(){const I=L.map(({direction:M,time:ma,Lj:Ia})=>M+" "+ma.toFixed(6)+Ia+"\n").join("");va(I,"traffic.hex");L=[];this.value="0 packets"}};Y("save_state").onclick=async function(){const z=await c.ah();va(z,"v86state.bin");Y("save_state").blur()};Y("load_state").onclick=function(){Y("load_state_input").click();Y("load_state").blur()};Y("load_state_input").onchange=async function(){var z=this.files[0];if(z){var L=c.ud();L&&await c.stop();var I=new FileReader;I.onload=async function(M){try{await c.sg(M.target.result)}catch(ma){throw alert("Something bad happened while restoring the state:\n"+
ma+"\n\nNote that the current configuration must be the same as the original"),ma;}L&&c.If()};I.readAsArrayBuffer(z);this.value=""}};Y("ctrlaltdel").onclick=function(){ce(c,[29,56,83,157,184,211]);Y("ctrlaltdel").blur()};Y("alttab").onclick=function(){ce(c,[56,15]);setTimeout(function(){ce(c,[184,143])},100);Y("alttab").blur()};Y("scale").onchange=function(){var z=parseFloat(this.value);(z||0<z)&&c.ec&&c.ec.gh(z,z)};Y("fullscreen").onclick=function(){if(c.ec){var z=document.getElementById("screen_container");
if(z){var L=z.requestFullScreen||z.webkitRequestFullscreen||z.mozRequestFullScreen||z.msRequestFullScreen;L&&(L.call(z),(z=document.getElementsByClassName("phone_keyboard")[0])&&z.focus());try{navigator.keyboard.lock()}catch(I){}ee()}}};Y("screen_container").onclick=function(){c.ud()&&c.g&&"suspended"===c.g.ca.state&&c.g.ca.resume();if(h&&p)ee();else if(window.getSelection().isCollapsed){const z=document.getElementsByClassName("phone_keyboard")[0];z.style.top=document.body.scrollTop+100+"px";z.style.left=
document.body.scrollLeft+100+"px";z.focus()}};const P=document.getElementsByClassName("phone_keyboard")[0];P.setAttribute("autocorrect","off");P.setAttribute("autocapitalize","off");P.setAttribute("spellcheck","false");P.tabIndex=0;Y("screen_container").addEventListener("mousedown",()=>{P.focus()},!1);Y("take_screenshot").onclick=function(){const z=c.ec?c.ec.Pj():null;try{window.open("").document.write(z.outerHTML)}catch(L){}Y("take_screenshot").blur()};if(c.g){let z=!1;Y("mute").onclick=function(){z?
(c.g.lg.vg(1,void 0),z=!1,Y("mute").value="Mute"):(c.g.lg.vg(0,void 0),z=!0,Y("mute").value="Unmute");Y("mute").blur()}}else Y("mute").remove();window.addEventListener("keydown",f,!1);window.addEventListener("keyup",f,!1);window.addEventListener("blur",f,!1);b=document.createElement("script");b.src="build/xterm.js";b.async=!0;b.onload=function(){var z=Y("terminal");c.fc&&c.fc.ya&&c.fc.ya();c.fc=new Nc(z,c.v);c.fc.show()};document.body.appendChild(b)}
function Wg(a){Y("filesystem_panel").style.display="block";Y("filesystem_send_file").onchange=function(){Array.prototype.forEach.call(this.files,function(b){var c=new Fa(b);c.onload=function(){c.ac(async function(d){await a.kj("/"+b.name,new Uint8Array(d))})};c.load()},this);this.value="";this.blur()};Y("filesystem_get_file").onkeypress=async function(b){if(13===b.which){this.disabled=!0;try{var c=await a.Hf(this.value)}catch(d){console.log(d)}this.disabled=!1;c?(b=this.value.replace(/\/$/,"").split("/"),
b=b[b.length-1]||"root",va(c,b),this.value=""):alert("Can't read file")}}}function Tg(){location.reload()}function Ug(a){window.history.pushState&&(a="?"+Array.from(a.entries()).map(([b,c])=>b+"="+c.replace(/[?&=#+]/g,encodeURIComponent)).join("&"),window.history.pushState({search:a},"",a))};
