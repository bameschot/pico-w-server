<!doctype html>
<title>Asynchronous loading of disk images</title>

<script src="libv86.js"></script>
<script>
"use strict";

window.onload = function()
{
    // Async loading of the iso image
    // Note how the emulation starts without downloading the 50MB image

    // Support of the "Range: bytes=..." header is required on the server, CORS
    // is required if the server is on a different host

    var emulator = new V86Starter({
        wasm_path: "/v86.wasm",
        memory_size: 64 * 1024 * 1024,
        vga_memory_size: 16 * 1024 * 1024,
        screen_container: document.getElementById("screen_container"),
        bios: {
            url: "/seabios.bin",
        },
        vga_bios: {
            url: "/vgabios.bin",
        },
        // cdrom: {
        //     url: "https://raw.githubusercontent.com/copy/images/db92d8fd4a53dbd73b8e0588bb4bd8fe37a1975a/linux.iso",
        //     async: false,
        //     // size can be determined automatically, but costs an extra request
        //     // and might not work reliably
        // },
        autostart: true,
    });
}
</script>

<div id="screen_container">
    <div style="white-space: pre; font: 14px monospace; line-height: 14px"></div>
    <canvas style="display: none"></canvas>
</div>